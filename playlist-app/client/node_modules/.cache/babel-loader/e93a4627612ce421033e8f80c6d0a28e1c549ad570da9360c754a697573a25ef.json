{"ast":null,"code":"var __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all) __defProp(target, name, {\n    get: all[name],\n    enumerable: true\n  });\n};\n\n// src/index.tsx\nimport { createRef, PureComponent } from \"react\";\nimport isEqual from \"@gilbarbara/deep-equal\";\nimport memoize from \"memoize-one\";\n\n// src/constants.ts\nvar ERROR_TYPE = {\n  ACCOUNT: \"account\",\n  AUTHENTICATION: \"authentication\",\n  INITIALIZATION: \"initialization\",\n  PLAYBACK: \"playback\",\n  PLAYER: \"player\"\n};\nvar SPOTIFY_CONTENT_TYPE = {\n  ALBUM: \"album\",\n  ARTIST: \"artist\",\n  PLAYLIST: \"playlist\",\n  SHOW: \"show\",\n  TRACK: \"track\"\n};\nvar STATUS = {\n  ERROR: \"ERROR\",\n  IDLE: \"IDLE\",\n  INITIALIZING: \"INITIALIZING\",\n  READY: \"READY\",\n  RUNNING: \"RUNNING\",\n  UNSUPPORTED: \"UNSUPPORTED\"\n};\nvar TRANSPARENT_COLOR = \"rgba(0, 0, 0, 0)\";\nvar TYPE = {\n  DEVICE: \"device_update\",\n  FAVORITE: \"favorite_update\",\n  PLAYER: \"player_update\",\n  PRELOAD: \"preload_update\",\n  PROGRESS: \"progress_update\",\n  STATUS: \"status_update\",\n  TRACK: \"track_update\"\n};\n\n// src/modules/helpers.ts\nfunction isNumber(value) {\n  return typeof value === \"number\";\n}\nfunction loadSpotifyPlayer() {\n  return new Promise((resolve, reject) => {\n    const scriptTag = document.getElementById(\"spotify-player\");\n    if (!scriptTag) {\n      const script = document.createElement(\"script\");\n      script.id = \"spotify-player\";\n      script.type = \"text/javascript\";\n      script.async = false;\n      script.defer = true;\n      script.src = \"https://sdk.scdn.co/spotify-player.js\";\n      script.onload = () => resolve();\n      script.onerror = error => reject(new Error(`loadScript: ${error.message}`));\n      document.head.appendChild(script);\n    } else {\n      resolve();\n    }\n  });\n}\nfunction millisecondsToTime(input) {\n  const seconds = Math.floor(input / 1e3 % 60);\n  const minutes = Math.floor(input / (1e3 * 60) % 60);\n  const hours = Math.floor(input / (1e3 * 60 * 60) % 24);\n  const parts = [];\n  if (hours > 0) {\n    parts.push(`${hours}`.padStart(2, \"0\"), `${minutes}`.padStart(2, \"0\"), `${seconds}`.padStart(2, \"0\"));\n  } else {\n    parts.push(`${minutes}`, `${seconds}`.padStart(2, \"0\"));\n  }\n  return parts.join(\":\");\n}\nfunction parseIds(ids) {\n  if (!ids) {\n    return [];\n  }\n  return Array.isArray(ids) ? ids : [ids];\n}\nfunction parseVolume(value) {\n  if (!isNumber(value)) {\n    return 1;\n  }\n  if (value > 1) {\n    return value / 100;\n  }\n  return value;\n}\nfunction round(number, digits = 2) {\n  const factor = 10 ** digits;\n  return Math.round(number * factor) / factor;\n}\nfunction validateURI(input) {\n  if (input && input.indexOf(\":\") > -1) {\n    const [key, type, id] = input.split(\":\");\n    if (key === \"spotify\" && Object.values(SPOTIFY_CONTENT_TYPE).includes(type) && id.length === 22) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// src/modules/spotify.ts\nvar spotify_exports = {};\n__export(spotify_exports, {\n  checkTracksStatus: () => checkTracksStatus,\n  getAlbumTracks: () => getAlbumTracks,\n  getArtistTopTracks: () => getArtistTopTracks,\n  getDevices: () => getDevices,\n  getPlaybackState: () => getPlaybackState,\n  getPlaylistTracks: () => getPlaylistTracks,\n  getQueue: () => getQueue,\n  getShow: () => getShow,\n  getShowEpisodes: () => getShowEpisodes,\n  getTrack: () => getTrack,\n  next: () => next,\n  pause: () => pause,\n  play: () => play,\n  previous: () => previous,\n  removeTracks: () => removeTracks,\n  repeat: () => repeat,\n  saveTracks: () => saveTracks,\n  seek: () => seek,\n  setDevice: () => setDevice,\n  setVolume: () => setVolume,\n  shuffle: () => shuffle\n});\nasync function checkTracksStatus(token, tracks) {\n  return fetch(`https://api.spotify.com/v1/me/tracks/contains?ids=${parseIds(tracks)}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"GET\"\n  }).then(d => d.json());\n}\nasync function getAlbumTracks(token, id) {\n  return fetch(`https://api.spotify.com/v1/albums/${id}/tracks`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"GET\"\n  }).then(d => d.json());\n}\nasync function getArtistTopTracks(token, id) {\n  return fetch(`https://api.spotify.com/v1/artists/${id}/top-tracks`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"GET\"\n  }).then(d => d.json());\n}\nasync function getDevices(token) {\n  return fetch(`https://api.spotify.com/v1/me/player/devices`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"GET\"\n  }).then(d => d.json());\n}\nasync function getPlaybackState(token) {\n  return fetch(`https://api.spotify.com/v1/me/player`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"GET\"\n  }).then(d => {\n    if (d.status === 204) {\n      return null;\n    }\n    return d.json();\n  });\n}\nasync function getPlaylistTracks(token, id) {\n  return fetch(`https://api.spotify.com/v1/playlists/${id}/tracks`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"GET\"\n  }).then(d => d.json());\n}\nasync function getQueue(token) {\n  return fetch(`https://api.spotify.com/v1/me/player/queue`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"GET\"\n  }).then(d => d.json());\n}\nasync function getShow(token, id) {\n  return fetch(`https://api.spotify.com/v1/shows/${id}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"GET\"\n  }).then(d => d.json());\n}\nasync function getShowEpisodes(token, id, offset = 0) {\n  return fetch(`https://api.spotify.com/v1/shows/${id}/episodes?offset=${offset}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"GET\"\n  }).then(d => d.json());\n}\nasync function getTrack(token, id) {\n  return fetch(`https://api.spotify.com/v1/tracks/${id}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"GET\"\n  }).then(d => d.json());\n}\nasync function next(token, deviceId) {\n  let query = \"\";\n  if (deviceId) {\n    query += `?device_id=${deviceId}`;\n  }\n  await fetch(`https://api.spotify.com/v1/me/player/next${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"POST\"\n  });\n}\nasync function pause(token, deviceId) {\n  let query = \"\";\n  if (deviceId) {\n    query += `?device_id=${deviceId}`;\n  }\n  await fetch(`https://api.spotify.com/v1/me/player/pause${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"PUT\"\n  });\n}\nasync function play(token, {\n  context_uri,\n  deviceId,\n  offset = 0,\n  uris\n}) {\n  let body;\n  if (context_uri) {\n    const isArtist = context_uri.indexOf(\"artist\") >= 0;\n    let position;\n    if (!isArtist) {\n      position = {\n        position: offset\n      };\n    }\n    body = JSON.stringify({\n      context_uri,\n      offset: position\n    });\n  } else if (Array.isArray(uris) && uris.length) {\n    body = JSON.stringify({\n      uris,\n      offset: {\n        position: offset\n      }\n    });\n  }\n  await fetch(`https://api.spotify.com/v1/me/player/play?device_id=${deviceId}`, {\n    body,\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"PUT\"\n  });\n}\nasync function previous(token, deviceId) {\n  let query = \"\";\n  if (deviceId) {\n    query += `?device_id=${deviceId}`;\n  }\n  await fetch(`https://api.spotify.com/v1/me/player/previous${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"POST\"\n  });\n}\nasync function removeTracks(token, tracks) {\n  await fetch(`https://api.spotify.com/v1/me/tracks`, {\n    body: JSON.stringify({\n      ids: parseIds(tracks)\n    }),\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"DELETE\"\n  });\n}\nasync function repeat(token, state, deviceId) {\n  let query = `?state=${state}`;\n  if (deviceId) {\n    query += `&device_id=${deviceId}`;\n  }\n  await fetch(`https://api.spotify.com/v1/me/player/repeat${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"PUT\"\n  });\n}\nasync function saveTracks(token, tracks) {\n  await fetch(`https://api.spotify.com/v1/me/tracks`, {\n    body: JSON.stringify({\n      ids: parseIds(tracks)\n    }),\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"PUT\"\n  });\n}\nasync function seek(token, position, deviceId) {\n  let query = `?position_ms=${position}`;\n  if (deviceId) {\n    query += `&device_id=${deviceId}`;\n  }\n  await fetch(`https://api.spotify.com/v1/me/player/seek${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"PUT\"\n  });\n}\nasync function setDevice(token, deviceId, shouldPlay) {\n  await fetch(`https://api.spotify.com/v1/me/player`, {\n    body: JSON.stringify({\n      device_ids: [deviceId],\n      play: shouldPlay\n    }),\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"PUT\"\n  });\n}\nasync function setVolume(token, volume, deviceId) {\n  let query = `?volume_percent=${volume}`;\n  if (deviceId) {\n    query += `&device_id=${deviceId}`;\n  }\n  await fetch(`https://api.spotify.com/v1/me/player/volume${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"PUT\"\n  });\n}\nasync function shuffle(token, state, deviceId) {\n  let query = `?state=${state}`;\n  if (deviceId) {\n    query += `&device_id=${deviceId}`;\n  }\n  await fetch(`https://api.spotify.com/v1/me/player/shuffle${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"PUT\"\n  });\n}\n\n// src/modules/getters.ts\nfunction getItemImage(item) {\n  const maxWidth = Math.max(...item.images.map(d => d.width ?? 0));\n  return item.images.find(d => d.width === maxWidth)?.url ?? \"\";\n}\nfunction getBgColor(bgColor, fallbackColor) {\n  if (fallbackColor) {\n    return bgColor === TRANSPARENT_COLOR ? fallbackColor : bgColor;\n  }\n  return bgColor === \"transparent\" ? TRANSPARENT_COLOR : bgColor;\n}\nfunction getLocale(locale) {\n  return {\n    currentDevice: \"Current device\",\n    devices: \"Devices\",\n    next: \"Next\",\n    otherDevices: \"Select other device\",\n    pause: \"Pause\",\n    play: \"Play\",\n    previous: \"Previous\",\n    removeTrack: \"Remove from your favorites\",\n    saveTrack: \"Save to your favorites\",\n    title: \"{name} on SPOTIFY\",\n    volume: \"Volume\",\n    ...locale\n  };\n}\nfunction getMergedStyles(styles) {\n  const mergedStyles = {\n    activeColor: \"#1cb954\",\n    bgColor: \"#fff\",\n    color: \"#333\",\n    errorColor: \"#ff0026\",\n    height: 80,\n    loaderColor: \"#ccc\",\n    loaderSize: 32,\n    sliderColor: \"#666\",\n    sliderHandleBorderRadius: \"50%\",\n    sliderHandleColor: \"#000\",\n    sliderHeight: 4,\n    sliderTrackBorderRadius: 4,\n    sliderTrackColor: \"#ccc\",\n    trackArtistColor: \"#666\",\n    trackNameColor: \"#333\",\n    ...styles\n  };\n  mergedStyles.bgColor = getBgColor(mergedStyles.bgColor);\n  return mergedStyles;\n}\nasync function getPreloadData(token, uris, offset) {\n  const parsedURIs = parseIds(uris);\n  const uri = parsedURIs[offset];\n  if (!validateURI(uri)) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(\"PreloadData: Invalid URI\", parsedURIs[offset]);\n    }\n    return null;\n  }\n  const [, type, id] = uri.split(\":\");\n  try {\n    switch (type) {\n      case SPOTIFY_CONTENT_TYPE.ALBUM:\n        {\n          const {\n            items\n          } = await getAlbumTracks(token, id);\n          const track = await getTrack(token, items[offset].id);\n          return getTrackInfo(track);\n        }\n      case SPOTIFY_CONTENT_TYPE.ARTIST:\n        {\n          const {\n            tracks\n          } = await getArtistTopTracks(token, id);\n          return getTrackInfo(tracks[offset]);\n        }\n      case SPOTIFY_CONTENT_TYPE.PLAYLIST:\n        {\n          const {\n            items\n          } = await getPlaylistTracks(token, id);\n          if (items[offset]?.track) {\n            return getTrackInfo(items[offset]?.track);\n          }\n          return null;\n        }\n      case SPOTIFY_CONTENT_TYPE.SHOW:\n        {\n          const show = await getShow(token, id);\n          const {\n            items\n          } = await getShowEpisodes(token, id, show.total_episodes ? show.total_episodes - 1 : 0);\n          const episode = items?.[0] ?? {\n            duration_ms: 0,\n            id: show.id,\n            images: show.images,\n            name: show.name,\n            uri: show.uri\n          };\n          return {\n            artists: [{\n              name: show.name,\n              uri: show.uri\n            }],\n            durationMs: episode.duration_ms,\n            id: episode.id,\n            image: getItemImage(episode),\n            name: episode.name,\n            uri: episode.uri\n          };\n        }\n      default:\n        {\n          const track = await getTrack(token, id);\n          return getTrackInfo(track);\n        }\n    }\n  } catch (error) {\n    console.error(\"PreloadData:\", error);\n    return null;\n  }\n}\nfunction getRepeatState(mode) {\n  switch (mode) {\n    case 1:\n      return \"context\";\n    case 2:\n      return \"track\";\n    case 0:\n    default:\n      return \"off\";\n  }\n}\nfunction getSpotifyLink(uri) {\n  const [, type = \"\", id = \"\"] = uri.split(\":\");\n  return `https://open.spotify.com/${type}/${id}`;\n}\nfunction getSpotifyLinkTitle(name, locale) {\n  return locale.replace(\"{name}\", name);\n}\nfunction getSpotifyURIType(uri) {\n  const [, type = \"\"] = uri.split(\":\");\n  return type;\n}\nfunction getTrackInfo(track) {\n  const {\n    album,\n    artists,\n    duration_ms,\n    id,\n    name,\n    uri\n  } = track;\n  return {\n    artists,\n    durationMs: duration_ms,\n    id: id ?? \"\",\n    image: getItemImage(album),\n    name,\n    uri\n  };\n}\n\n// src/modules/styled.tsx\nimport { createElement } from \"react\";\nimport { create } from \"nano-css\";\nimport { addon as addonJSX } from \"nano-css/addon/jsx.js\";\nimport { addon as addonKeyframes } from \"nano-css/addon/keyframes.js\";\nimport { addon as addonNesting } from \"nano-css/addon/nesting.js\";\nimport { addon as addonRule } from \"nano-css/addon/rule.js\";\nimport { addon as addonStyle } from \"nano-css/addon/style.js\";\nimport { addon as addonStyled } from \"nano-css/addon/styled.js\";\nvar nano = create({\n  h: createElement\n});\naddonRule(nano);\naddonKeyframes(nano);\naddonJSX(nano);\naddonStyle(nano);\naddonStyled(nano);\naddonNesting(nano);\nvar {\n  keyframes,\n  put,\n  styled\n} = nano;\nvar px = value => typeof value === \"number\" ? `${value}px` : value;\n\n// src/components/Actions.tsx\nimport { memo } from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar Wrapper = styled(\"div\")({\n  alignItems: \"center\",\n  display: \"flex\",\n  justifyContent: \"flex-end\",\n  \"pointer-events\": \"none\"\n}, ({\n  style\n}) => {\n  let styles = {\n    bottom: 0,\n    position: \"absolute\",\n    right: 0,\n    width: \"auto\"\n  };\n  if (style.layout === \"responsive\") {\n    styles = {\n      \"@media (max-width: 767px)\": styles,\n      \"@media (min-width: 768px)\": {\n        height: px(style.h)\n      }\n    };\n  }\n  return {\n    height: px(32),\n    ...styles\n  };\n}, \"ActionsRSWP\");\nfunction Actions(props) {\n  const {\n    children,\n    layout,\n    styles\n  } = props;\n  return /* @__PURE__ */jsx(Wrapper, {\n    \"data-component-name\": \"Actions\",\n    style: {\n      h: styles.height,\n      layout\n    },\n    children\n  });\n}\nvar Actions_default = memo(Actions);\n\n// src/components/Controls.tsx\nimport { memo as memo3 } from \"react\";\n\n// src/components/icons/Next.tsx\nimport { jsx as jsx2 } from \"react/jsx-runtime\";\nfunction Next(props) {\n  return /* @__PURE__ */jsx2(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx2(\"path\", {\n      d: \"M53.486 0a3.2 3.2 0 0 0-3.2 3.2v23.543L4.8.489A3.2 3.2 0 0 0 0 3.255V60.74a3.2 3.2 0 0 0 4.8 2.774l45.486-26.262V60.8a3.2 3.2 0 0 0 3.2 3.2H60.8a3.2 3.2 0 0 0 3.2-3.2V3.2A3.2 3.2 0 0 0 60.8 0h-7.314Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/icons/Pause.tsx\nimport { jsx as jsx3 } from \"react/jsx-runtime\";\nfunction Pause(props) {\n  return /* @__PURE__ */jsx3(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx3(\"path\", {\n      d: \"M32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0Zm-5.4 18h-5.2a1.4 1.4 0 0 0-1.4 1.4v25.2a1.4 1.4 0 0 0 1.4 1.4h5.2a1.4 1.4 0 0 0 1.4-1.4V19.4a1.4 1.4 0 0 0-1.4-1.4Zm16 0h-5.2a1.4 1.4 0 0 0-1.4 1.4v25.2a1.4 1.4 0 0 0 1.4 1.4h5.2a1.4 1.4 0 0 0 1.4-1.4V19.4a1.4 1.4 0 0 0-1.4-1.4Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/icons/Play.tsx\nimport { jsx as jsx4 } from \"react/jsx-runtime\";\nfunction Play(props) {\n  return /* @__PURE__ */jsx4(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx4(\"path\", {\n      d: \"M32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0Zm-7.61 18.188c-.435.251-.702.715-.701 1.216v25.194a1.402 1.402 0 0 0 2.104 1.214L47.61 33.214a1.402 1.402 0 0 0 0-2.428L25.793 18.188c-.435-.25-.97-.25-1.404 0Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/icons/Previous.tsx\nimport { jsx as jsx5 } from \"react/jsx-runtime\";\nfunction Previous(props) {\n  return /* @__PURE__ */jsx5(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx5(\"path\", {\n      d: \"M10.514 0a3.2 3.2 0 0 1 3.2 3.2v23.543L59.2.489A3.2 3.2 0 0 1 64 3.255V60.74a3.2 3.2 0 0 1-4.8 2.774L13.714 37.253V60.8a3.2 3.2 0 0 1-3.2 3.2H3.2A3.2 3.2 0 0 1 0 60.8V3.2A3.2 3.2 0 0 1 3.2 0h7.314Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/Slider.tsx\nimport { memo as memo2 } from \"react\";\nimport RangeSlider from \"@gilbarbara/react-range-slider\";\nimport { jsx as jsx6, jsxs } from \"react/jsx-runtime\";\nvar Wrapper2 = styled(\"div\")({\n  alignItems: \"center\",\n  display: \"flex\",\n  fontSize: px(12),\n  transition: \"height 0.3s\",\n  zIndex: 10\n}, ({\n  style\n}) => ({\n  '[class^=\"rswp_\"]': {\n    color: style.c,\n    lineHeight: 1,\n    minWidth: px(32)\n  },\n  \".rswp_progress\": {\n    marginRight: px(style.sliderHeight + 6),\n    textAlign: \"right\"\n  },\n  \".rswp_duration\": {\n    marginLeft: px(style.sliderHeight + 6),\n    textAlign: \"left\"\n  }\n}), \"SliderRSWP\");\nfunction Slider(props) {\n  const {\n    durationMs,\n    isMagnified,\n    onChangeRange,\n    onToggleMagnify,\n    position,\n    progressMs,\n    styles\n  } = props;\n  const handleChangeRange = async ({\n    x\n  }) => {\n    onChangeRange(x);\n  };\n  const handleSize = styles.sliderHeight + 6;\n  return /* @__PURE__ */jsxs(Wrapper2, {\n    \"data-component-name\": \"Slider\",\n    \"data-position\": position,\n    onMouseEnter: onToggleMagnify,\n    onMouseLeave: onToggleMagnify,\n    style: {\n      c: styles.color,\n      sliderHeight: styles.sliderHeight\n    },\n    children: [/* @__PURE__ */jsx6(\"div\", {\n      className: \"rswp_progress\",\n      children: millisecondsToTime(progressMs)\n    }), /* @__PURE__ */jsx6(RangeSlider, {\n      axis: \"x\",\n      className: \"slider\",\n      \"data-component-name\": \"progress-bar\",\n      onChange: handleChangeRange,\n      styles: {\n        options: {\n          thumbBorder: 0,\n          thumbBorderRadius: styles.sliderHandleBorderRadius,\n          thumbColor: styles.sliderHandleColor,\n          thumbSize: isMagnified ? handleSize + 4 : handleSize,\n          height: isMagnified ? styles.sliderHeight + 4 : styles.sliderHeight,\n          padding: 0,\n          rangeColor: styles.sliderColor,\n          trackBorderRadius: styles.sliderTrackBorderRadius,\n          trackColor: styles.sliderTrackColor\n        }\n      },\n      x: position,\n      xMax: 100,\n      xMin: 0,\n      xStep: 0.1\n    }), /* @__PURE__ */jsx6(\"div\", {\n      className: \"rswp_duration\",\n      children: millisecondsToTime(durationMs)\n    })]\n  });\n}\nvar Slider_default = memo2(Slider);\n\n// src/components/Controls.tsx\nimport { jsx as jsx7, jsxs as jsxs2 } from \"react/jsx-runtime\";\nvar Wrapper3 = styled(\"div\")({\n  \".rswp__volume\": {\n    position: \"absolute\",\n    right: 0,\n    top: 0\n  },\n  \".rswp__devices\": {\n    position: \"absolute\",\n    left: 0,\n    top: 0\n  }\n}, ({\n  style\n}) => {\n  const isCompactLayout = style.layout === \"compact\";\n  const styles = {};\n  if (isCompactLayout) {\n    styles.padding = px(8);\n  } else {\n    styles.padding = `${px(4)} 0`;\n    styles[\"@media (max-width: 767px)\"] = {\n      padding: px(8)\n    };\n  }\n  return styles;\n}, \"ControlsRSWP\");\nvar Buttons = styled(\"div\")({\n  alignItems: \"center\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  marginBottom: px(8),\n  position: \"relative\",\n  \"> div\": {\n    alignItems: \"center\",\n    display: \"flex\",\n    minWidth: px(32),\n    textAlign: \"center\"\n  }\n}, ({\n  style\n}) => ({\n  color: style.c\n}), \"ControlsButtonsRSWP\");\nvar Button = styled(\"button\")({\n  alignItems: \"center\",\n  display: \"inline-flex\",\n  fontSize: px(16),\n  height: px(32),\n  justifyContent: \"center\",\n  width: px(32),\n  \"&:disabled\": {\n    cursor: \"default\",\n    opacity: 0.6\n  },\n  \"&.rswp__toggle\": {\n    fontSize: px(32),\n    width: px(48)\n  }\n}, () => ({}), \"ControlsButtonRSWP\");\nfunction Controls(props) {\n  const {\n    components: {\n      leftButton,\n      rightButton\n    } = {},\n    devices,\n    durationMs,\n    isActive,\n    isExternalDevice,\n    isMagnified,\n    isPlaying,\n    layout,\n    locale,\n    nextTracks,\n    onChangeRange,\n    onClickNext,\n    onClickPrevious,\n    onClickTogglePlay,\n    onToggleMagnify,\n    position,\n    progressMs,\n    styles,\n    volume\n  } = props;\n  const {\n    color\n  } = styles;\n  return /* @__PURE__ */jsxs2(Wrapper3, {\n    \"data-component-name\": \"Controls\",\n    \"data-playing\": isPlaying,\n    style: {\n      layout\n    },\n    children: [/* @__PURE__ */jsxs2(Buttons, {\n      style: {\n        c: color\n      },\n      children: [devices && /* @__PURE__ */jsx7(\"div\", {\n        className: \"rswp__devices\",\n        children: devices\n      }), /* @__PURE__ */jsx7(\"div\", {\n        children: leftButton\n      }), /* @__PURE__ */jsx7(\"div\", {\n        children: /* @__PURE__ */jsx7(Button, {\n          \"aria-label\": locale.previous,\n          className: \"ButtonRSWP\",\n          disabled: !isActive && !isExternalDevice,\n          onClick: onClickPrevious,\n          title: locale.previous,\n          type: \"button\",\n          children: /* @__PURE__ */jsx7(Previous, {})\n        })\n      }), /* @__PURE__ */jsx7(\"div\", {\n        children: /* @__PURE__ */jsx7(Button, {\n          \"aria-label\": isPlaying ? locale.pause : locale.play,\n          className: \"ButtonRSWP rswp__toggle\",\n          onClick: onClickTogglePlay,\n          title: isPlaying ? locale.pause : locale.play,\n          type: \"button\",\n          children: isPlaying ? /* @__PURE__ */jsx7(Pause, {}) : /* @__PURE__ */jsx7(Play, {})\n        })\n      }), /* @__PURE__ */jsx7(\"div\", {\n        children: /* @__PURE__ */jsx7(Button, {\n          \"aria-label\": locale.next,\n          className: \"ButtonRSWP\",\n          disabled: !nextTracks.length && !isActive && !isExternalDevice,\n          onClick: onClickNext,\n          title: locale.next,\n          type: \"button\",\n          children: /* @__PURE__ */jsx7(Next, {})\n        })\n      }), /* @__PURE__ */jsx7(\"div\", {\n        children: rightButton\n      }), volume && /* @__PURE__ */jsx7(\"div\", {\n        className: \"rswp__volume\",\n        children: volume\n      })]\n    }), /* @__PURE__ */jsx7(Slider_default, {\n      durationMs,\n      isMagnified,\n      onChangeRange,\n      onToggleMagnify,\n      position,\n      progressMs,\n      styles\n    })]\n  });\n}\nvar Controls_default = memo3(Controls);\n\n// src/components/Devices.tsx\nimport { useCallback, useState } from \"react\";\n\n// src/components/ClickOutside.tsx\nimport { memo as memo4, useEffect, useRef } from \"react\";\nimport { jsx as jsx8 } from \"react/jsx-runtime\";\nfunction ClickOutside(props) {\n  const {\n    children,\n    isActive,\n    onClick,\n    ...rest\n  } = props;\n  const containerRef = useRef(null);\n  const isTouch = useRef(false);\n  const handleClick = useRef(event => {\n    const container = containerRef.current;\n    if (event.type === \"touchend\") {\n      isTouch.current = true;\n    }\n    if (event.type === \"click\" && isTouch.current) {\n      return;\n    }\n    if (container && !container.contains(event.target)) {\n      onClick();\n    }\n  });\n  useEffect(() => {\n    const {\n      current\n    } = handleClick;\n    if (isActive) {\n      document.addEventListener(\"touchend\", current, true);\n      document.addEventListener(\"click\", current, true);\n    }\n    return () => {\n      document.removeEventListener(\"touchend\", current, true);\n      document.removeEventListener(\"click\", current, true);\n    };\n  }, [isActive]);\n  return /* @__PURE__ */jsx8(\"div\", {\n    ref: containerRef,\n    ...rest,\n    children\n  });\n}\nvar ClickOutside_default = memo4(ClickOutside);\n\n// src/components/icons/Devices.tsx\nimport { jsx as jsx9 } from \"react/jsx-runtime\";\nfunction DevicesIcon(props) {\n  return /* @__PURE__ */jsx9(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx9(\"path\", {\n      d: \"M57 4c3.864 0 7 3.136 7 7v42a7 7 0 0 1-7 7H31a7 7 0 0 1-7-7V11c0-3.864 3.136-7 7-7h26ZM16 54v6H8v-6h8Zm41-44H31a1 1 0 0 0-1 1v42a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V11a1 1 0 0 0-1-1ZM44 32a8 8 0 1 1 0 16 8 8 0 0 1 0-16ZM16 4v6H7a1 1 0 0 0-1 1v26a1 1 0 0 0 1 1h9v6H7a7 7 0 0 1-7-7V11c0-3.864 3.136-7 7-7h9Zm28 12a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/icons/DevicesComputer.tsx\nimport { jsx as jsx10 } from \"react/jsx-runtime\";\nfunction DevicesComputerIcon(props) {\n  return /* @__PURE__ */jsx10(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx10(\"path\", {\n      d: \"M7.226 10.323a7.228 7.228 0 0 1 7.226-7.226h35.096a7.228 7.228 0 0 1 7.226 7.226V37.16a7.226 7.226 0 0 1-7.226 7.226H14.452a7.226 7.226 0 0 1-7.226-7.226V10.323Zm7.226-1.033c-.57 0-1.033.462-1.033 1.033V37.16c0 .57.463 1.033 1.033 1.033h35.096c.57 0 1.033-.463 1.033-1.033V10.323c0-.57-.463-1.033-1.033-1.033H14.452ZM0 57.806a3.097 3.097 0 0 1 3.097-3.096h57.806a3.097 3.097 0 0 1 0 6.193H3.097A3.097 3.097 0 0 1 0 57.806Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/icons/DevicesMobile.tsx\nimport { jsx as jsx11 } from \"react/jsx-runtime\";\nfunction DevicesMobileIcon(props) {\n  return /* @__PURE__ */jsx11(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx11(\"path\", {\n      d: \"M44.8 0a9.6 9.6 0 0 1 9.6 9.6v44.8a9.6 9.6 0 0 1-9.6 9.6H19.2a9.6 9.6 0 0 1-9.6-9.6V9.6A9.6 9.6 0 0 1 19.2 0h25.6Zm0 6.4H19.2A3.2 3.2 0 0 0 16 9.6v44.8a3.2 3.2 0 0 0 3.2 3.2h25.6a3.2 3.2 0 0 0 3.2-3.2V9.6a3.2 3.2 0 0 0-3.2-3.2ZM32 43.2a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/icons/DevicesSpeaker.tsx\nimport { jsx as jsx12 } from \"react/jsx-runtime\";\nfunction DevicesSpeakerIcon(props) {\n  return /* @__PURE__ */jsx12(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx12(\"path\", {\n      d: \"M45 4c3.864 0 7 3.136 7 7v42a7 7 0 0 1-7 7H19a7 7 0 0 1-7-7V11c0-3.864 3.136-7 7-7h26Zm0 6H19a1 1 0 0 0-1 1v42a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V11a1 1 0 0 0-1-1ZM32 32a8 8 0 1 1 0 16 8 8 0 0 1 0-16Zm0-16a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/Devices.tsx\nimport { Fragment, jsx as jsx13, jsxs as jsxs3 } from \"react/jsx-runtime\";\nvar Wrapper4 = styled(\"div\")({\n  \"pointer-events\": \"all\",\n  alignItems: \"center\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  position: \"relative\",\n  zIndex: 20,\n  \"> div\": {\n    backgroundColor: \"#000\",\n    borderRadius: px(8),\n    color: \"#fff\",\n    filter: \"drop-shadow(1px 1px 6px rgba(0, 0, 0, 0.5))\",\n    fontSize: px(14),\n    padding: px(16),\n    position: \"absolute\",\n    textAlign: \"left\",\n    \"> p\": {\n      fontWeight: \"bold\",\n      marginBottom: px(8),\n      marginTop: px(16),\n      whiteSpace: \"nowrap\"\n    },\n    button: {\n      alignItems: \"center\",\n      display: \"flex\",\n      whiteSpace: \"nowrap\",\n      width: \"100%\",\n      \"&:not(:last-of-type)\": {\n        marginBottom: px(12)\n      },\n      span: {\n        display: \"inline-block\",\n        marginLeft: px(4)\n      }\n    },\n    \"> span\": {\n      background: \"transparent\",\n      borderLeft: `6px solid transparent`,\n      borderRight: `6px solid transparent`,\n      content: '\"\"',\n      display: \"block\",\n      height: 0,\n      position: \"absolute\",\n      width: 0\n    }\n  },\n  \"> button\": {\n    alignItems: \"center\",\n    display: \"flex\",\n    fontSize: px(24),\n    height: px(32),\n    justifyContent: \"center\",\n    width: px(32)\n  }\n}, ({\n  style\n}) => {\n  const isCompact = style.layout === \"compact\";\n  const divStyles = isCompact ? {\n    bottom: \"120%\",\n    left: 0\n  } : {\n    [style.p]: \"120%\",\n    left: 0,\n    \"@media (min-width: 768px)\": {\n      left: \"auto\",\n      right: 0\n    }\n  };\n  const spanStyles = isCompact ? {\n    bottom: `-${px(6)}`,\n    borderTop: `6px solid #000`,\n    left: px(10)\n  } : {\n    [style.p === \"top\" ? \"border-bottom\" : \"border-top\"]: `6px solid #000`,\n    [style.p]: \"-6px\",\n    left: px(10),\n    \"@media (min-width: 768px)\": {\n      left: \"auto\",\n      right: px(10)\n    }\n  };\n  return {\n    \"> button\": {\n      color: style.c\n    },\n    \"> div\": {\n      ...divStyles,\n      \"> span\": spanStyles\n    }\n  };\n}, \"DevicesRSWP\");\nvar ListHeader = styled(\"div\")({\n  p: {\n    whiteSpace: \"nowrap\",\n    \"&:nth-of-type(1)\": {\n      fontWeight: \"bold\",\n      marginBottom: px(8)\n    },\n    \"&:nth-of-type(2)\": {\n      alignItems: \"center\",\n      display: \"flex\",\n      span: {\n        display: \"inline-block\",\n        marginLeft: px(4)\n      }\n    }\n  }\n});\nfunction getDeviceIcon(type) {\n  if (type.toLowerCase().includes(\"speaker\")) {\n    return /* @__PURE__ */jsx13(DevicesSpeakerIcon, {});\n  }\n  if (type.toLowerCase().includes(\"computer\")) {\n    return /* @__PURE__ */jsx13(DevicesComputerIcon, {});\n  }\n  return /* @__PURE__ */jsx13(DevicesMobileIcon, {});\n}\nfunction Devices(props) {\n  const {\n    currentDeviceId,\n    deviceId,\n    devices = [],\n    layout,\n    locale,\n    onClickDevice,\n    open,\n    playerPosition,\n    styles: {\n      color\n    }\n  } = props;\n  const [isOpen, setOpen] = useState(open);\n  const handleClickSetDevice = event => {\n    const {\n      dataset\n    } = event.currentTarget;\n    if (dataset.id) {\n      onClickDevice(dataset.id);\n      setOpen(false);\n    }\n  };\n  const handleClickToggleList = useCallback(() => {\n    setOpen(s => !s);\n  }, []);\n  const {\n    currentDevice,\n    otherDevices\n  } = devices.reduce((acc, device) => {\n    if (device.id === currentDeviceId) {\n      acc.currentDevice = device;\n    } else {\n      acc.otherDevices.push(device);\n    }\n    return acc;\n  }, {\n    currentDevice: null,\n    otherDevices: []\n  });\n  let icon = /* @__PURE__ */jsx13(DevicesIcon, {});\n  if (deviceId && currentDevice && currentDevice.id !== deviceId) {\n    icon = getDeviceIcon(currentDevice.type);\n  }\n  return /* @__PURE__ */jsx13(ClickOutside_default, {\n    isActive: isOpen,\n    onClick: handleClickToggleList,\n    children: /* @__PURE__ */jsx13(Wrapper4, {\n      \"data-component-name\": \"Devices\",\n      \"data-device-id\": currentDeviceId,\n      style: {\n        c: color,\n        layout,\n        p: playerPosition\n      },\n      children: !!devices.length && /* @__PURE__ */jsxs3(Fragment, {\n        children: [isOpen && /* @__PURE__ */jsxs3(\"div\", {\n          children: [currentDevice && /* @__PURE__ */jsxs3(ListHeader, {\n            children: [/* @__PURE__ */jsx13(\"p\", {\n              children: locale.currentDevice\n            }), /* @__PURE__ */jsxs3(\"p\", {\n              children: [getDeviceIcon(currentDevice.type), /* @__PURE__ */jsx13(\"span\", {\n                children: currentDevice.name\n              })]\n            })]\n          }), !!otherDevices.length && /* @__PURE__ */jsxs3(Fragment, {\n            children: [/* @__PURE__ */jsx13(\"p\", {\n              children: locale.otherDevices\n            }), otherDevices.map(device => /* @__PURE__ */jsxs3(\"button\", {\n              \"aria-label\": device.name,\n              className: \"ButtonRSWP\",\n              \"data-id\": device.id,\n              onClick: handleClickSetDevice,\n              type: \"button\",\n              children: [getDeviceIcon(device.type), /* @__PURE__ */jsx13(\"span\", {\n                children: device.name\n              })]\n            }, device.id))]\n          }), /* @__PURE__ */jsx13(\"span\", {})]\n        }), /* @__PURE__ */jsx13(\"button\", {\n          \"aria-label\": locale.devices,\n          className: \"ButtonRSWP\",\n          onClick: handleClickToggleList,\n          title: locale.devices,\n          type: \"button\",\n          children: icon\n        })]\n      })\n    })\n  });\n}\n\n// src/components/ErrorMessage.tsx\nimport { jsx as jsx14 } from \"react/jsx-runtime\";\nvar Wrapper5 = styled(\"div\")({\n  alignItems: \"center\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  textAlign: \"center\",\n  width: \"100%\"\n}, ({\n  style\n}) => ({\n  backgroundColor: style.bgColor,\n  borderTop: `1px solid ${style.errorColor}`,\n  color: style.errorColor,\n  height: px(style.h)\n}), \"ErrorRSWP\");\nfunction ErrorMessage({\n  children,\n  styles: {\n    bgColor,\n    errorColor,\n    height\n  }\n}) {\n  return /* @__PURE__ */jsx14(Wrapper5, {\n    \"data-component-name\": \"ErrorMessage\",\n    style: {\n      bgColor,\n      errorColor,\n      h: height\n    },\n    children\n  });\n}\n\n// src/components/Info.tsx\nimport { memo as memo5, useEffect as useEffect3, useRef as useRef3, useState as useState3 } from \"react\";\nimport { opacify } from \"colorizr\";\n\n// src/modules/hooks.ts\nimport { useEffect as useEffect2, useRef as useRef2, useState as useState2 } from \"react\";\nfunction useMediaQuery(input) {\n  const getMatches = query => {\n    return window.matchMedia(query).matches;\n  };\n  const [matches, setMatches] = useState2(getMatches(input));\n  function handleChange() {\n    setMatches(getMatches(input));\n  }\n  useEffect2(() => {\n    const matchMedia = window.matchMedia(input);\n    handleChange();\n    try {\n      matchMedia.addEventListener(\"change\", handleChange);\n    } catch {\n      matchMedia.addListener(handleChange);\n    }\n    return () => {\n      try {\n        matchMedia.removeEventListener(\"change\", handleChange);\n      } catch {\n        matchMedia.removeListener(handleChange);\n      }\n    };\n  }, [input]);\n  return matches;\n}\nfunction usePrevious(value) {\n  const ref = useRef2();\n  useEffect2(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\n// src/components/icons/Favorite.tsx\nimport { jsx as jsx15 } from \"react/jsx-runtime\";\nfunction Favorite(props) {\n  return /* @__PURE__ */jsx15(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx15(\"path\", {\n      d: \"M63.673 16.52A17.676 17.676 0 0 0 49.197 2.563c-5.4-.861-10.891.852-14.844 4.63a3.43 3.43 0 0 1-4.672 0C22.956.689 12.305.62 5.498 7.039c-6.808 6.419-7.366 17.055-1.268 24.15l24.246 28.894a4.623 4.623 0 0 0 7.078 0L59.8 31.19a17.328 17.328 0 0 0 3.873-14.66v-.008Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/icons/FavoriteOutline.tsx\nimport { jsx as jsx16 } from \"react/jsx-runtime\";\nfunction FavoriteOutline(props) {\n  return /* @__PURE__ */jsx16(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx16(\"path\", {\n      d: \"M5.944 7.206C13.271.3 24.723.34 31.999 7.3A18.924 18.924 0 0 1 48.02 2.32h.008a19.068 19.068 0 0 1 15.617 15.071v.013A18.759 18.759 0 0 1 59.47 33.26L37.573 59.353a7.288 7.288 0 0 1-8.642 1.916 7.276 7.276 0 0 1-2.498-1.912l-21.901-26.1c-6.55-7.671-5.93-19.131 1.408-26.051h.004Zm13.04 1.04a12.726 12.726 0 0 0-9.737 20.997l.021.02 21.905 26.105c.316.372.84.488 1.284.285.143-.066.27-.164.372-.285l21.934-26.137a12.565 12.565 0 0 0 2.808-10.625 12.875 12.875 0 0 0-10.534-10.17 12.714 12.714 0 0 0-10.785 3.37l-.029.029a6.198 6.198 0 0 1-8.444 0l-.037-.033a12.727 12.727 0 0 0-8.758-3.556Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/SpotifyLogo.tsx\nimport { textColor } from \"colorizr\";\nimport { jsx as jsx17 } from \"react/jsx-runtime\";\nfunction SpotifyLogo({\n  bgColor,\n  ...rest\n}) {\n  return /* @__PURE__ */jsx17(\"svg\", {\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 512 160\",\n    width: \"3.2em\",\n    ...rest,\n    children: /* @__PURE__ */jsx17(\"path\", {\n      d: \"M79.655 0C35.664 0 0 35.663 0 79.654c0 43.993 35.664 79.653 79.655 79.653 43.996 0 79.656-35.66 79.656-79.653 0-43.988-35.66-79.65-79.657-79.65L79.655 0Zm36.53 114.884a4.963 4.963 0 0 1-6.83 1.646c-18.702-11.424-42.246-14.011-69.973-7.676a4.967 4.967 0 0 1-5.944-3.738 4.958 4.958 0 0 1 3.734-5.945c30.343-6.933 56.37-3.948 77.367 8.884a4.965 4.965 0 0 1 1.645 6.83Zm9.75-21.689c-1.799 2.922-5.622 3.845-8.543 2.047-21.41-13.16-54.049-16.972-79.374-9.284a6.219 6.219 0 0 1-7.75-4.138 6.22 6.22 0 0 1 4.141-7.745c28.929-8.778 64.892-4.526 89.48 10.583 2.92 1.798 3.843 5.622 2.045 8.538Zm.836-22.585C101.1 55.362 58.742 53.96 34.231 61.4c-3.936 1.194-8.098-1.028-9.29-4.964a7.453 7.453 0 0 1 4.965-9.294c28.137-8.542 74.912-6.892 104.469 10.655a7.441 7.441 0 0 1 2.606 10.209c-2.092 3.54-6.677 4.707-10.206 2.605h-.004Zm89.944 2.922c-13.754-3.28-16.198-5.581-16.198-10.418 0-4.57 4.299-7.645 10.7-7.645 6.202 0 12.347 2.336 18.796 7.143.19.145.437.203.675.165a.888.888 0 0 0 .6-.367l6.715-9.466a.903.903 0 0 0-.171-1.225c-7.676-6.157-16.313-9.15-26.415-9.15-14.848 0-25.225 8.911-25.225 21.662 0 13.673 8.95 18.515 24.417 22.252 13.155 3.031 15.38 5.57 15.38 10.11 0 5.032-4.49 8.161-11.718 8.161-8.028 0-14.582-2.71-21.906-9.046a.932.932 0 0 0-.656-.218.89.89 0 0 0-.619.313l-7.533 8.96a.906.906 0 0 0 .086 1.256c8.522 7.61 19.004 11.624 30.323 11.624 16 0 26.339-8.742 26.339-22.277.028-11.421-6.81-17.746-23.561-21.821l-.029-.013Zm59.792-13.564c-6.934 0-12.622 2.732-17.321 8.33v-6.3c0-.498-.4-.903-.894-.903h-12.318a.899.899 0 0 0-.894.902v70.009c0 .494.4.903.894.903h12.318a.901.901 0 0 0 .894-.903v-22.097c4.699 5.26 10.387 7.838 17.32 7.838 12.89 0 25.94-9.92 25.94-28.886.019-18.97-13.032-28.894-25.93-28.894l-.01.001Zm11.614 28.893c0 9.653-5.945 16.397-14.468 16.397-8.418 0-14.772-7.048-14.772-16.397 0-9.35 6.354-16.397 14.772-16.397 8.38 0 14.468 6.893 14.468 16.396Zm47.759-28.893c-16.598 0-29.601 12.78-29.601 29.1 0 16.143 12.917 28.784 29.401 28.784 16.655 0 29.696-12.736 29.696-28.991 0-16.2-12.955-28.89-29.496-28.89v-.003Zm0 45.385c-8.827 0-15.485-7.096-15.485-16.497 0-9.444 6.43-16.298 15.285-16.298 8.884 0 15.58 7.093 15.58 16.504 0 9.443-6.468 16.291-15.38 16.291Zm64.937-44.258h-13.554V47.24c0-.497-.4-.902-.894-.902H374.05a.906.906 0 0 0-.904.902v13.855h-5.916a.899.899 0 0 0-.894.902v10.584a.9.9 0 0 0 .894.903h5.916v27.39c0 11.062 5.508 16.674 16.38 16.674 4.413 0 8.075-.914 11.528-2.873a.88.88 0 0 0 .457-.78v-10.083a.896.896 0 0 0-.428-.76.873.873 0 0 0-.876-.039c-2.368 1.19-4.66 1.741-7.229 1.741-3.947 0-5.716-1.798-5.716-5.812V73.49h13.554a.899.899 0 0 0 .894-.903V62.003a.873.873 0 0 0-.884-.903l-.01-.005Zm47.217.054v-1.702c0-5.006 1.921-7.238 6.22-7.238 2.57 0 4.633.51 6.945 1.28a.895.895 0 0 0 1.18-.858l-.001-10.377a.891.891 0 0 0-.637-.865c-2.435-.726-5.555-1.47-10.235-1.47-11.367 0-17.388 6.405-17.388 18.516v2.606h-5.916a.906.906 0 0 0-.904.902v10.638c0 .497.41.903.904.903h5.916v42.237c0 .504.41.904.904.904h12.308c.504 0 .904-.4.904-.904V73.487h11.5l17.616 42.234c-1.998 4.433-3.967 5.317-6.65 5.317-2.168 0-4.46-.646-6.79-1.93a.98.98 0 0 0-.714-.067.896.896 0 0 0-.533.485l-4.175 9.16a.9.9 0 0 0 .39 1.17c4.356 2.359 8.284 3.367 13.145 3.367 9.093 0 14.125-4.242 18.548-15.637l21.364-55.204a.88.88 0 0 0-.095-.838.878.878 0 0 0-.733-.392h-12.822a.901.901 0 0 0-.856.605l-13.136 37.509-14.382-37.534a.898.898 0 0 0-.837-.58h-21.04v-.003Zm-27.375-.054h-12.318a.907.907 0 0 0-.903.902v53.724c0 .504.409.904.903.904h12.318c.495 0 .904-.4.904-.904v-53.72a.9.9 0 0 0-.904-.903v-.003Zm-6.088-24.464c-4.88 0-8.836 3.95-8.836 8.828a8.835 8.835 0 0 0 8.836 8.836c4.88 0 8.827-3.954 8.827-8.836a8.83 8.83 0 0 0-8.827-8.828Z\",\n      fill: textColor(bgColor)\n    })\n  });\n}\n\n// src/components/Info.tsx\nimport { jsx as jsx18, jsxs as jsxs4 } from \"react/jsx-runtime\";\nvar imageSize = 64;\nvar iconSize = 32;\nvar Wrapper6 = styled(\"div\")({\n  textAlign: \"left\",\n  \"> a\": {\n    display: \"inline-flex\",\n    textDecoration: \"none\",\n    minHeight: px(64),\n    minWidth: px(64),\n    \"&:hover\": {\n      textDecoration: \"underline\"\n    }\n  },\n  button: {\n    alignItems: \"center\",\n    display: \"flex\",\n    fontSize: px(16),\n    height: px(iconSize + 8),\n    justifyContent: \"center\",\n    width: px(iconSize)\n  }\n}, ({\n  style\n}) => {\n  const isCompactLayout = style.layout === \"compact\";\n  const styles = {};\n  if (isCompactLayout) {\n    styles.borderBottom = `1px solid ${opacify(style.c, 0.6)}`;\n    styles[\"> a\"] = {\n      display: \"flex\",\n      margin: \"0 auto\",\n      maxWidth: px(640),\n      paddingBottom: \"100%\",\n      position: \"relative\",\n      img: {\n        display: \"block\",\n        bottom: 0,\n        left: 0,\n        maxWidth: \"100%\",\n        position: \"absolute\",\n        right: 0,\n        top: 0\n      }\n    };\n  } else {\n    styles.alignItems = \"center\";\n    styles.display = \"flex\";\n    styles.minHeight = px(80);\n    styles[\"@media (max-width: 767px)\"] = {\n      borderBottom: `1px solid ${opacify(style.c, 0.6)}`,\n      paddingLeft: px(8),\n      display: \"none\",\n      width: \"100%\"\n    };\n    styles.img = {\n      height: px(imageSize),\n      width: px(imageSize)\n    };\n    styles[\"&.rswp__active\"] = {\n      \"@media (max-width: 767px)\": {\n        display: \"flex\"\n      }\n    };\n  }\n  return {\n    button: {\n      color: style.c,\n      \"&.rswp__active\": {\n        color: style.activeColor\n      }\n    },\n    ...styles\n  };\n}, \"InfoRSWP\");\nvar ContentWrapper = styled(\"div\")({\n  display: \"flex\",\n  flexDirection: \"column\",\n  justifyContent: \"center\",\n  \"> a\": {\n    fontSize: px(22),\n    marginTop: px(4)\n  }\n}, ({\n  style\n}) => {\n  const isCompactLayout = style.layout === \"compact\";\n  const styles = {};\n  if (isCompactLayout) {\n    styles.padding = px(8);\n    styles.width = \"100%\";\n  } else {\n    styles.minHeight = px(imageSize);\n    if (!style.hideCoverArt) {\n      styles.marginLeft = px(8);\n      styles.width = `calc(100% - ${px(imageSize + 8)})`;\n    } else {\n      styles.width = \"100%\";\n    }\n  }\n  return styles;\n}, \"ContentWrapperRSWP\");\nvar Content = styled(\"div\")({\n  display: \"flex\",\n  justifyContent: \"start\",\n  '[data-type=\"title-artist-wrapper\"]': {\n    overflow: \"hidden\",\n    div: {\n      marginLeft: `-${px(8)}`,\n      whiteSpace: \"nowrap\"\n    }\n  },\n  p: {\n    fontSize: px(14),\n    lineHeight: 1.3,\n    paddingLeft: px(8),\n    paddingRight: px(8),\n    width: \"100%\",\n    \"&:nth-of-type(1)\": {\n      alignItems: \"center\",\n      display: \"inline-flex\"\n    },\n    \"&:nth-of-type(2)\": {\n      fontSize: px(12)\n    }\n  },\n  span: {\n    display: \"inline-block\"\n  }\n}, ({\n  style\n}) => {\n  const maskImageColor = getBgColor(style.bgColor, style.trackNameColor);\n  return {\n    '[data-type=\"title-artist-wrapper\"]': {\n      color: style.trackNameColor,\n      maxWidth: `calc(100% - ${px(style.showSaveIcon ? iconSize : 0)})`,\n      div: {\n        \"-webkit-mask-image\": `linear-gradient(90deg,transparent 0, ${maskImageColor} 6px, ${maskImageColor} calc(100% - 12px),transparent)`\n      }\n    },\n    p: {\n      \"&:nth-of-type(1)\": {\n        color: style.trackNameColor,\n        a: {\n          color: style.trackNameColor\n        }\n      },\n      \"&:nth-of-type(2)\": {\n        color: style.trackArtistColor,\n        a: {\n          color: style.trackArtistColor\n        }\n      }\n    }\n  };\n}, \"ContentRSWP\");\nfunction Info(props) {\n  const {\n    hideAttribution,\n    hideCoverArt,\n    isActive,\n    layout,\n    locale,\n    onFavoriteStatusChange,\n    showSaveIcon,\n    styles: {\n      activeColor,\n      bgColor,\n      color,\n      height,\n      trackArtistColor,\n      trackNameColor\n    },\n    token,\n    track: {\n      artists = [],\n      id,\n      image,\n      name,\n      uri\n    },\n    updateSavedStatus\n  } = props;\n  const [isSaved, setIsSaved] = useState3(false);\n  const isMounted = useRef3(false);\n  const previousId = usePrevious(id);\n  const isCompactLayout = layout === \"compact\";\n  const updateState = state => {\n    if (!isMounted.current) {\n      return;\n    }\n    setIsSaved(state);\n  };\n  const setStatus = async () => {\n    if (!isMounted.current) {\n      return;\n    }\n    if (updateSavedStatus && id) {\n      updateSavedStatus(newStatus => {\n        updateState(newStatus);\n      });\n    }\n    const status = await checkTracksStatus(token, id);\n    const [isFavorite] = status || [false];\n    updateState(isFavorite);\n    onFavoriteStatusChange(isSaved);\n  };\n  useEffect3(() => {\n    isMounted.current = true;\n    if (showSaveIcon && id) {\n      setStatus();\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  useEffect3(() => {\n    if (showSaveIcon && previousId !== id && id) {\n      updateState(false);\n      setStatus();\n    }\n  });\n  const handleClickIcon = async () => {\n    if (isSaved) {\n      await removeTracks(token, id);\n      updateState(false);\n    } else {\n      await saveTracks(token, id);\n      updateState(true);\n    }\n    onFavoriteStatusChange(!isSaved);\n  };\n  const title = getSpotifyLinkTitle(name, locale.title);\n  let favorite;\n  if (showSaveIcon && id) {\n    favorite = /* @__PURE__ */jsx18(\"button\", {\n      \"aria-label\": isSaved ? locale.removeTrack : locale.saveTrack,\n      className: `ButtonRSWP${isSaved ? \" rswp__active\" : \"\"}`,\n      onClick: handleClickIcon,\n      title: isSaved ? locale.removeTrack : locale.saveTrack,\n      type: \"button\",\n      children: isSaved ? /* @__PURE__ */jsx18(Favorite, {}) : /* @__PURE__ */jsx18(FavoriteOutline, {})\n    });\n  }\n  const content = {};\n  const classes = [];\n  if (isActive) {\n    classes.push(\"rswp__active\");\n  }\n  if (isCompactLayout) {\n    content.image = /* @__PURE__ */jsx18(\"img\", {\n      alt: name,\n      src: image\n    });\n  }\n  if (!id) {\n    return /* @__PURE__ */jsx18(\"div\", {});\n  }\n  return /* @__PURE__ */jsxs4(Wrapper6, {\n    className: classes.join(\" \"),\n    \"data-component-name\": \"Info\",\n    style: {\n      activeColor,\n      c: color,\n      h: height,\n      layout,\n      showSaveIcon\n    },\n    children: [!hideCoverArt && /* @__PURE__ */jsx18(\"a\", {\n      \"aria-label\": title,\n      href: getSpotifyLink(uri),\n      rel: \"noreferrer\",\n      target: \"_blank\",\n      title,\n      children: /* @__PURE__ */jsx18(\"img\", {\n        alt: name,\n        src: image\n      })\n    }), /* @__PURE__ */jsxs4(ContentWrapper, {\n      style: {\n        hideCoverArt,\n        layout,\n        showSaveIcon\n      },\n      children: [!!name && /* @__PURE__ */jsxs4(Content, {\n        style: {\n          bgColor,\n          layout,\n          showSaveIcon,\n          trackArtistColor,\n          trackNameColor\n        },\n        children: [/* @__PURE__ */jsx18(\"div\", {\n          \"data-type\": \"title-artist-wrapper\",\n          children: /* @__PURE__ */jsxs4(\"div\", {\n            children: [/* @__PURE__ */jsx18(\"p\", {\n              children: /* @__PURE__ */jsx18(\"span\", {\n                children: /* @__PURE__ */jsx18(\"a\", {\n                  \"aria-label\": title,\n                  href: getSpotifyLink(uri),\n                  rel: \"noreferrer\",\n                  target: \"_blank\",\n                  title,\n                  children: name\n                })\n              })\n            }), /* @__PURE__ */jsx18(\"p\", {\n              title: artists.map(d => d.name).join(\", \"),\n              children: artists.map((artist, index) => {\n                const artistTitle = getSpotifyLinkTitle(artist.name, locale.title);\n                return /* @__PURE__ */jsxs4(\"span\", {\n                  children: [index ? \", \" : \"\", /* @__PURE__ */jsx18(\"a\", {\n                    \"aria-label\": artistTitle,\n                    href: getSpotifyLink(artist.uri),\n                    rel: \"noreferrer\",\n                    target: \"_blank\",\n                    title: artistTitle,\n                    children: artist.name\n                  })]\n                }, artist.uri);\n              })\n            })]\n          })\n        }), favorite]\n      }), !hideAttribution && /* @__PURE__ */jsx18(\"a\", {\n        \"aria-label\": \"Play on Spotify\",\n        href: getSpotifyLink(uri),\n        rel: \"noreferrer\",\n        target: \"_blank\",\n        children: /* @__PURE__ */jsx18(SpotifyLogo, {\n          bgColor\n        })\n      })]\n    })]\n  });\n}\nvar Info_default = memo5(Info);\n\n// src/components/Loader.tsx\nimport { jsx as jsx19 } from \"react/jsx-runtime\";\nvar Wrapper7 = styled(\"div\")({\n  alignItems: \"center\",\n  display: \"flex\",\n  jsutifyContent: \"center\",\n  position: \"relative\",\n  \"> div\": {\n    borderRadius: \"50%\",\n    borderStyle: \"solid\",\n    borderWidth: 0,\n    boxSizing: \"border-box\",\n    height: 0,\n    left: \"50%\",\n    position: \"absolute\",\n    top: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    width: 0\n  }\n}, ({\n  style\n}) => {\n  const pulse = keyframes({\n    \"0%\": {\n      height: 0,\n      width: 0\n    },\n    \"30%\": {\n      borderWidth: px(8),\n      height: px(style.loaderSize),\n      opacity: 1,\n      width: px(style.loaderSize)\n    },\n    \"100%\": {\n      borderWidth: 0,\n      height: px(style.loaderSize),\n      opacity: 0,\n      width: px(style.loaderSize)\n    }\n  });\n  return {\n    height: px(style.h),\n    \"> div\": {\n      animation: `${pulse} 1.15s infinite cubic-bezier(0.215, 0.61, 0.355, 1)`,\n      borderColor: style.loaderColor,\n      height: px(style.loaderSize),\n      width: px(style.loaderSize)\n    }\n  };\n}, \"LoaderRSWP\");\nfunction Loader({\n  styles: {\n    height,\n    loaderColor,\n    loaderSize\n  }\n}) {\n  return /* @__PURE__ */jsx19(Wrapper7, {\n    \"data-component-name\": \"Loader\",\n    style: {\n      h: height,\n      loaderColor,\n      loaderSize\n    },\n    children: /* @__PURE__ */jsx19(\"div\", {})\n  });\n}\n\n// src/components/Player.tsx\nimport { forwardRef } from \"react\";\nimport { jsx as jsx20 } from \"react/jsx-runtime\";\nvar Player = forwardRef((props, ref) => {\n  const {\n    children,\n    styles: {\n      bgColor,\n      height\n    },\n    ...rest\n  } = props;\n  return /* @__PURE__ */jsx20(\"div\", {\n    ref,\n    className: \"PlayerRSWP\",\n    \"data-component-name\": \"Player\",\n    style: {\n      background: bgColor,\n      minHeight: px(height)\n    },\n    ...rest,\n    children\n  });\n});\nvar Player_default = Player;\n\n// src/components/Volume.tsx\nimport { useCallback as useCallback2, useEffect as useEffect4, useRef as useRef4, useState as useState4 } from \"react\";\nimport RangeSlider2 from \"@gilbarbara/react-range-slider\";\n\n// src/components/icons/VolumeHigh.tsx\nimport { jsx as jsx21 } from \"react/jsx-runtime\";\nfunction VolumeHigh(props) {\n  return /* @__PURE__ */jsx21(\"svg\", {\n    \"data-component-name\": \"VolumeHigh\",\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx21(\"path\", {\n      d: \"M37.963 3.402a2.989 2.989 0 0 1 1.5 2.596v52a3 3 0 0 1-4.5 2.6l-27.7-16C.32 40.572-2.06 31.688 1.943 24.73a14.556 14.556 0 0 1 5.32-5.328l27.7-16a3 3 0 0 1 3 0ZM45 9.542a23.008 23.008 0 0 1 0 44.912V48.25a17.008 17.008 0 0 0 0-32.508Zm-11.532 1.656-23.2 13.4a8.556 8.556 0 0 0 0 14.8l23.2 13.4v-41.6ZM45 22.238a11 11 0 0 1 0 19.52v-19.52Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/icons/VolumeLow.tsx\nimport { jsx as jsx22 } from \"react/jsx-runtime\";\nfunction VolumeLow(props) {\n  return /* @__PURE__ */jsx22(\"svg\", {\n    \"data-component-name\": \"VolumeLow\",\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx22(\"path\", {\n      d: \"M37.963 3.398a3 3 0 0 1 1.5 2.6v52a3 3 0 0 1-4.5 2.6l-27.7-16C.32 40.572-2.06 31.688 1.943 24.73a14.556 14.556 0 0 1 5.32-5.328l27.7-16a3 3 0 0 1 3 0v-.004Zm-27.696 21.2a8.556 8.556 0 0 0 0 14.8l23.2 13.4v-41.6l-23.2 13.4ZM45 41.758v-19.52a11 11 0 0 1 0 19.52Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/icons/VolumeMid.tsx\nimport { jsx as jsx23 } from \"react/jsx-runtime\";\nfunction VolumeHigh2(props) {\n  return /* @__PURE__ */jsx23(\"svg\", {\n    \"data-component-name\": \"VolumeMid\",\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx23(\"path\", {\n      d: \"M37.963 3.398a3 3 0 0 1 1.5 2.6v52a3 3 0 0 1-4.5 2.6l-27.7-16C.32 40.572-2.06 31.688 1.943 24.73a14.556 14.556 0 0 1 5.32-5.328l27.7-16a3 3 0 0 1 3 0v-.004Zm-27.696 21.2a8.556 8.556 0 0 0 0 14.8l23.2 13.4v-41.6l-23.2 13.4ZM45 48.946a18.008 18.008 0 0 0 0-33.896v6.6a11.996 11.996 0 0 1 0 20.7v6.596Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/icons/VolumeMute.tsx\nimport { jsx as jsx24 } from \"react/jsx-runtime\";\nfunction VolumeMute(props) {\n  return /* @__PURE__ */jsx24(\"svg\", {\n    \"data-component-name\": \"VolumeMute\",\n    height: \"1em\",\n    preserveAspectRatio: \"xMidYMid\",\n    viewBox: \"0 0 64 64\",\n    width: \"1em\",\n    ...props,\n    children: /* @__PURE__ */jsx24(\"path\", {\n      d: \"M34.963 3.402a3 3 0 0 1 4.5 2.6v7.624a19.03 19.03 0 0 0-6 2.776v-5.2l-23.2 13.4a8.57 8.57 0 0 0-3.12 3.128 8.564 8.564 0 0 0 3.124 11.68l23.196 13.392v-5.2a18.92 18.92 0 0 0 6 2.776v7.624a3 3 0 0 1-4.5 2.596l-27.7-16a14.556 14.556 0 0 1-5.32-5.328C-2.06 32.313.32 23.428 7.263 19.402l27.7-16Zm17.354 17.6a3 3 0 0 1 2.122 5.12l-5.88 5.88 5.876 5.88a3 3 0 0 1-4.24 4.24l-5.88-5.88-5.88 5.88a3 3 0 1 1-4.385-4.095l6.025-6.025-5.876-5.88a3 3 0 0 1 4.236-4.24l5.88 5.88 5.88-5.88a3 3 0 0 1 2.122-.88Z\",\n      fill: \"currentColor\"\n    })\n  });\n}\n\n// src/components/Volume.tsx\nimport { jsx as jsx25, jsxs as jsxs5 } from \"react/jsx-runtime\";\nvar WrapperWithToggle = styled(\"div\")({\n  display: \"none\",\n  \"pointer-events\": \"all\",\n  position: \"relative\",\n  zIndex: 20,\n  \"> div\": {\n    alignItems: \"center\",\n    backgroundColor: \"#000\",\n    borderRadius: px(4),\n    color: \"#fff\",\n    display: \"flex\",\n    filter: \"drop-shadow(1px 1px 6px rgba(0, 0, 0, 0.5))\",\n    flexDirection: \"column\",\n    left: \"-4px\",\n    padding: px(16),\n    position: \"absolute\",\n    \"> span\": {\n      background: \"transparent\",\n      borderLeft: `6px solid transparent`,\n      borderRight: `6px solid transparent`,\n      content: '\"\"',\n      display: \"block\",\n      height: 0,\n      position: \"absolute\",\n      width: 0\n    }\n  },\n  \"> button\": {\n    alignItems: \"center\",\n    display: \"flex\",\n    fontSize: px(24),\n    height: px(32),\n    justifyContent: \"center\",\n    width: px(32)\n  },\n  \"@media (any-pointer: fine)\": {\n    display: \"block\"\n  }\n}, ({\n  style\n}) => {\n  const isCompact = style.layout === \"compact\";\n  const spanStyles = isCompact ? {\n    bottom: `-${px(6)}`,\n    borderTop: `6px solid #000`\n  } : {\n    [style.p === \"top\" ? \"border-bottom\" : \"border-top\"]: `6px solid #000`,\n    [style.p]: \"-6px\"\n  };\n  return {\n    \"> button\": {\n      color: style.c\n    },\n    \"> div\": {\n      [isCompact ? \"bottom\" : style.p]: \"130%\",\n      \"> span\": spanStyles\n    }\n  };\n}, \"VolumeRSWP\");\nvar WrapperInline = styled(\"div\")({\n  display: \"none\",\n  padding: `0 ${px(8)}`,\n  \"pointer-events\": \"all\",\n  \"> div\": {\n    display: \"flex\",\n    padding: `0 ${px(5)}`,\n    width: px(100)\n  },\n  \"> span\": {\n    display: \"flex\",\n    fontSize: px(24)\n  },\n  \"@media (any-pointer: fine)\": {\n    alignItems: \"center\",\n    display: \"flex\"\n  }\n}, ({\n  style\n}) => ({\n  color: style.c\n}), \"VolumeInlineRSWP\");\nfunction Volume(props) {\n  const {\n    inlineVolume,\n    layout,\n    locale,\n    playerPosition,\n    setVolume: setVolume2,\n    styles,\n    volume\n  } = props;\n  const [isOpen, setIsOpen] = useState4(false);\n  const [volumeState, setVolumeState] = useState4(volume);\n  const timeoutRef = useRef4();\n  const previousVolume = usePrevious(volume);\n  const isMediumScreen = useMediaQuery(\"(min-width: 768px)\");\n  const isInline = layout === \"responsive\" && inlineVolume && isMediumScreen;\n  useEffect4(() => {\n    if (previousVolume !== volume && volume !== volumeState) {\n      setVolumeState(volume);\n    }\n  }, [previousVolume, volume, volumeState]);\n  const handleClickToggleList = useCallback2(() => {\n    setIsOpen(s => !s);\n  }, []);\n  const handleChangeSlider = ({\n    x,\n    y\n  }) => {\n    const value = isInline ? x : y;\n    const currentvolume = Math.round(value) / 100;\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = window.setTimeout(() => {\n      setVolume2(currentvolume);\n    }, 250);\n    setVolumeState(currentvolume);\n  };\n  const handleAfterEnd = () => {\n    setTimeout(() => {\n      setIsOpen(false);\n    }, 100);\n  };\n  let icon = /* @__PURE__ */jsx25(VolumeHigh, {});\n  if (volume === 0) {\n    icon = /* @__PURE__ */jsx25(VolumeMute, {});\n  } else if (volume <= 0.4) {\n    icon = /* @__PURE__ */jsx25(VolumeLow, {});\n  } else if (volume <= 0.7) {\n    icon = /* @__PURE__ */jsx25(VolumeHigh2, {});\n  }\n  if (isInline) {\n    return /* @__PURE__ */jsxs5(WrapperInline, {\n      \"data-component-name\": \"Volume\",\n      \"data-value\": volume,\n      style: {\n        c: styles.color\n      },\n      children: [/* @__PURE__ */jsx25(\"span\", {\n        children: icon\n      }), /* @__PURE__ */jsx25(\"div\", {\n        children: /* @__PURE__ */jsx25(RangeSlider2, {\n          axis: \"x\",\n          className: \"volume\",\n          \"data-component-name\": \"volume-bar\",\n          onAfterEnd: handleAfterEnd,\n          onChange: handleChangeSlider,\n          styles: {\n            options: {\n              thumbBorder: 0,\n              thumbBorderRadius: styles.sliderHandleBorderRadius,\n              thumbColor: styles.sliderHandleColor,\n              height: 4,\n              padding: 0,\n              rangeColor: styles.sliderColor,\n              trackBorderRadius: styles.sliderTrackBorderRadius,\n              trackColor: styles.sliderTrackColor\n            }\n          },\n          x: volume * 100,\n          xMax: 100,\n          xMin: 0\n        })\n      })]\n    });\n  }\n  return /* @__PURE__ */jsx25(ClickOutside_default, {\n    isActive: isOpen,\n    onClick: handleClickToggleList,\n    children: /* @__PURE__ */jsxs5(WrapperWithToggle, {\n      \"data-component-name\": \"Volume\",\n      \"data-value\": volume,\n      style: {\n        c: styles.color,\n        layout,\n        p: playerPosition\n      },\n      children: [isOpen && /* @__PURE__ */jsxs5(\"div\", {\n        children: [/* @__PURE__ */jsx25(RangeSlider2, {\n          axis: \"y\",\n          className: \"volume\",\n          \"data-component-name\": \"volume-bar\",\n          onAfterEnd: handleAfterEnd,\n          onChange: handleChangeSlider,\n          styles: {\n            options: {\n              padding: 0,\n              rangeColor: \"#fff\",\n              thumbBorder: 0,\n              thumbBorderRadius: 12,\n              thumbColor: \"#fff\",\n              thumbSize: 12,\n              trackColor: \"rgba(255, 255, 255, 0.5)\",\n              width: 6\n            }\n          },\n          y: volume * 100,\n          yMax: 100,\n          yMin: 0\n        }), /* @__PURE__ */jsx25(\"span\", {})]\n      }), /* @__PURE__ */jsx25(\"button\", {\n        \"aria-label\": locale.volume,\n        className: \"ButtonRSWP\",\n        onClick: handleClickToggleList,\n        title: locale.volume,\n        type: \"button\",\n        children: icon\n      })]\n    })\n  });\n}\n\n// src/components/Wrapper.tsx\nimport { memo as memo6 } from \"react\";\nimport { jsx as jsx26 } from \"react/jsx-runtime\";\nvar StyledWrapper = styled(\"div\")({\n  alignItems: \"center\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexWrap: \"wrap\",\n  justifyContent: \"center\",\n  position: \"relative\",\n  \"> *\": {\n    width: \"100%\"\n  }\n}, ({\n  style\n}) => {\n  let styles = {};\n  if (style.layout === \"responsive\") {\n    styles = {\n      \"> *\": {\n        \"@media (min-width: 768px)\": {\n          width: \"33.3333%\"\n        }\n      },\n      \"@media (min-width: 768px)\": {\n        flexDirection: \"row\",\n        padding: `0 ${px(8)}`\n      }\n    };\n  }\n  return {\n    minHeight: px(style.h),\n    ...styles\n  };\n}, \"WrapperRSWP\");\nfunction Wrapper8(props) {\n  const {\n    children,\n    layout,\n    styles\n  } = props;\n  return /* @__PURE__ */jsx26(StyledWrapper, {\n    \"data-component-name\": \"Wrapper\",\n    style: {\n      h: styles.height,\n      layout\n    },\n    children\n  });\n}\nvar Wrapper_default = memo6(Wrapper8);\n\n// src/index.tsx\nimport { jsx as jsx27, jsxs as jsxs6 } from \"react/jsx-runtime\";\nput(\".PlayerRSWP\", {\n  boxSizing: \"border-box\",\n  fontSize: \"inherit\",\n  width: \"100%\",\n  \"*\": {\n    boxSizing: \"border-box\"\n  },\n  p: {\n    margin: 0\n  }\n});\nput(\".ButtonRSWP\", {\n  appearance: \"none\",\n  background: \"transparent\",\n  border: 0,\n  borderRadius: 0,\n  color: \"inherit\",\n  cursor: \"pointer\",\n  display: \"inline-flex\",\n  lineHeight: 1,\n  padding: 0,\n  \":focus\": {\n    outlineColor: \"#000\",\n    outlineOffset: 3\n  }\n});\nvar SpotifyWebPlayer = class extends PureComponent {\n  isMounted = false;\n  emptyTrack = {\n    artists: [],\n    durationMs: 0,\n    id: \"\",\n    image: \"\",\n    name: \"\",\n    uri: \"\"\n  };\n  locale;\n  player;\n  playerProgressInterval;\n  playerSyncInterval;\n  ref = createRef();\n  renderInlineActions = false;\n  resizeTimeout;\n  seekUpdateInterval = 100;\n  styles;\n  syncTimeout;\n  getPlayOptions = memoize(ids => {\n    const playOptions = {\n      context_uri: void 0,\n      uris: void 0\n    };\n    if (ids) {\n      if (!ids.every(d => validateURI(d))) {\n        return playOptions;\n      }\n      if (ids.some(d => getSpotifyURIType(d) === \"track\")) {\n        if (!ids.every(d => getSpotifyURIType(d) === \"track\")) {\n          console.warn(\"You can't mix tracks URIs with other types\");\n        }\n        playOptions.uris = ids.filter(d => validateURI(d) && getSpotifyURIType(d) === \"track\");\n      } else {\n        if (ids.length > 1) {\n          console.warn(\"Albums, Artists, Playlists and Podcasts can't have multiple URIs\");\n        }\n        playOptions.context_uri = ids[0];\n      }\n    }\n    return playOptions;\n  });\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDeviceId: \"\",\n      currentURI: \"\",\n      deviceId: \"\",\n      devices: [],\n      error: \"\",\n      errorType: null,\n      isActive: false,\n      isInitializing: false,\n      isMagnified: false,\n      isPlaying: false,\n      isSaved: false,\n      isUnsupported: false,\n      needsUpdate: false,\n      nextTracks: [],\n      playerPosition: \"bottom\",\n      position: 0,\n      previousTracks: [],\n      progressMs: 0,\n      repeat: \"off\",\n      shuffle: false,\n      status: STATUS.IDLE,\n      track: this.emptyTrack,\n      volume: parseVolume(props.initialVolume) || 1\n    };\n    this.locale = getLocale(props.locale);\n    this.styles = getMergedStyles(props.styles);\n  }\n  static defaultProps = {\n    autoPlay: false,\n    initialVolume: 1,\n    magnifySliderOnHover: false,\n    name: \"Spotify Web Player\",\n    persistDeviceSelection: false,\n    showSaveIcon: false,\n    syncExternalDeviceInterval: 5,\n    syncExternalDevice: false\n  };\n  async componentDidMount() {\n    this.isMounted = true;\n    const {\n      top = 0\n    } = this.ref.current?.getBoundingClientRect() ?? {};\n    this.updateState({\n      playerPosition: top > window.innerHeight / 2 ? \"bottom\" : \"top\",\n      status: STATUS.INITIALIZING\n    });\n    if (!window.onSpotifyWebPlaybackSDKReady) {\n      window.onSpotifyWebPlaybackSDKReady = this.initializePlayer;\n    } else {\n      this.initializePlayer();\n    }\n    await loadSpotifyPlayer();\n    window.addEventListener(\"resize\", this.handleResize);\n    this.handleResize();\n  }\n  async componentDidUpdate(previousProps, previousState) {\n    const {\n      currentDeviceId,\n      deviceId,\n      isInitializing,\n      isPlaying,\n      repeat: repeat2,\n      shuffle: shuffle2,\n      status,\n      track\n    } = this.state;\n    const {\n      autoPlay,\n      layout,\n      locale,\n      offset,\n      play: playProp,\n      showSaveIcon,\n      styles,\n      syncExternalDevice,\n      uris\n    } = this.props;\n    const isReady = previousState.status !== STATUS.READY && status === STATUS.READY;\n    const playOptions = this.getPlayOptions(parseIds(uris));\n    const canPlay = !!currentDeviceId && !!(playOptions.context_uri ?? playOptions.uris);\n    const shouldPlay = isReady && (autoPlay || playProp);\n    if (canPlay && shouldPlay) {\n      await this.togglePlay(true);\n      if (!isPlaying) {\n        this.updateState({\n          isPlaying: true\n        });\n      }\n      if (this.isExternalPlayer) {\n        this.syncTimeout = window.setTimeout(() => {\n          this.syncDevice();\n        }, 600);\n      }\n    } else if (!isEqual(previousProps.uris, uris)) {\n      if (isPlaying || playProp) {\n        await this.togglePlay(true);\n      } else {\n        this.updateState({\n          needsUpdate: true\n        });\n      }\n    } else if (previousProps.play !== playProp && playProp !== isPlaying) {\n      await this.togglePlay(!track.id);\n    }\n    if (previousState.status !== status) {\n      this.handleCallback({\n        ...this.state,\n        type: TYPE.STATUS\n      });\n    }\n    if (previousState.currentDeviceId !== currentDeviceId && currentDeviceId) {\n      if (!isReady) {\n        this.handleCallback({\n          ...this.state,\n          type: TYPE.DEVICE\n        });\n      }\n      await this.toggleSyncInterval(this.isExternalPlayer);\n      await this.updateSeekBar();\n    }\n    if (track.id && previousState.track.id !== track.id) {\n      this.handleCallback({\n        ...this.state,\n        type: TYPE.TRACK\n      });\n      if (showSaveIcon) {\n        this.updateState({\n          isSaved: false\n        });\n      }\n    }\n    if (previousState.isPlaying !== isPlaying) {\n      this.toggleProgressBar();\n      await this.toggleSyncInterval(this.isExternalPlayer);\n      this.handleCallback({\n        ...this.state,\n        type: TYPE.PLAYER\n      });\n    }\n    if (previousState.repeat !== repeat2 || previousState.shuffle !== shuffle2) {\n      this.handleCallback({\n        ...this.state,\n        type: TYPE.PLAYER\n      });\n    }\n    if (previousProps.offset !== offset) {\n      await this.toggleOffset();\n    }\n    if (previousState.isInitializing && !isInitializing) {\n      if (syncExternalDevice && !uris) {\n        const playerState = await getPlaybackState(this.token);\n        if (playerState?.is_playing && playerState.device.id !== deviceId) {\n          this.setExternalDevice(playerState.device.id ?? \"\");\n        }\n      }\n    }\n    if (previousProps.layout !== layout) {\n      this.handleResize();\n    }\n    if (!isEqual(previousProps.locale, locale)) {\n      this.locale = getLocale(locale);\n    }\n    if (!isEqual(previousProps.styles, styles)) {\n      this.styles = getMergedStyles(styles);\n    }\n  }\n  async componentWillUnmount() {\n    this.isMounted = false;\n    if (this.player) {\n      this.player.disconnect();\n    }\n    clearInterval(this.playerSyncInterval);\n    clearInterval(this.playerProgressInterval);\n    clearTimeout(this.syncTimeout);\n    window.removeEventListener(\"resize\", this.handleResize);\n  }\n  handleCallback(state) {\n    const {\n      callback\n    } = this.props;\n    if (callback) {\n      callback(state);\n    }\n  }\n  handleChangeRange = async position => {\n    const {\n      track\n    } = this.state;\n    const {\n      callback\n    } = this.props;\n    let progress = 0;\n    try {\n      const percentage = position / 100;\n      let stateChanges = {};\n      if (this.isExternalPlayer) {\n        progress = Math.round(track.durationMs * percentage);\n        await seek(this.token, progress);\n        stateChanges = {\n          position,\n          progressMs: progress\n        };\n      } else if (this.player) {\n        const state = await this.player.getCurrentState();\n        if (state) {\n          progress = Math.round(state.track_window.current_track.duration_ms * percentage);\n          await this.player.seek(progress);\n          stateChanges = {\n            position,\n            progressMs: progress\n          };\n        } else {\n          stateChanges = {\n            position: 0\n          };\n        }\n      }\n      this.updateState(stateChanges);\n      if (callback) {\n        callback({\n          ...this.state,\n          ...stateChanges,\n          type: TYPE.PROGRESS\n        });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  handleClickTogglePlay = async () => {\n    const {\n      isActive\n    } = this.state;\n    try {\n      await this.togglePlay(!this.isExternalPlayer && !isActive);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  handleClickPrevious = async () => {\n    try {\n      if (this.isExternalPlayer) {\n        await previous(this.token);\n        this.syncTimeout = window.setTimeout(() => {\n          this.syncDevice();\n        }, 300);\n      } else if (this.player) {\n        await this.player.previousTrack();\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  handleClickNext = async () => {\n    try {\n      if (this.isExternalPlayer) {\n        await next(this.token);\n        this.syncTimeout = window.setTimeout(() => {\n          this.syncDevice();\n        }, 300);\n      } else if (this.player) {\n        await this.player.nextTrack();\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  handleClickDevice = async deviceId => {\n    const {\n      isUnsupported\n    } = this.state;\n    const {\n      autoPlay,\n      persistDeviceSelection\n    } = this.props;\n    this.updateState({\n      currentDeviceId: deviceId\n    });\n    try {\n      await setDevice(this.token, deviceId);\n      if (persistDeviceSelection) {\n        sessionStorage.setItem(\"rswpDeviceId\", deviceId);\n      }\n      if (isUnsupported) {\n        await this.syncDevice();\n        const playerState = await getPlaybackState(this.token);\n        if (playerState && !playerState.is_playing && autoPlay) {\n          await this.togglePlay(true);\n        }\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  handleFavoriteStatusChange = status => {\n    const {\n      isSaved\n    } = this.state;\n    this.updateState({\n      isSaved: status\n    });\n    if (isSaved !== status) {\n      this.handleCallback({\n        ...this.state,\n        isSaved: status,\n        type: TYPE.FAVORITE\n      });\n    }\n  };\n  handlePlayerErrors = async (type, message) => {\n    const {\n      status\n    } = this.state;\n    const isPlaybackError = type === ERROR_TYPE.PLAYBACK;\n    const isInitializationError = type === ERROR_TYPE.INITIALIZATION;\n    let nextStatus = status;\n    let devices = [];\n    if (this.player && !isPlaybackError) {\n      this.player.disconnect();\n      this.player = void 0;\n    }\n    if (isInitializationError) {\n      nextStatus = STATUS.UNSUPPORTED;\n      ({\n        devices = []\n      } = await getDevices(this.token));\n    } else if (!isPlaybackError) {\n      nextStatus = STATUS.ERROR;\n    }\n    this.updateState({\n      devices,\n      error: message,\n      errorType: type,\n      isInitializing: false,\n      isUnsupported: isInitializationError,\n      status: nextStatus\n    });\n  };\n  handlePlayerStateChanges = async state => {\n    const {\n      currentURI\n    } = this.state;\n    try {\n      if (state) {\n        const {\n          paused,\n          position,\n          repeat_mode,\n          shuffle: shuffle2,\n          track_window: {\n            current_track,\n            next_tracks,\n            previous_tracks\n          }\n        } = state;\n        const isPlaying = !paused;\n        const volume = (await this.player?.getVolume()) ?? 100;\n        let trackState = {};\n        if ((!currentURI || currentURI !== current_track.uri) && current_track) {\n          trackState = {\n            currentURI: current_track.uri,\n            nextTracks: next_tracks.map(getTrackInfo),\n            position: 0,\n            previousTracks: previous_tracks.map(getTrackInfo),\n            track: getTrackInfo(current_track)\n          };\n        }\n        this.updateState({\n          error: \"\",\n          errorType: null,\n          isActive: true,\n          isPlaying,\n          progressMs: position,\n          repeat: getRepeatState(repeat_mode),\n          shuffle: shuffle2,\n          volume: round(volume),\n          ...trackState\n        });\n      } else if (this.isExternalPlayer) {\n        await this.syncDevice();\n      } else {\n        this.updateState({\n          isActive: false,\n          isPlaying: false,\n          nextTracks: [],\n          position: 0,\n          previousTracks: [],\n          track: {\n            artists: [],\n            durationMs: 0,\n            id: \"\",\n            image: \"\",\n            name: \"\",\n            uri: \"\"\n          }\n        });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  handlePlayerStatus = async ({\n    device_id\n  }) => {\n    const {\n      currentDeviceId,\n      devices\n    } = await this.initializeDevices(device_id);\n    this.updateState({\n      currentDeviceId,\n      deviceId: device_id,\n      devices,\n      isInitializing: false,\n      status: device_id ? STATUS.READY : STATUS.IDLE\n    });\n    if (device_id) {\n      await this.preload();\n    }\n  };\n  handleResize = () => {\n    const {\n      layout = \"responsive\"\n    } = this.props;\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = window.setTimeout(() => {\n      this.renderInlineActions = window.innerWidth >= 768 && layout === \"responsive\";\n      this.forceUpdate();\n    }, 100);\n  };\n  handleToggleMagnify = () => {\n    const {\n      magnifySliderOnHover\n    } = this.props;\n    if (magnifySliderOnHover) {\n      this.updateState(previousState => {\n        return {\n          isMagnified: !previousState.isMagnified\n        };\n      });\n    }\n  };\n  get token() {\n    const {\n      token\n    } = this.props;\n    return token;\n  }\n  async initializeDevices(id) {\n    const {\n      persistDeviceSelection\n    } = this.props;\n    const {\n      devices\n    } = await getDevices(this.token);\n    let currentDeviceId = id;\n    if (persistDeviceSelection) {\n      const savedDeviceId = sessionStorage.getItem(\"rswpDeviceId\");\n      if (!savedDeviceId || !devices.some(d => d.id === savedDeviceId)) {\n        sessionStorage.setItem(\"rswpDeviceId\", currentDeviceId);\n      } else {\n        currentDeviceId = savedDeviceId;\n      }\n    }\n    return {\n      currentDeviceId,\n      devices\n    };\n  }\n  initializePlayer = () => {\n    const {\n      volume\n    } = this.state;\n    const {\n      getOAuthToken = callback => {\n        callback(this.token);\n      },\n      getPlayer,\n      name = \"Spotify Web Player\"\n    } = this.props;\n    if (!window.Spotify) {\n      return;\n    }\n    this.updateState({\n      error: \"\",\n      errorType: null,\n      isInitializing: true\n    });\n    this.player = new window.Spotify.Player({\n      getOAuthToken,\n      name,\n      volume\n    });\n    this.player.addListener(\"ready\", this.handlePlayerStatus);\n    this.player.addListener(\"not_ready\", this.handlePlayerStatus);\n    this.player.addListener(\"player_state_changed\", this.handlePlayerStateChanges);\n    this.player.addListener(\"initialization_error\", error => this.handlePlayerErrors(ERROR_TYPE.INITIALIZATION, error.message));\n    this.player.addListener(\"authentication_error\", error => this.handlePlayerErrors(ERROR_TYPE.AUTHENTICATION, error.message));\n    this.player.addListener(\"account_error\", error => this.handlePlayerErrors(ERROR_TYPE.ACCOUNT, error.message));\n    this.player.addListener(\"playback_error\", error => this.handlePlayerErrors(ERROR_TYPE.PLAYBACK, error.message));\n    this.player.addListener(\"autoplay_failed\", async () => {\n      console.log(\"Autoplay is not allowed by the browser autoplay rules\");\n    });\n    this.player.connect();\n    if (getPlayer) {\n      getPlayer(this.player);\n    }\n  };\n  get isExternalPlayer() {\n    const {\n      currentDeviceId,\n      deviceId,\n      status\n    } = this.state;\n    return currentDeviceId && currentDeviceId !== deviceId || status === STATUS.UNSUPPORTED;\n  }\n  preload = async () => {\n    const {\n      offset = 0,\n      preloadData,\n      uris\n    } = this.props;\n    if (!preloadData) {\n      return;\n    }\n    const track = await getPreloadData(this.token, uris, offset);\n    if (track) {\n      this.updateState({\n        track\n      }, () => {\n        this.handleCallback({\n          ...this.state,\n          type: TYPE.PRELOAD\n        });\n      });\n    }\n  };\n  setExternalDevice = id => {\n    this.updateState({\n      currentDeviceId: id,\n      isPlaying: true\n    });\n  };\n  setVolume = async volume => {\n    if (this.isExternalPlayer) {\n      await setVolume(this.token, Math.round(volume * 100));\n      await this.syncDevice();\n    } else if (this.player) {\n      await this.player.setVolume(volume);\n    }\n    this.updateState({\n      volume\n    });\n  };\n  syncDevice = async () => {\n    if (!this.isMounted) {\n      return;\n    }\n    const {\n      deviceId\n    } = this.state;\n    try {\n      const playerState = await getPlaybackState(this.token);\n      let track = this.emptyTrack;\n      if (!playerState) {\n        throw new Error(\"No player\");\n      }\n      if (playerState.item) {\n        track = {\n          artists: \"artists\" in playerState.item ? playerState.item.artists : [],\n          durationMs: playerState.item.duration_ms,\n          id: playerState.item.id,\n          image: \"album\" in playerState.item ? getItemImage(playerState.item.album) : \"\",\n          name: playerState.item.name,\n          uri: playerState.item.uri\n        };\n      }\n      this.updateState({\n        error: \"\",\n        errorType: null,\n        isActive: true,\n        isPlaying: playerState.is_playing,\n        nextTracks: [],\n        previousTracks: [],\n        progressMs: playerState.item ? playerState.progress_ms ?? 0 : 0,\n        status: STATUS.READY,\n        track,\n        volume: parseVolume(playerState.device.volume_percent)\n      });\n    } catch (error) {\n      const state = {\n        isActive: false,\n        isPlaying: false,\n        position: 0,\n        track: this.emptyTrack\n      };\n      if (deviceId) {\n        this.updateState({\n          currentDeviceId: deviceId,\n          ...state\n        });\n        return;\n      }\n      this.updateState({\n        error: error.message,\n        errorType: ERROR_TYPE.PLAYER,\n        status: STATUS.ERROR,\n        ...state\n      });\n    }\n  };\n  async toggleSyncInterval(shouldSync) {\n    const {\n      syncExternalDeviceInterval\n    } = this.props;\n    try {\n      if (this.isExternalPlayer && shouldSync && !this.playerSyncInterval) {\n        await this.syncDevice();\n        clearInterval(this.playerSyncInterval);\n        this.playerSyncInterval = window.setInterval(this.syncDevice, syncExternalDeviceInterval * 1e3);\n      }\n      if ((!shouldSync || !this.isExternalPlayer) && this.playerSyncInterval) {\n        clearInterval(this.playerSyncInterval);\n        this.playerSyncInterval = void 0;\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  toggleProgressBar() {\n    const {\n      isPlaying\n    } = this.state;\n    if (isPlaying) {\n      if (!this.playerProgressInterval) {\n        this.playerProgressInterval = window.setInterval(this.updateSeekBar, this.seekUpdateInterval);\n      }\n    } else if (this.playerProgressInterval) {\n      clearInterval(this.playerProgressInterval);\n      this.playerProgressInterval = void 0;\n    }\n  }\n  toggleOffset = async () => {\n    const {\n      currentDeviceId\n    } = this.state;\n    const {\n      offset,\n      uris\n    } = this.props;\n    const playOptions = this.getPlayOptions(parseIds(uris));\n    if (typeof offset === \"number\") {\n      await play(this.token, {\n        deviceId: currentDeviceId,\n        offset,\n        ...playOptions\n      });\n    }\n  };\n  togglePlay = async (force = false) => {\n    const {\n      currentDeviceId,\n      isPlaying,\n      needsUpdate\n    } = this.state;\n    const {\n      offset,\n      uris\n    } = this.props;\n    const shouldInitialize = force || needsUpdate;\n    const playOptions = this.getPlayOptions(parseIds(uris));\n    try {\n      if (this.isExternalPlayer) {\n        if (!isPlaying) {\n          await play(this.token, {\n            deviceId: currentDeviceId,\n            offset,\n            ...(shouldInitialize ? playOptions : void 0)\n          });\n        } else {\n          await pause(this.token);\n          this.updateState({\n            isPlaying: false\n          });\n        }\n        this.syncTimeout = window.setTimeout(() => {\n          this.syncDevice();\n        }, 300);\n      } else if (this.player) {\n        await this.player.activateElement();\n        const playerState = await this.player.getCurrentState();\n        const shouldPlay = !playerState && !!(playOptions.context_uri ?? playOptions.uris);\n        if (shouldPlay || shouldInitialize) {\n          await play(this.token, {\n            deviceId: currentDeviceId,\n            offset,\n            ...(shouldInitialize ? playOptions : void 0)\n          });\n          await this.player.togglePlay();\n        } else {\n          await this.player.togglePlay();\n        }\n      }\n      if (needsUpdate) {\n        this.updateState({\n          needsUpdate: false\n        });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  updateSeekBar = async () => {\n    if (!this.isMounted) {\n      return;\n    }\n    const {\n      progressMs,\n      track\n    } = this.state;\n    try {\n      if (this.isExternalPlayer) {\n        let position = progressMs / track.durationMs;\n        position = Number(((Number.isFinite(position) ? position : 0) * 100).toFixed(1));\n        this.updateState({\n          position,\n          progressMs: progressMs + this.seekUpdateInterval\n        });\n      } else if (this.player) {\n        const state = await this.player.getCurrentState();\n        if (state) {\n          const progress = state.position;\n          const position = Number((progress / state.track_window.current_track.duration_ms * 100).toFixed(1));\n          this.updateState({\n            position,\n            progressMs: progress + this.seekUpdateInterval\n          });\n        }\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  updateState = (state, callback) => {\n    if (!this.isMounted) {\n      return;\n    }\n    this.setState(state, callback);\n  };\n  render() {\n    const {\n      currentDeviceId,\n      deviceId,\n      devices,\n      error,\n      isActive,\n      isMagnified,\n      isPlaying,\n      isUnsupported,\n      nextTracks,\n      playerPosition,\n      position,\n      progressMs,\n      status,\n      track,\n      volume\n    } = this.state;\n    const {\n      components,\n      hideAttribution = false,\n      hideCoverArt = false,\n      inlineVolume = true,\n      layout = \"responsive\",\n      showSaveIcon,\n      updateSavedStatus\n    } = this.props;\n    const isReady = [STATUS.READY, STATUS.UNSUPPORTED].includes(status);\n    const output = {\n      main: /* @__PURE__ */jsx27(Loader, {\n        styles: this.styles\n      })\n    };\n    if (isReady) {\n      if (!output.info) {\n        output.info = /* @__PURE__ */jsx27(Info_default, {\n          hideAttribution,\n          hideCoverArt,\n          isActive,\n          layout,\n          locale: this.locale,\n          onFavoriteStatusChange: this.handleFavoriteStatusChange,\n          showSaveIcon,\n          styles: this.styles,\n          token: this.token,\n          track,\n          updateSavedStatus\n        });\n      }\n      output.devices = /* @__PURE__ */jsx27(Devices, {\n        currentDeviceId,\n        deviceId,\n        devices,\n        layout,\n        locale: this.locale,\n        onClickDevice: this.handleClickDevice,\n        open: isUnsupported && !deviceId,\n        playerPosition,\n        styles: this.styles\n      });\n      output.volume = currentDeviceId ? /* @__PURE__ */jsx27(Volume, {\n        inlineVolume,\n        layout,\n        locale: this.locale,\n        playerPosition,\n        setVolume: this.setVolume,\n        styles: this.styles,\n        volume\n      }) : null;\n      if (this.renderInlineActions) {\n        output.actions = /* @__PURE__ */jsxs6(Actions_default, {\n          layout,\n          styles: this.styles,\n          children: [output.devices, output.volume]\n        });\n      }\n      output.controls = /* @__PURE__ */jsx27(Controls_default, {\n        components,\n        devices: this.renderInlineActions ? null : output.devices,\n        durationMs: track.durationMs,\n        isActive,\n        isExternalDevice: this.isExternalPlayer,\n        isMagnified,\n        isPlaying,\n        layout,\n        locale: this.locale,\n        nextTracks,\n        onChangeRange: this.handleChangeRange,\n        onClickNext: this.handleClickNext,\n        onClickPrevious: this.handleClickPrevious,\n        onClickTogglePlay: this.handleClickTogglePlay,\n        onToggleMagnify: this.handleToggleMagnify,\n        position,\n        progressMs,\n        styles: this.styles,\n        volume: this.renderInlineActions ? null : output.volume\n      });\n      output.main = /* @__PURE__ */jsxs6(Wrapper_default, {\n        layout,\n        styles: this.styles,\n        children: [output.info, output.controls, output.actions]\n      });\n    } else if (output.info) {\n      output.main = output.info;\n    }\n    if (status === STATUS.ERROR) {\n      output.main = /* @__PURE__ */jsx27(ErrorMessage, {\n        styles: this.styles,\n        children: error\n      });\n    }\n    return /* @__PURE__ */jsx27(Player_default, {\n      ref: this.ref,\n      \"data-ready\": isReady,\n      styles: this.styles,\n      children: output.main\n    });\n  }\n};\nvar src_default = SpotifyWebPlayer;\nexport { ERROR_TYPE, STATUS, TYPE, src_default as default, spotify_exports as spotifyApi };","map":{"version":3,"names":["createRef","PureComponent","isEqual","memoize","ERROR_TYPE","ACCOUNT","AUTHENTICATION","INITIALIZATION","PLAYBACK","PLAYER","SPOTIFY_CONTENT_TYPE","ALBUM","ARTIST","PLAYLIST","SHOW","TRACK","STATUS","ERROR","IDLE","INITIALIZING","READY","RUNNING","UNSUPPORTED","TRANSPARENT_COLOR","TYPE","DEVICE","FAVORITE","PRELOAD","PROGRESS","isNumber","value","loadSpotifyPlayer","Promise","resolve","reject","scriptTag","document","getElementById","script","createElement","id","type","async","defer","src","onload","onerror","error","Error","message","head","appendChild","millisecondsToTime","input","seconds","Math","floor","minutes","hours","parts","push","padStart","join","parseIds","ids","Array","isArray","parseVolume","round","number","digits","factor","validateURI","indexOf","key","split","Object","values","includes","length","spotify_exports","__export","checkTracksStatus","getAlbumTracks","getArtistTopTracks","getDevices","getPlaybackState","getPlaylistTracks","getQueue","getShow","getShowEpisodes","getTrack","next","pause","play","previous","removeTracks","repeat","saveTracks","seek","setDevice","setVolume","shuffle","token","tracks","fetch","headers","Authorization","method","then","d","json","status","offset","deviceId","query","context_uri","uris","body","isArtist","position","JSON","stringify","state","shouldPlay","device_ids","volume","getItemImage","item","maxWidth","max","images","map","width","find","url","getBgColor","bgColor","fallbackColor","getLocale","locale","currentDevice","devices","otherDevices","removeTrack","saveTrack","title","getMergedStyles","styles","mergedStyles","activeColor","color","errorColor","height","loaderColor","loaderSize","sliderColor","sliderHandleBorderRadius","sliderHandleColor","sliderHeight","sliderTrackBorderRadius","sliderTrackColor","trackArtistColor","trackNameColor","getPreloadData","parsedURIs","uri","process","env","NODE_ENV","console","items","track","getTrackInfo","show","total_episodes","episode","duration_ms","name","artists","durationMs","image","getRepeatState","mode","getSpotifyLink","getSpotifyLinkTitle","replace","getSpotifyURIType","album","create","addon","addonJSX","addonKeyframes","addonNesting","addonRule","addonStyle","addonStyled","nano","h","keyframes","put","styled","px","memo","jsx","Wrapper","alignItems","display","justifyContent","style","bottom","right","layout","Actions","props","children","Actions_default","memo3","jsx2","Next","preserveAspectRatio","viewBox","fill","jsx3","Pause","jsx4","Play","jsx5","Previous","memo2","RangeSlider","jsx6","jsxs","Wrapper2","fontSize","transition","zIndex","c","lineHeight","minWidth","marginRight","textAlign","marginLeft","Slider","isMagnified","onChangeRange","onToggleMagnify","progressMs","handleChangeRange","x","handleSize","onMouseEnter","onMouseLeave","className","axis","onChange","options","thumbBorder","thumbBorderRadius","thumbColor","thumbSize","padding","rangeColor","trackBorderRadius","trackColor","xMax","xMin","xStep","Slider_default","jsx7","jsxs2","Wrapper3","top","left","isCompactLayout","Buttons","marginBottom","Button","cursor","opacity","Controls","components","leftButton","rightButton","isActive","isExternalDevice","isPlaying","nextTracks","onClickNext","onClickPrevious","onClickTogglePlay","disabled","onClick","Controls_default","useCallback","useState","memo4","useEffect","useRef","jsx8","ClickOutside","rest","containerRef","isTouch","handleClick","event","container","current","contains","target","addEventListener","removeEventListener","ref","ClickOutside_default","jsx9","DevicesIcon","jsx10","DevicesComputerIcon","jsx11","DevicesMobileIcon","jsx12","DevicesSpeakerIcon","Fragment","jsx13","jsxs3","Wrapper4","backgroundColor","borderRadius","filter","fontWeight","marginTop","whiteSpace","button","span","background","borderLeft","borderRight","content","isCompact","divStyles","p","spanStyles","borderTop","ListHeader","getDeviceIcon","toLowerCase","Devices","currentDeviceId","onClickDevice","open","playerPosition","isOpen","setOpen","handleClickSetDevice","dataset","currentTarget","handleClickToggleList","s","reduce","acc","device","icon","jsx14","Wrapper5","ErrorMessage","memo5","useEffect3","useRef3","useState3","opacify","useEffect2","useRef2","useState2","useMediaQuery","getMatches","window","matchMedia","matches","setMatches","handleChange","addListener","removeListener","usePrevious","jsx15","Favorite","jsx16","FavoriteOutline","textColor","jsx17","SpotifyLogo","jsx18","jsxs4","imageSize","iconSize","Wrapper6","textDecoration","minHeight","borderBottom","margin","paddingBottom","img","paddingLeft","ContentWrapper","flexDirection","hideCoverArt","Content","overflow","div","paddingRight","maskImageColor","showSaveIcon","a","Info","hideAttribution","onFavoriteStatusChange","updateSavedStatus","isSaved","setIsSaved","isMounted","previousId","updateState","setStatus","newStatus","isFavorite","handleClickIcon","favorite","classes","alt","href","rel","artist","index","artistTitle","Info_default","jsx19","Wrapper7","jsutifyContent","borderStyle","borderWidth","boxSizing","transform","pulse","animation","borderColor","Loader","forwardRef","jsx20","Player","Player_default","useCallback2","useEffect4","useRef4","useState4","RangeSlider2","jsx21","VolumeHigh","jsx22","VolumeLow","jsx23","VolumeHigh2","jsx24","VolumeMute","jsx25","jsxs5","WrapperWithToggle","WrapperInline","Volume","inlineVolume","setVolume2","setIsOpen","volumeState","setVolumeState","timeoutRef","previousVolume","isMediumScreen","isInline","handleChangeSlider","y","currentvolume","clearTimeout","setTimeout","handleAfterEnd","onAfterEnd","yMax","yMin","memo6","jsx26","StyledWrapper","flexWrap","Wrapper8","Wrapper_default","jsx27","jsxs6","appearance","border","outlineColor","outlineOffset","SpotifyWebPlayer","emptyTrack","player","playerProgressInterval","playerSyncInterval","renderInlineActions","resizeTimeout","seekUpdateInterval","syncTimeout","getPlayOptions","playOptions","every","some","warn","constructor","currentURI","errorType","isInitializing","isUnsupported","needsUpdate","previousTracks","initialVolume","defaultProps","autoPlay","magnifySliderOnHover","persistDeviceSelection","syncExternalDeviceInterval","syncExternalDevice","componentDidMount","getBoundingClientRect","innerHeight","onSpotifyWebPlaybackSDKReady","initializePlayer","handleResize","componentDidUpdate","previousProps","previousState","repeat2","shuffle2","playProp","isReady","canPlay","togglePlay","isExternalPlayer","syncDevice","handleCallback","toggleSyncInterval","updateSeekBar","toggleProgressBar","toggleOffset","playerState","is_playing","setExternalDevice","componentWillUnmount","disconnect","clearInterval","callback","progress","percentage","stateChanges","getCurrentState","track_window","current_track","handleClickTogglePlay","handleClickPrevious","previousTrack","handleClickNext","nextTrack","handleClickDevice","sessionStorage","setItem","handleFavoriteStatusChange","handlePlayerErrors","isPlaybackError","isInitializationError","nextStatus","handlePlayerStateChanges","paused","repeat_mode","next_tracks","previous_tracks","getVolume","trackState","handlePlayerStatus","device_id","initializeDevices","preload","innerWidth","forceUpdate","handleToggleMagnify","savedDeviceId","getItem","getOAuthToken","getPlayer","Spotify","log","connect","preloadData","progress_ms","volume_percent","shouldSync","setInterval","force","shouldInitialize","activateElement","Number","isFinite","toFixed","setState","render","output","main","info","actions","controls","src_default"],"sources":["/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/index.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/constants.ts","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/modules/helpers.ts","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/modules/spotify.ts","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/modules/getters.ts","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/modules/styled.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/Actions.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/Controls.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/Next.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/Pause.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/Play.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/Previous.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/Slider.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/Devices.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/ClickOutside.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/Devices.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/DevicesComputer.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/DevicesMobile.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/DevicesSpeaker.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/ErrorMessage.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/Info.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/modules/hooks.ts","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/Favorite.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/FavoriteOutline.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/SpotifyLogo.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/Loader.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/Player.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/Volume.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/VolumeHigh.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/VolumeLow.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/VolumeMid.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/icons/VolumeMute.tsx","/Users/sahil/Documents/PycharmProjects/playlist-generator/playlist-app/client/node_modules/react-spotify-web-playback/src/components/Wrapper.tsx"],"sourcesContent":["/* eslint-disable camelcase */\nimport { createRef, PureComponent, ReactNode } from 'react';\nimport isEqual from '@gilbarbara/deep-equal';\nimport memoize from 'memoize-one';\n\nimport {\n  getItemImage,\n  getLocale,\n  getMergedStyles,\n  getPreloadData,\n  getRepeatState,\n  getSpotifyURIType,\n  getTrackInfo,\n} from '~/modules/getters';\nimport { loadSpotifyPlayer, parseIds, parseVolume, round, validateURI } from '~/modules/helpers';\nimport {\n  getDevices,\n  getPlaybackState,\n  next,\n  pause,\n  play,\n  previous,\n  seek,\n  setDevice,\n  setVolume,\n} from '~/modules/spotify';\nimport { put } from '~/modules/styled';\n\nimport Actions from '~/components/Actions';\nimport Controls from '~/components/Controls';\nimport Devices from '~/components/Devices';\nimport ErrorMessage from '~/components/ErrorMessage';\nimport Info from '~/components/Info';\nimport Loader from '~/components/Loader';\nimport Player from '~/components/Player';\nimport Volume from '~/components/Volume';\nimport Wrapper from '~/components/Wrapper';\n\nimport { ERROR_TYPE, STATUS, TYPE } from '~/constants';\n\nimport {\n  CallbackState,\n  ErrorType,\n  Locale,\n  PlayOptions,\n  Props,\n  SpotifyArtist,\n  SpotifyDevice,\n  SpotifyPlayerCallback,\n  State,\n  Status,\n  StylesOptions,\n} from './types';\n\nput('.PlayerRSWP', {\n  boxSizing: 'border-box',\n  fontSize: 'inherit',\n  width: '100%',\n\n  '*': {\n    boxSizing: 'border-box',\n  },\n\n  p: {\n    margin: 0,\n  },\n});\n\nput('.ButtonRSWP', {\n  appearance: 'none',\n  background: 'transparent',\n  border: 0,\n  borderRadius: 0,\n  color: 'inherit',\n  cursor: 'pointer',\n  display: 'inline-flex',\n  lineHeight: 1,\n  padding: 0,\n\n  ':focus': {\n    outlineColor: '#000',\n    outlineOffset: 3,\n  },\n});\n\nclass SpotifyWebPlayer extends PureComponent<Props, State> {\n  private isMounted = false;\n  private emptyTrack = {\n    artists: [] as SpotifyArtist[],\n    durationMs: 0,\n    id: '',\n    image: '',\n    name: '',\n    uri: '',\n  };\n\n  private locale: Locale;\n  private player?: Spotify.Player;\n  private playerProgressInterval?: number;\n  private playerSyncInterval?: number;\n  private ref = createRef<HTMLDivElement>();\n  private renderInlineActions = false;\n  private resizeTimeout?: number;\n  private seekUpdateInterval = 100;\n  private styles: StylesOptions;\n  private syncTimeout?: number;\n\n  private getPlayOptions = memoize((ids: string[]): PlayOptions => {\n    const playOptions: PlayOptions = {\n      context_uri: undefined,\n      uris: undefined,\n    };\n\n    if (ids) {\n      if (!ids.every(d => validateURI(d))) {\n        return playOptions;\n      }\n\n      if (ids.some(d => getSpotifyURIType(d) === 'track')) {\n        if (!ids.every(d => getSpotifyURIType(d) === 'track')) {\n          // eslint-disable-next-line no-console\n          console.warn(\"You can't mix tracks URIs with other types\");\n        }\n\n        playOptions.uris = ids.filter(d => validateURI(d) && getSpotifyURIType(d) === 'track');\n      } else {\n        if (ids.length > 1) {\n          // eslint-disable-next-line no-console\n          console.warn(\"Albums, Artists, Playlists and Podcasts can't have multiple URIs\");\n        }\n\n        // eslint-disable-next-line prefer-destructuring\n        playOptions.context_uri = ids[0];\n      }\n    }\n\n    return playOptions;\n  });\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      currentDeviceId: '',\n      currentURI: '',\n      deviceId: '',\n      devices: [],\n      error: '',\n      errorType: null,\n      isActive: false,\n      isInitializing: false,\n      isMagnified: false,\n      isPlaying: false,\n      isSaved: false,\n      isUnsupported: false,\n      needsUpdate: false,\n      nextTracks: [],\n      playerPosition: 'bottom',\n      position: 0,\n      previousTracks: [],\n      progressMs: 0,\n      repeat: 'off',\n      shuffle: false,\n      status: STATUS.IDLE,\n      track: this.emptyTrack,\n      volume: parseVolume(props.initialVolume) || 1,\n    };\n\n    this.locale = getLocale(props.locale);\n\n    this.styles = getMergedStyles(props.styles);\n  }\n\n  static defaultProps = {\n    autoPlay: false,\n    initialVolume: 1,\n    magnifySliderOnHover: false,\n    name: 'Spotify Web Player',\n    persistDeviceSelection: false,\n    showSaveIcon: false,\n    syncExternalDeviceInterval: 5,\n    syncExternalDevice: false,\n  };\n\n  public async componentDidMount() {\n    this.isMounted = true;\n    const { top = 0 } = this.ref.current?.getBoundingClientRect() ?? {};\n\n    this.updateState({\n      playerPosition: top > window.innerHeight / 2 ? 'bottom' : 'top',\n      status: STATUS.INITIALIZING,\n    });\n\n    if (!window.onSpotifyWebPlaybackSDKReady) {\n      window.onSpotifyWebPlaybackSDKReady = this.initializePlayer;\n    } else {\n      this.initializePlayer();\n    }\n\n    await loadSpotifyPlayer();\n\n    window.addEventListener('resize', this.handleResize);\n    this.handleResize();\n  }\n\n  public async componentDidUpdate(previousProps: Props, previousState: State) {\n    const { currentDeviceId, deviceId, isInitializing, isPlaying, repeat, shuffle, status, track } =\n      this.state;\n    const {\n      autoPlay,\n      layout,\n      locale,\n      offset,\n      play: playProp,\n      showSaveIcon,\n      styles,\n      syncExternalDevice,\n      uris,\n    } = this.props;\n    const isReady = previousState.status !== STATUS.READY && status === STATUS.READY;\n    const playOptions = this.getPlayOptions(parseIds(uris));\n\n    const canPlay = !!currentDeviceId && !!(playOptions.context_uri ?? playOptions.uris);\n    const shouldPlay = isReady && (autoPlay || playProp);\n\n    if (canPlay && shouldPlay) {\n      await this.togglePlay(true);\n\n      if (!isPlaying) {\n        this.updateState({ isPlaying: true });\n      }\n\n      if (this.isExternalPlayer) {\n        this.syncTimeout = window.setTimeout(() => {\n          this.syncDevice();\n        }, 600);\n      }\n    } else if (!isEqual(previousProps.uris, uris)) {\n      if (isPlaying || playProp) {\n        await this.togglePlay(true);\n      } else {\n        this.updateState({ needsUpdate: true });\n      }\n    } else if (previousProps.play !== playProp && playProp !== isPlaying) {\n      await this.togglePlay(!track.id);\n    }\n\n    if (previousState.status !== status) {\n      this.handleCallback({\n        ...this.state,\n        type: TYPE.STATUS,\n      });\n    }\n\n    if (previousState.currentDeviceId !== currentDeviceId && currentDeviceId) {\n      if (!isReady) {\n        this.handleCallback({\n          ...this.state,\n          type: TYPE.DEVICE,\n        });\n      }\n\n      await this.toggleSyncInterval(this.isExternalPlayer);\n      await this.updateSeekBar();\n    }\n\n    if (track.id && previousState.track.id !== track.id) {\n      this.handleCallback({\n        ...this.state,\n        type: TYPE.TRACK,\n      });\n\n      if (showSaveIcon) {\n        this.updateState({ isSaved: false });\n      }\n    }\n\n    if (previousState.isPlaying !== isPlaying) {\n      this.toggleProgressBar();\n      await this.toggleSyncInterval(this.isExternalPlayer);\n\n      this.handleCallback({\n        ...this.state,\n        type: TYPE.PLAYER,\n      });\n    }\n\n    if (previousState.repeat !== repeat || previousState.shuffle !== shuffle) {\n      this.handleCallback({\n        ...this.state,\n        type: TYPE.PLAYER,\n      });\n    }\n\n    if (previousProps.offset !== offset) {\n      await this.toggleOffset();\n    }\n\n    if (previousState.isInitializing && !isInitializing) {\n      if (syncExternalDevice && !uris) {\n        const playerState = await getPlaybackState(this.token);\n\n        if (playerState?.is_playing && playerState.device.id !== deviceId) {\n          this.setExternalDevice(playerState.device.id ?? '');\n        }\n      }\n    }\n\n    if (previousProps.layout !== layout) {\n      this.handleResize();\n    }\n\n    if (!isEqual(previousProps.locale, locale)) {\n      this.locale = getLocale(locale);\n    }\n\n    if (!isEqual(previousProps.styles, styles)) {\n      this.styles = getMergedStyles(styles);\n    }\n  }\n\n  public async componentWillUnmount() {\n    this.isMounted = false;\n\n    if (this.player) {\n      this.player.disconnect();\n    }\n\n    clearInterval(this.playerSyncInterval);\n    clearInterval(this.playerProgressInterval);\n    clearTimeout(this.syncTimeout);\n\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  private handleCallback(state: CallbackState): void {\n    const { callback } = this.props;\n\n    if (callback) {\n      callback(state);\n    }\n  }\n\n  private handleChangeRange = async (position: number) => {\n    const { track } = this.state;\n    const { callback } = this.props;\n    let progress = 0;\n\n    try {\n      const percentage = position / 100;\n\n      let stateChanges = {};\n\n      if (this.isExternalPlayer) {\n        progress = Math.round(track.durationMs * percentage);\n\n        await seek(this.token, progress);\n\n        stateChanges = {\n          position,\n          progressMs: progress,\n        };\n      } else if (this.player) {\n        const state = await this.player.getCurrentState();\n\n        if (state) {\n          progress = Math.round(state.track_window.current_track.duration_ms * percentage);\n          await this.player.seek(progress);\n\n          stateChanges = {\n            position,\n            progressMs: progress,\n          };\n        } else {\n          stateChanges = { position: 0 };\n        }\n      }\n\n      this.updateState(stateChanges);\n\n      if (callback) {\n        callback({\n          ...this.state,\n          ...stateChanges,\n          type: TYPE.PROGRESS,\n        });\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  };\n\n  private handleClickTogglePlay = async () => {\n    const { isActive } = this.state;\n\n    try {\n      await this.togglePlay(!this.isExternalPlayer && !isActive);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  };\n\n  private handleClickPrevious = async () => {\n    try {\n      if (this.isExternalPlayer) {\n        await previous(this.token);\n        this.syncTimeout = window.setTimeout(() => {\n          this.syncDevice();\n        }, 300);\n      } else if (this.player) {\n        await this.player.previousTrack();\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  };\n\n  private handleClickNext = async () => {\n    try {\n      if (this.isExternalPlayer) {\n        await next(this.token);\n        this.syncTimeout = window.setTimeout(() => {\n          this.syncDevice();\n        }, 300);\n      } else if (this.player) {\n        await this.player.nextTrack();\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  };\n\n  private handleClickDevice = async (deviceId: string) => {\n    const { isUnsupported } = this.state;\n    const { autoPlay, persistDeviceSelection } = this.props;\n\n    this.updateState({ currentDeviceId: deviceId });\n\n    try {\n      await setDevice(this.token, deviceId);\n\n      if (persistDeviceSelection) {\n        sessionStorage.setItem('rswpDeviceId', deviceId);\n      }\n\n      if (isUnsupported) {\n        await this.syncDevice();\n\n        const playerState = await getPlaybackState(this.token);\n\n        if (playerState && !playerState.is_playing && autoPlay) {\n          await this.togglePlay(true);\n        }\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  };\n\n  private handleFavoriteStatusChange = (status: boolean) => {\n    const { isSaved } = this.state;\n\n    this.updateState({ isSaved: status });\n\n    if (isSaved !== status) {\n      this.handleCallback({\n        ...this.state,\n        isSaved: status,\n        type: TYPE.FAVORITE,\n      });\n    }\n  };\n\n  private handlePlayerErrors = async (type: ErrorType, message: string) => {\n    const { status } = this.state;\n    const isPlaybackError = type === ERROR_TYPE.PLAYBACK;\n    const isInitializationError = type === ERROR_TYPE.INITIALIZATION;\n\n    let nextStatus = status;\n    let devices: SpotifyDevice[] = [];\n\n    if (this.player && !isPlaybackError) {\n      this.player.disconnect();\n      this.player = undefined;\n    }\n\n    if (isInitializationError) {\n      nextStatus = STATUS.UNSUPPORTED;\n\n      ({ devices = [] } = await getDevices(this.token));\n    } else if (!isPlaybackError) {\n      nextStatus = STATUS.ERROR;\n    }\n\n    this.updateState({\n      devices,\n      error: message,\n      errorType: type,\n      isInitializing: false,\n      isUnsupported: isInitializationError,\n      status: nextStatus,\n    });\n  };\n\n  private handlePlayerStateChanges = async (state: Spotify.PlaybackState) => {\n    const { currentURI } = this.state;\n\n    try {\n      if (state) {\n        const {\n          paused,\n          position,\n          repeat_mode,\n          shuffle,\n          track_window: { current_track, next_tracks, previous_tracks },\n        } = state;\n\n        const isPlaying = !paused;\n        const volume = (await this.player?.getVolume()) ?? 100;\n        let trackState = {};\n\n        if ((!currentURI || currentURI !== current_track.uri) && current_track) {\n          trackState = {\n            currentURI: current_track.uri,\n            nextTracks: next_tracks.map(getTrackInfo),\n            position: 0,\n            previousTracks: previous_tracks.map(getTrackInfo),\n            track: getTrackInfo(current_track),\n          };\n        }\n\n        this.updateState({\n          error: '',\n          errorType: null,\n          isActive: true,\n          isPlaying,\n          progressMs: position,\n          repeat: getRepeatState(repeat_mode),\n          shuffle,\n          volume: round(volume),\n          ...trackState,\n        });\n      } else if (this.isExternalPlayer) {\n        await this.syncDevice();\n      } else {\n        this.updateState({\n          isActive: false,\n          isPlaying: false,\n          nextTracks: [],\n          position: 0,\n          previousTracks: [],\n          track: {\n            artists: [],\n            durationMs: 0,\n            id: '',\n            image: '',\n            name: '',\n            uri: '',\n          },\n        });\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  };\n\n  private handlePlayerStatus = async ({ device_id }: Spotify.WebPlaybackInstance) => {\n    const { currentDeviceId, devices } = await this.initializeDevices(device_id);\n\n    this.updateState({\n      currentDeviceId,\n      deviceId: device_id,\n      devices,\n      isInitializing: false,\n      status: device_id ? STATUS.READY : STATUS.IDLE,\n    });\n\n    if (device_id) {\n      await this.preload();\n    }\n  };\n\n  private handleResize = () => {\n    const { layout = 'responsive' } = this.props;\n\n    clearTimeout(this.resizeTimeout);\n\n    this.resizeTimeout = window.setTimeout(() => {\n      this.renderInlineActions = window.innerWidth >= 768 && layout === 'responsive';\n      this.forceUpdate();\n    }, 100);\n  };\n\n  private handleToggleMagnify = () => {\n    const { magnifySliderOnHover } = this.props;\n\n    if (magnifySliderOnHover) {\n      this.updateState(previousState => {\n        return { isMagnified: !previousState.isMagnified };\n      });\n    }\n  };\n\n  private get token(): string {\n    const { token } = this.props;\n\n    return token;\n  }\n\n  private async initializeDevices(id: string) {\n    const { persistDeviceSelection } = this.props;\n    const { devices } = await getDevices(this.token);\n    let currentDeviceId = id;\n\n    if (persistDeviceSelection) {\n      const savedDeviceId = sessionStorage.getItem('rswpDeviceId');\n\n      if (!savedDeviceId || !devices.some((d: SpotifyDevice) => d.id === savedDeviceId)) {\n        sessionStorage.setItem('rswpDeviceId', currentDeviceId);\n      } else {\n        currentDeviceId = savedDeviceId;\n      }\n    }\n\n    return { currentDeviceId, devices };\n  }\n\n  private initializePlayer = () => {\n    const { volume } = this.state;\n    const {\n      getOAuthToken = (callback: SpotifyPlayerCallback) => {\n        callback(this.token);\n      },\n      getPlayer,\n      name = 'Spotify Web Player',\n    } = this.props;\n\n    if (!window.Spotify) {\n      return;\n    }\n\n    this.updateState({\n      error: '',\n      errorType: null,\n      isInitializing: true,\n    });\n\n    this.player = new window.Spotify.Player({\n      getOAuthToken,\n      name,\n      volume,\n    });\n\n    this.player.addListener('ready', this.handlePlayerStatus);\n    this.player.addListener('not_ready', this.handlePlayerStatus);\n    this.player.addListener('player_state_changed', this.handlePlayerStateChanges);\n    this.player.addListener('initialization_error', error =>\n      this.handlePlayerErrors(ERROR_TYPE.INITIALIZATION, error.message),\n    );\n    this.player.addListener('authentication_error', error =>\n      this.handlePlayerErrors(ERROR_TYPE.AUTHENTICATION, error.message),\n    );\n    this.player.addListener('account_error', error =>\n      this.handlePlayerErrors(ERROR_TYPE.ACCOUNT, error.message),\n    );\n    this.player.addListener('playback_error', error =>\n      this.handlePlayerErrors(ERROR_TYPE.PLAYBACK, error.message),\n    );\n    this.player.addListener('autoplay_failed', async () => {\n      // eslint-disable-next-line no-console\n      console.log('Autoplay is not allowed by the browser autoplay rules');\n    });\n\n    this.player.connect();\n\n    if (getPlayer) {\n      getPlayer(this.player);\n    }\n  };\n\n  private get isExternalPlayer(): boolean {\n    const { currentDeviceId, deviceId, status } = this.state;\n\n    return (currentDeviceId && currentDeviceId !== deviceId) || status === STATUS.UNSUPPORTED;\n  }\n\n  private preload = async () => {\n    const { offset = 0, preloadData, uris } = this.props;\n\n    if (!preloadData) {\n      return;\n    }\n\n    const track = await getPreloadData(this.token, uris, offset);\n\n    if (track) {\n      this.updateState({ track }, () => {\n        this.handleCallback({\n          ...this.state,\n          type: TYPE.PRELOAD,\n        });\n      });\n    }\n  };\n\n  private setExternalDevice = (id: string) => {\n    this.updateState({ currentDeviceId: id, isPlaying: true });\n  };\n\n  private setVolume = async (volume: number) => {\n    if (this.isExternalPlayer) {\n      await setVolume(this.token, Math.round(volume * 100));\n      await this.syncDevice();\n    } else if (this.player) {\n      await this.player.setVolume(volume);\n    }\n\n    this.updateState({ volume });\n  };\n\n  private syncDevice = async () => {\n    if (!this.isMounted) {\n      return;\n    }\n\n    const { deviceId } = this.state;\n\n    try {\n      const playerState = await getPlaybackState(this.token);\n      let track = this.emptyTrack;\n\n      if (!playerState) {\n        throw new Error('No player');\n      }\n\n      if (playerState.item) {\n        track = {\n          artists: 'artists' in playerState.item ? playerState.item.artists : [],\n          durationMs: playerState.item.duration_ms,\n          id: playerState.item.id,\n          image: 'album' in playerState.item ? getItemImage(playerState.item.album) : '',\n          name: playerState.item.name,\n          uri: playerState.item.uri,\n        };\n      }\n\n      this.updateState({\n        error: '',\n        errorType: null,\n        isActive: true,\n        isPlaying: playerState.is_playing,\n        nextTracks: [],\n        previousTracks: [],\n        progressMs: playerState.item ? playerState.progress_ms ?? 0 : 0,\n        status: STATUS.READY,\n        track,\n        volume: parseVolume(playerState.device.volume_percent),\n      });\n    } catch (error: any) {\n      const state = {\n        isActive: false,\n        isPlaying: false,\n        position: 0,\n        track: this.emptyTrack,\n      };\n\n      if (deviceId) {\n        this.updateState({\n          currentDeviceId: deviceId,\n          ...state,\n        });\n\n        return;\n      }\n\n      this.updateState({\n        error: error.message,\n        errorType: ERROR_TYPE.PLAYER,\n        status: STATUS.ERROR,\n        ...state,\n      });\n    }\n  };\n\n  private async toggleSyncInterval(shouldSync: boolean) {\n    const { syncExternalDeviceInterval } = this.props;\n\n    try {\n      if (this.isExternalPlayer && shouldSync && !this.playerSyncInterval) {\n        await this.syncDevice();\n\n        clearInterval(this.playerSyncInterval);\n        this.playerSyncInterval = window.setInterval(\n          this.syncDevice,\n          syncExternalDeviceInterval! * 1000,\n        );\n      }\n\n      if ((!shouldSync || !this.isExternalPlayer) && this.playerSyncInterval) {\n        clearInterval(this.playerSyncInterval);\n        this.playerSyncInterval = undefined;\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  }\n\n  private toggleProgressBar() {\n    const { isPlaying } = this.state;\n\n    if (isPlaying) {\n      if (!this.playerProgressInterval) {\n        this.playerProgressInterval = window.setInterval(\n          this.updateSeekBar,\n          this.seekUpdateInterval,\n        );\n      }\n    } else if (this.playerProgressInterval) {\n      clearInterval(this.playerProgressInterval);\n      this.playerProgressInterval = undefined;\n    }\n  }\n\n  private toggleOffset = async () => {\n    const { currentDeviceId } = this.state;\n    const { offset, uris } = this.props;\n    const playOptions = this.getPlayOptions(parseIds(uris));\n\n    if (typeof offset === 'number') {\n      await play(this.token, { deviceId: currentDeviceId, offset, ...playOptions });\n    }\n  };\n\n  private togglePlay = async (force = false) => {\n    const { currentDeviceId, isPlaying, needsUpdate } = this.state;\n    const { offset, uris } = this.props;\n    const shouldInitialize = force || needsUpdate;\n    const playOptions = this.getPlayOptions(parseIds(uris));\n\n    try {\n      if (this.isExternalPlayer) {\n        if (!isPlaying) {\n          await play(this.token, {\n            deviceId: currentDeviceId,\n            offset,\n            ...(shouldInitialize ? playOptions : undefined),\n          });\n        } else {\n          await pause(this.token);\n\n          this.updateState({ isPlaying: false });\n        }\n\n        this.syncTimeout = window.setTimeout(() => {\n          this.syncDevice();\n        }, 300);\n      } else if (this.player) {\n        await this.player.activateElement();\n\n        const playerState = await this.player.getCurrentState();\n        const shouldPlay = !playerState && !!(playOptions.context_uri ?? playOptions.uris);\n\n        if (shouldPlay || shouldInitialize) {\n          await play(this.token, {\n            deviceId: currentDeviceId,\n            offset,\n            ...(shouldInitialize ? playOptions : undefined),\n          });\n          await this.player.togglePlay();\n        } else {\n          await this.player.togglePlay();\n        }\n      }\n\n      if (needsUpdate) {\n        this.updateState({ needsUpdate: false });\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  };\n\n  private updateSeekBar = async () => {\n    if (!this.isMounted) {\n      return;\n    }\n\n    const { progressMs, track } = this.state;\n\n    try {\n      if (this.isExternalPlayer) {\n        let position = progressMs / track.durationMs;\n\n        position = Number(((Number.isFinite(position) ? position : 0) * 100).toFixed(1));\n\n        this.updateState({\n          position,\n          progressMs: progressMs + this.seekUpdateInterval,\n        });\n      } else if (this.player) {\n        const state = await this.player.getCurrentState();\n\n        if (state) {\n          const progress = state.position;\n          const position = Number(\n            ((progress / state.track_window.current_track.duration_ms) * 100).toFixed(1),\n          );\n\n          this.updateState({\n            position,\n            progressMs: progress + this.seekUpdateInterval,\n          });\n        }\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  };\n\n  private updateState: typeof this.setState = (state, callback) => {\n    if (!this.isMounted) {\n      return;\n    }\n\n    this.setState(state, callback);\n  };\n\n  public render() {\n    const {\n      currentDeviceId,\n      deviceId,\n      devices,\n      error,\n      isActive,\n      isMagnified,\n      isPlaying,\n      isUnsupported,\n      nextTracks,\n      playerPosition,\n      position,\n      progressMs,\n      status,\n      track,\n      volume,\n    } = this.state;\n    const {\n      components,\n      hideAttribution = false,\n      hideCoverArt = false,\n      inlineVolume = true,\n      layout = 'responsive',\n      showSaveIcon,\n      updateSavedStatus,\n    } = this.props;\n    const isReady = ([STATUS.READY, STATUS.UNSUPPORTED] as Status[]).includes(status);\n\n    const output: Record<string, ReactNode> = {\n      main: <Loader styles={this.styles} />,\n    };\n\n    if (isReady) {\n      if (!output.info) {\n        output.info = (\n          <Info\n            hideAttribution={hideAttribution}\n            hideCoverArt={hideCoverArt}\n            isActive={isActive}\n            layout={layout}\n            locale={this.locale}\n            onFavoriteStatusChange={this.handleFavoriteStatusChange}\n            showSaveIcon={showSaveIcon!}\n            styles={this.styles}\n            token={this.token}\n            track={track}\n            updateSavedStatus={updateSavedStatus}\n          />\n        );\n      }\n\n      output.devices = (\n        <Devices\n          currentDeviceId={currentDeviceId}\n          deviceId={deviceId}\n          devices={devices}\n          layout={layout}\n          locale={this.locale}\n          onClickDevice={this.handleClickDevice}\n          open={isUnsupported && !deviceId}\n          playerPosition={playerPosition}\n          styles={this.styles}\n        />\n      );\n\n      output.volume = currentDeviceId ? (\n        <Volume\n          inlineVolume={inlineVolume}\n          layout={layout}\n          locale={this.locale}\n          playerPosition={playerPosition}\n          setVolume={this.setVolume}\n          styles={this.styles}\n          volume={volume}\n        />\n      ) : null;\n\n      if (this.renderInlineActions) {\n        output.actions = (\n          <Actions layout={layout} styles={this.styles}>\n            {output.devices}\n            {output.volume}\n          </Actions>\n        );\n      }\n\n      output.controls = (\n        <Controls\n          components={components}\n          devices={this.renderInlineActions ? null : output.devices}\n          durationMs={track.durationMs}\n          isActive={isActive}\n          isExternalDevice={this.isExternalPlayer}\n          isMagnified={isMagnified}\n          isPlaying={isPlaying}\n          layout={layout}\n          locale={this.locale}\n          nextTracks={nextTracks}\n          onChangeRange={this.handleChangeRange}\n          onClickNext={this.handleClickNext}\n          onClickPrevious={this.handleClickPrevious}\n          onClickTogglePlay={this.handleClickTogglePlay}\n          onToggleMagnify={this.handleToggleMagnify}\n          position={position}\n          progressMs={progressMs}\n          styles={this.styles}\n          volume={this.renderInlineActions ? null : output.volume}\n        />\n      );\n\n      output.main = (\n        <Wrapper layout={layout} styles={this.styles}>\n          {output.info}\n          {output.controls}\n          {output.actions}\n        </Wrapper>\n      );\n    } else if (output.info) {\n      output.main = output.info;\n    }\n\n    if (status === STATUS.ERROR) {\n      output.main = <ErrorMessage styles={this.styles}>{error}</ErrorMessage>;\n    }\n\n    return (\n      <Player ref={this.ref} data-ready={isReady} styles={this.styles}>\n        {output.main}\n      </Player>\n    );\n  }\n}\n\nexport * from './types';\nexport type SpotifyPlayer = Spotify.Player;\n\nexport { ERROR_TYPE, STATUS, TYPE } from './constants';\nexport * as spotifyApi from './modules/spotify';\n\nexport default SpotifyWebPlayer;\n","export const ERROR_TYPE = {\n  ACCOUNT: 'account',\n  AUTHENTICATION: 'authentication',\n  INITIALIZATION: 'initialization',\n  PLAYBACK: 'playback',\n  PLAYER: 'player',\n} as const;\n\nexport const SPOTIFY_CONTENT_TYPE = {\n  ALBUM: 'album',\n  ARTIST: 'artist',\n  PLAYLIST: 'playlist',\n  SHOW: 'show',\n  TRACK: 'track',\n};\n\nexport const STATUS = {\n  ERROR: 'ERROR',\n  IDLE: 'IDLE',\n  INITIALIZING: 'INITIALIZING',\n  READY: 'READY',\n  RUNNING: 'RUNNING',\n  UNSUPPORTED: 'UNSUPPORTED',\n} as const;\n\nexport const TRANSPARENT_COLOR = 'rgba(0, 0, 0, 0)';\n\nexport const TYPE = {\n  DEVICE: 'device_update',\n  FAVORITE: 'favorite_update',\n  PLAYER: 'player_update',\n  PRELOAD: 'preload_update',\n  PROGRESS: 'progress_update',\n  STATUS: 'status_update',\n  TRACK: 'track_update',\n} as const;\n","import { SPOTIFY_CONTENT_TYPE } from '~/constants';\nimport { IDs } from '~/types';\n\nexport function isNumber(value: unknown): value is number {\n  return typeof value === 'number';\n}\n\nexport function loadSpotifyPlayer(): Promise<any> {\n  return new Promise<void>((resolve, reject) => {\n    const scriptTag = document.getElementById('spotify-player');\n\n    if (!scriptTag) {\n      const script = document.createElement('script');\n\n      script.id = 'spotify-player';\n      script.type = 'text/javascript';\n      script.async = false;\n      script.defer = true;\n      script.src = 'https://sdk.scdn.co/spotify-player.js';\n      script.onload = () => resolve();\n      script.onerror = (error: any) => reject(new Error(`loadScript: ${error.message}`));\n\n      document.head.appendChild(script);\n    } else {\n      resolve();\n    }\n  });\n}\n\nexport function millisecondsToTime(input: number) {\n  const seconds = Math.floor((input / 1000) % 60);\n  const minutes = Math.floor((input / (1000 * 60)) % 60);\n  const hours = Math.floor((input / (1000 * 60 * 60)) % 24);\n\n  const parts: string[] = [];\n\n  if (hours > 0) {\n    parts.push(\n      `${hours}`.padStart(2, '0'),\n      `${minutes}`.padStart(2, '0'),\n      `${seconds}`.padStart(2, '0'),\n    );\n  } else {\n    parts.push(`${minutes}`, `${seconds}`.padStart(2, '0'));\n  }\n\n  return parts.join(':');\n}\n\nexport function parseIds(ids: IDs): string[] {\n  if (!ids) {\n    return [];\n  }\n\n  return Array.isArray(ids) ? ids : [ids];\n}\n\nexport function parseVolume(value?: unknown): number {\n  if (!isNumber(value)) {\n    return 1;\n  }\n\n  if (value > 1) {\n    return value / 100;\n  }\n\n  return value;\n}\n\n/**\n * Round decimal numbers\n */\nexport function round(number: number, digits = 2) {\n  const factor = 10 ** digits;\n\n  return Math.round(number * factor) / factor;\n}\n\nexport function validateURI(input: string): boolean {\n  if (input && input.indexOf(':') > -1) {\n    const [key, type, id] = input.split(':');\n\n    if (\n      key === 'spotify' &&\n      Object.values(SPOTIFY_CONTENT_TYPE).includes(type) &&\n      id.length === 22\n    ) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","/* eslint-disable camelcase */\nimport { parseIds } from '~/modules/helpers';\n\nimport { IDs, RepeatState, SpotifyPlayOptions } from '~/types';\n\nexport async function checkTracksStatus(token: string, tracks: IDs): Promise<boolean[]> {\n  return fetch(`https://api.spotify.com/v1/me/tracks/contains?ids=${parseIds(tracks)}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  }).then(d => d.json());\n}\n\nexport async function getAlbumTracks(\n  token: string,\n  id: string,\n): Promise<SpotifyApi.AlbumTracksResponse> {\n  return fetch(`https://api.spotify.com/v1/albums/${id}/tracks`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  }).then(d => d.json());\n}\n\nexport async function getArtistTopTracks(\n  token: string,\n  id: string,\n): Promise<SpotifyApi.ArtistsTopTracksResponse> {\n  return fetch(`https://api.spotify.com/v1/artists/${id}/top-tracks`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  }).then(d => d.json());\n}\n\nexport async function getDevices(token: string): Promise<SpotifyApi.UserDevicesResponse> {\n  return fetch(`https://api.spotify.com/v1/me/player/devices`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  }).then(d => d.json());\n}\n\nexport async function getPlaybackState(\n  token: string,\n): Promise<SpotifyApi.CurrentlyPlayingObject | null> {\n  return fetch(`https://api.spotify.com/v1/me/player`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  }).then(d => {\n    if (d.status === 204) {\n      return null;\n    }\n\n    return d.json();\n  });\n}\n\nexport async function getPlaylistTracks(\n  token: string,\n  id: string,\n): Promise<SpotifyApi.PlaylistTrackResponse> {\n  return fetch(`https://api.spotify.com/v1/playlists/${id}/tracks`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  }).then(d => d.json());\n}\n\nexport async function getQueue(token: string): Promise<SpotifyApi.UsersQueueResponse> {\n  return fetch(`https://api.spotify.com/v1/me/player/queue`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  }).then(d => d.json());\n}\n\nexport async function getShow(token: string, id: string): Promise<SpotifyApi.ShowObjectFull> {\n  return fetch(`https://api.spotify.com/v1/shows/${id}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  }).then(d => d.json());\n}\n\nexport async function getShowEpisodes(\n  token: string,\n  id: string,\n  offset = 0,\n): Promise<SpotifyApi.ShowEpisodesResponse> {\n  return fetch(`https://api.spotify.com/v1/shows/${id}/episodes?offset=${offset}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  }).then(d => d.json());\n}\n\nexport async function getTrack(token: string, id: string): Promise<SpotifyApi.TrackObjectFull> {\n  return fetch(`https://api.spotify.com/v1/tracks/${id}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'GET',\n  }).then(d => d.json());\n}\n\nexport async function next(token: string, deviceId?: string): Promise<void> {\n  let query = '';\n\n  if (deviceId) {\n    query += `?device_id=${deviceId}`;\n  }\n\n  await fetch(`https://api.spotify.com/v1/me/player/next${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'POST',\n  });\n}\n\nexport async function pause(token: string, deviceId?: string): Promise<void> {\n  let query = '';\n\n  if (deviceId) {\n    query += `?device_id=${deviceId}`;\n  }\n\n  await fetch(`https://api.spotify.com/v1/me/player/pause${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'PUT',\n  });\n}\n\nexport async function play(\n  token: string,\n  { context_uri, deviceId, offset = 0, uris }: SpotifyPlayOptions,\n): Promise<void> {\n  let body;\n\n  if (context_uri) {\n    const isArtist = context_uri.indexOf('artist') >= 0;\n    let position;\n\n    if (!isArtist) {\n      position = { position: offset };\n    }\n\n    body = JSON.stringify({ context_uri, offset: position });\n  } else if (Array.isArray(uris) && uris.length) {\n    body = JSON.stringify({ uris, offset: { position: offset } });\n  }\n\n  await fetch(`https://api.spotify.com/v1/me/player/play?device_id=${deviceId}`, {\n    body,\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'PUT',\n  });\n}\n\nexport async function previous(token: string, deviceId?: string): Promise<void> {\n  let query = '';\n\n  if (deviceId) {\n    query += `?device_id=${deviceId}`;\n  }\n\n  await fetch(`https://api.spotify.com/v1/me/player/previous${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'POST',\n  });\n}\n\nexport async function removeTracks(token: string, tracks: IDs): Promise<void> {\n  await fetch(`https://api.spotify.com/v1/me/tracks`, {\n    body: JSON.stringify({ ids: parseIds(tracks) }),\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'DELETE',\n  });\n}\n\nexport async function repeat(token: string, state: RepeatState, deviceId?: string): Promise<void> {\n  let query = `?state=${state}`;\n\n  if (deviceId) {\n    query += `&device_id=${deviceId}`;\n  }\n\n  await fetch(`https://api.spotify.com/v1/me/player/repeat${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'PUT',\n  });\n}\n\nexport async function saveTracks(token: string, tracks: IDs): Promise<void> {\n  await fetch(`https://api.spotify.com/v1/me/tracks`, {\n    body: JSON.stringify({ ids: parseIds(tracks) }),\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'PUT',\n  });\n}\n\nexport async function seek(token: string, position: number, deviceId?: string): Promise<void> {\n  let query = `?position_ms=${position}`;\n\n  if (deviceId) {\n    query += `&device_id=${deviceId}`;\n  }\n\n  await fetch(`https://api.spotify.com/v1/me/player/seek${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'PUT',\n  });\n}\n\nexport async function setDevice(\n  token: string,\n  deviceId: string,\n  shouldPlay?: boolean,\n): Promise<void> {\n  await fetch(`https://api.spotify.com/v1/me/player`, {\n    body: JSON.stringify({ device_ids: [deviceId], play: shouldPlay }),\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'PUT',\n  });\n}\n\nexport async function setVolume(token: string, volume: number, deviceId?: string): Promise<void> {\n  let query = `?volume_percent=${volume}`;\n\n  if (deviceId) {\n    query += `&device_id=${deviceId}`;\n  }\n\n  await fetch(`https://api.spotify.com/v1/me/player/volume${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'PUT',\n  });\n}\n\nexport async function shuffle(token: string, state: boolean, deviceId?: string): Promise<void> {\n  let query = `?state=${state}`;\n\n  if (deviceId) {\n    query += `&device_id=${deviceId}`;\n  }\n\n  await fetch(`https://api.spotify.com/v1/me/player/shuffle${query}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    method: 'PUT',\n  });\n}\n","/* eslint-disable camelcase */\nimport { parseIds, validateURI } from '~/modules/helpers';\nimport {\n  getAlbumTracks,\n  getArtistTopTracks,\n  getPlaylistTracks,\n  getShow,\n  getShowEpisodes,\n  getTrack,\n} from '~/modules/spotify';\n\nimport { SPOTIFY_CONTENT_TYPE, TRANSPARENT_COLOR } from '~/constants';\nimport { IDs, Locale, RepeatState, SpotifyTrack, StylesOptions, StylesProps } from '~/types';\n\nexport function getItemImage(item: { images: Spotify.Image[] }): string {\n  const maxWidth = Math.max(...item.images.map(d => d.width ?? 0));\n\n  return item.images.find(d => d.width === maxWidth)?.url ?? '';\n}\n\nexport function getBgColor(bgColor: string, fallbackColor?: string): string {\n  if (fallbackColor) {\n    return bgColor === TRANSPARENT_COLOR ? fallbackColor : bgColor;\n  }\n\n  return bgColor === 'transparent' ? TRANSPARENT_COLOR : bgColor;\n}\n\nexport function getLocale(locale?: Partial<Locale>): Locale {\n  return {\n    currentDevice: 'Current device',\n    devices: 'Devices',\n    next: 'Next',\n    otherDevices: 'Select other device',\n    pause: 'Pause',\n    play: 'Play',\n    previous: 'Previous',\n    removeTrack: 'Remove from your favorites',\n    saveTrack: 'Save to your favorites',\n    title: '{name} on SPOTIFY',\n    volume: 'Volume',\n    ...locale,\n  };\n}\n\nexport function getMergedStyles(styles?: StylesProps): StylesOptions {\n  const mergedStyles = {\n    activeColor: '#1cb954',\n    bgColor: '#fff',\n    color: '#333',\n    errorColor: '#ff0026',\n    height: 80,\n    loaderColor: '#ccc',\n    loaderSize: 32,\n    sliderColor: '#666',\n    sliderHandleBorderRadius: '50%',\n    sliderHandleColor: '#000',\n    sliderHeight: 4,\n    sliderTrackBorderRadius: 4,\n    sliderTrackColor: '#ccc',\n    trackArtistColor: '#666',\n    trackNameColor: '#333',\n    ...styles,\n  };\n\n  mergedStyles.bgColor = getBgColor(mergedStyles.bgColor);\n\n  return mergedStyles;\n}\n\nexport async function getPreloadData(\n  token: string,\n  uris: IDs,\n  offset: number,\n): Promise<SpotifyTrack | null> {\n  const parsedURIs = parseIds(uris);\n  const uri = parsedURIs[offset];\n\n  if (!validateURI(uri)) {\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line no-console\n      console.error('PreloadData: Invalid URI', parsedURIs[offset]);\n    }\n\n    return null;\n  }\n\n  const [, type, id] = uri.split(':');\n\n  try {\n    switch (type) {\n      case SPOTIFY_CONTENT_TYPE.ALBUM: {\n        const { items } = await getAlbumTracks(token, id);\n        const track = await getTrack(token, items[offset].id);\n\n        return getTrackInfo(track);\n      }\n      case SPOTIFY_CONTENT_TYPE.ARTIST: {\n        const { tracks } = await getArtistTopTracks(token, id);\n\n        return getTrackInfo(tracks[offset]);\n      }\n      case SPOTIFY_CONTENT_TYPE.PLAYLIST: {\n        const { items } = await getPlaylistTracks(token, id);\n\n        if (items[offset]?.track) {\n          return getTrackInfo(items[offset]?.track);\n        }\n\n        return null;\n      }\n      case SPOTIFY_CONTENT_TYPE.SHOW: {\n        const show = await getShow(token, id);\n        const { items } = await getShowEpisodes(\n          token,\n          id,\n          show.total_episodes ? show.total_episodes - 1 : 0,\n        );\n\n        const episode = items?.[0] ?? {\n          duration_ms: 0,\n          id: show.id,\n          images: show.images,\n          name: show.name,\n          uri: show.uri,\n        };\n\n        return {\n          artists: [{ name: show.name, uri: show.uri }],\n          durationMs: episode.duration_ms,\n          id: episode.id,\n          image: getItemImage(episode),\n          name: episode.name,\n          uri: episode.uri,\n        };\n      }\n      default: {\n        const track = await getTrack(token, id);\n\n        return getTrackInfo(track);\n      }\n    }\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error('PreloadData:', error);\n\n    return null;\n  }\n}\n\nexport function getRepeatState(mode: number): RepeatState {\n  switch (mode) {\n    case 1:\n      return 'context';\n    case 2:\n      return 'track';\n    case 0:\n    default:\n      return 'off';\n  }\n}\n\nexport function getSpotifyLink(uri: string): string {\n  const [, type = '', id = ''] = uri.split(':');\n\n  return `https://open.spotify.com/${type}/${id}`;\n}\n\nexport function getSpotifyLinkTitle(name: string, locale: string): string {\n  return locale.replace('{name}', name);\n}\n\nexport function getSpotifyURIType(uri: string): string {\n  const [, type = ''] = uri.split(':');\n\n  return type;\n}\n\nexport function getTrackInfo(track: Spotify.Track | SpotifyApi.TrackObjectFull): SpotifyTrack {\n  const { album, artists, duration_ms, id, name, uri } = track;\n\n  return {\n    artists,\n    durationMs: duration_ms,\n    id: id ?? '',\n    image: getItemImage(album),\n    name,\n    uri,\n  };\n}\n","/* eslint-disable import/extensions */\n/* tslint:disable:object-literal-sort-keys */\nimport { createElement, FunctionComponent } from 'react';\nimport { create, CssLikeObject, NanoRenderer } from 'nano-css';\n// @ts-ignore\nimport { addon as addonJSX } from 'nano-css/addon/jsx.js';\nimport { addon as addonKeyframes } from 'nano-css/addon/keyframes.js';\n// @ts-ignore\nimport { addon as addonNesting } from 'nano-css/addon/nesting.js';\nimport { addon as addonRule } from 'nano-css/addon/rule.js';\n// @ts-ignore\nimport { addon as addonStyle } from 'nano-css/addon/style.js';\n// @ts-ignore\nimport { addon as addonStyled } from 'nano-css/addon/styled.js';\n\nimport { StyledProps } from '~/types';\n\ninterface NanoExtended extends NanoRenderer {\n  styled: (\n    tag: string,\n  ) => (\n    styles: CssLikeObject,\n    dynamicTemplate?: (props: StyledProps) => CssLikeObject,\n    block?: string,\n  ) => FunctionComponent<Partial<StyledProps>>;\n}\n\nconst nano = create({ h: createElement });\n\naddonRule(nano);\naddonKeyframes(nano);\naddonJSX(nano);\naddonStyle(nano);\naddonStyled(nano);\naddonNesting(nano);\n\nconst { keyframes, put, styled } = nano as NanoExtended;\n\nexport const px = (value: string | number): string =>\n  typeof value === 'number' ? `${value}px` : value;\n\nexport { keyframes, put, styled };\n\nexport { type CssLikeObject } from 'nano-css';\n","import { memo, ReactNode } from 'react';\n\nimport { CssLikeObject, px, styled } from '~/modules/styled';\n\nimport { Layout, StyledProps, StylesOptions } from '~/types';\n\ninterface Props {\n  children: ReactNode;\n  layout: Layout;\n  styles: StylesOptions;\n}\n\nconst Wrapper = styled('div')(\n  {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'flex-end',\n    'pointer-events': 'none',\n  },\n  ({ style }: StyledProps) => {\n    let styles: CssLikeObject = {\n      bottom: 0,\n      position: 'absolute',\n      right: 0,\n      width: 'auto',\n    };\n\n    if (style.layout === 'responsive') {\n      styles = {\n        '@media (max-width: 767px)': styles,\n        '@media (min-width: 768px)': {\n          height: px(style.h),\n        },\n      };\n    }\n\n    return {\n      height: px(32),\n      ...styles,\n    };\n  },\n  'ActionsRSWP',\n);\n\nfunction Actions(props: Props) {\n  const { children, layout, styles } = props;\n\n  return (\n    <Wrapper data-component-name=\"Actions\" style={{ h: styles.height, layout }}>\n      {children}\n    </Wrapper>\n  );\n}\n\nexport default memo(Actions);\n","import { memo } from 'react';\n\nimport { CssLikeObject, px, styled } from '~/modules/styled';\n\nimport {\n  CustomComponents,\n  Layout,\n  Locale,\n  SpotifyTrack,\n  StyledProps,\n  StylesOptions,\n} from '~/types';\n\nimport Next from './icons/Next';\nimport Pause from './icons/Pause';\nimport Play from './icons/Play';\nimport Previous from './icons/Previous';\nimport Slider from './Slider';\n\ninterface Props {\n  components?: CustomComponents;\n  devices: JSX.Element | null;\n  durationMs: number;\n  isActive: boolean;\n  isExternalDevice: boolean;\n  isMagnified: boolean;\n  isPlaying: boolean;\n  layout: Layout;\n  locale: Locale;\n  nextTracks: SpotifyTrack[];\n  onChangeRange: (position: number) => void;\n  onClickNext: () => void;\n  onClickPrevious: () => void;\n  onClickTogglePlay: () => void;\n  onToggleMagnify: () => void;\n  position: number;\n  progressMs: number;\n  styles: StylesOptions;\n  volume: JSX.Element | null;\n}\n\nconst Wrapper = styled('div')(\n  {\n    '.rswp__volume': {\n      position: 'absolute',\n      right: 0,\n      top: 0,\n    },\n    '.rswp__devices': {\n      position: 'absolute',\n      left: 0,\n      top: 0,\n    },\n  },\n  ({ style }: StyledProps) => {\n    const isCompactLayout = style.layout === 'compact';\n    const styles: CssLikeObject = {};\n\n    if (isCompactLayout) {\n      styles.padding = px(8);\n    } else {\n      styles.padding = `${px(4)} 0`;\n      styles['@media (max-width: 767px)'] = {\n        padding: px(8),\n      };\n    }\n\n    return styles;\n  },\n  'ControlsRSWP',\n);\n\nconst Buttons = styled('div')(\n  {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    marginBottom: px(8),\n    position: 'relative',\n\n    '> div': {\n      alignItems: 'center',\n      display: 'flex',\n      minWidth: px(32),\n      textAlign: 'center',\n    },\n  },\n  ({ style }: StyledProps) => ({\n    color: style.c,\n  }),\n  'ControlsButtonsRSWP',\n);\n\nconst Button = styled('button')(\n  {\n    alignItems: 'center',\n    display: 'inline-flex',\n    fontSize: px(16),\n    height: px(32),\n    justifyContent: 'center',\n    width: px(32),\n\n    '&:disabled': {\n      cursor: 'default',\n      opacity: 0.6,\n    },\n\n    '&.rswp__toggle': {\n      fontSize: px(32),\n      width: px(48),\n    },\n  },\n  () => ({}),\n  'ControlsButtonRSWP',\n);\n\nfunction Controls(props: Props) {\n  const {\n    components: { leftButton, rightButton } = {},\n    devices,\n    durationMs,\n    isActive,\n    isExternalDevice,\n    isMagnified,\n    isPlaying,\n    layout,\n    locale,\n    nextTracks,\n    onChangeRange,\n    onClickNext,\n    onClickPrevious,\n    onClickTogglePlay,\n    onToggleMagnify,\n    position,\n    progressMs,\n    styles,\n    volume,\n  } = props;\n\n  const { color } = styles;\n\n  return (\n    <Wrapper data-component-name=\"Controls\" data-playing={isPlaying} style={{ layout }}>\n      <Buttons style={{ c: color }}>\n        {devices && <div className=\"rswp__devices\">{devices}</div>}\n        <div>{leftButton}</div>\n        <div>\n          <Button\n            aria-label={locale.previous}\n            className=\"ButtonRSWP\"\n            disabled={!isActive && !isExternalDevice}\n            onClick={onClickPrevious}\n            title={locale.previous}\n            type=\"button\"\n          >\n            <Previous />\n          </Button>\n        </div>\n        <div>\n          <Button\n            aria-label={isPlaying ? locale.pause : locale.play}\n            className=\"ButtonRSWP rswp__toggle\"\n            onClick={onClickTogglePlay}\n            title={isPlaying ? locale.pause : locale.play}\n            type=\"button\"\n          >\n            {isPlaying ? <Pause /> : <Play />}\n          </Button>\n        </div>\n        <div>\n          <Button\n            aria-label={locale.next}\n            className=\"ButtonRSWP\"\n            disabled={!nextTracks.length && !isActive && !isExternalDevice}\n            onClick={onClickNext}\n            title={locale.next}\n            type=\"button\"\n          >\n            <Next />\n          </Button>\n        </div>\n        <div>{rightButton}</div>\n        {volume && <div className=\"rswp__volume\">{volume}</div>}\n      </Buttons>\n      <Slider\n        durationMs={durationMs}\n        isMagnified={isMagnified}\n        onChangeRange={onChangeRange}\n        onToggleMagnify={onToggleMagnify}\n        position={position}\n        progressMs={progressMs}\n        styles={styles}\n      />\n    </Wrapper>\n  );\n}\n\nexport default memo(Controls);\n","export default function Next(props: any) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\n      <path\n        d=\"M53.486 0a3.2 3.2 0 0 0-3.2 3.2v23.543L4.8.489A3.2 3.2 0 0 0 0 3.255V60.74a3.2 3.2 0 0 0 4.8 2.774l45.486-26.262V60.8a3.2 3.2 0 0 0 3.2 3.2H60.8a3.2 3.2 0 0 0 3.2-3.2V3.2A3.2 3.2 0 0 0 60.8 0h-7.314Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","export default function Pause(props: any) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\n      <path\n        d=\"M32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0Zm-5.4 18h-5.2a1.4 1.4 0 0 0-1.4 1.4v25.2a1.4 1.4 0 0 0 1.4 1.4h5.2a1.4 1.4 0 0 0 1.4-1.4V19.4a1.4 1.4 0 0 0-1.4-1.4Zm16 0h-5.2a1.4 1.4 0 0 0-1.4 1.4v25.2a1.4 1.4 0 0 0 1.4 1.4h5.2a1.4 1.4 0 0 0 1.4-1.4V19.4a1.4 1.4 0 0 0-1.4-1.4Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","export default function Play(props: any) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\n      <path\n        d=\"M32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0Zm-7.61 18.188c-.435.251-.702.715-.701 1.216v25.194a1.402 1.402 0 0 0 2.104 1.214L47.61 33.214a1.402 1.402 0 0 0 0-2.428L25.793 18.188c-.435-.25-.97-.25-1.404 0Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","export default function Previous(props: any) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\n      <path\n        d=\"M10.514 0a3.2 3.2 0 0 1 3.2 3.2v23.543L59.2.489A3.2 3.2 0 0 1 64 3.255V60.74a3.2 3.2 0 0 1-4.8 2.774L13.714 37.253V60.8a3.2 3.2 0 0 1-3.2 3.2H3.2A3.2 3.2 0 0 1 0 60.8V3.2A3.2 3.2 0 0 1 3.2 0h7.314Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","import { memo } from 'react';\nimport RangeSlider, { RangeSliderPosition } from '@gilbarbara/react-range-slider';\n\nimport { millisecondsToTime } from '~/modules/helpers';\nimport { px, styled } from '~/modules/styled';\n\nimport { StyledProps, StylesOptions } from '~/types';\n\ninterface Props {\n  durationMs: number;\n  isMagnified: boolean;\n  onChangeRange: (position: number) => void;\n  onToggleMagnify: () => void;\n  position: number;\n  progressMs: number;\n  styles: StylesOptions;\n}\n\nconst Wrapper = styled('div')(\n  {\n    alignItems: 'center',\n    display: 'flex',\n    fontSize: px(12),\n    transition: 'height 0.3s',\n    zIndex: 10,\n  },\n  ({ style }: StyledProps) => ({\n    '[class^=\"rswp_\"]': {\n      color: style.c,\n      lineHeight: 1,\n      minWidth: px(32),\n    },\n\n    '.rswp_progress': {\n      marginRight: px(style.sliderHeight + 6),\n      textAlign: 'right',\n    },\n\n    '.rswp_duration': {\n      marginLeft: px(style.sliderHeight + 6),\n      textAlign: 'left',\n    },\n  }),\n  'SliderRSWP',\n);\n\nfunction Slider(props: Props) {\n  const { durationMs, isMagnified, onChangeRange, onToggleMagnify, position, progressMs, styles } =\n    props;\n\n  const handleChangeRange = async ({ x }: RangeSliderPosition) => {\n    onChangeRange(x);\n  };\n\n  const handleSize = styles.sliderHeight + 6;\n\n  return (\n    <Wrapper\n      data-component-name=\"Slider\"\n      data-position={position}\n      onMouseEnter={onToggleMagnify}\n      onMouseLeave={onToggleMagnify}\n      style={{\n        c: styles.color,\n        sliderHeight: styles.sliderHeight,\n      }}\n    >\n      <div className=\"rswp_progress\">{millisecondsToTime(progressMs)}</div>\n      <RangeSlider\n        axis=\"x\"\n        className=\"slider\"\n        data-component-name=\"progress-bar\"\n        onChange={handleChangeRange}\n        styles={{\n          options: {\n            thumbBorder: 0,\n            thumbBorderRadius: styles.sliderHandleBorderRadius,\n            thumbColor: styles.sliderHandleColor,\n            thumbSize: isMagnified ? handleSize + 4 : handleSize,\n            height: isMagnified ? styles.sliderHeight + 4 : styles.sliderHeight,\n            padding: 0,\n            rangeColor: styles.sliderColor,\n            trackBorderRadius: styles.sliderTrackBorderRadius,\n            trackColor: styles.sliderTrackColor,\n          },\n        }}\n        x={position}\n        xMax={100}\n        xMin={0}\n        xStep={0.1}\n      />\n      <div className=\"rswp_duration\">{millisecondsToTime(durationMs)}</div>\n    </Wrapper>\n  );\n}\n\nexport default memo(Slider);\n","import { MouseEvent, useCallback, useState } from 'react';\nimport { CssLikeObject } from 'nano-css';\n\nimport { px, styled } from '~/modules/styled';\n\nimport { Layout, Locale, SpotifyDevice, StyledProps, StylesOptions } from '~/types';\n\nimport ClickOutside from './ClickOutside';\nimport DevicesIcon from './icons/Devices';\nimport DevicesComputerIcon from './icons/DevicesComputer';\nimport DevicesMobileIcon from './icons/DevicesMobile';\nimport DevicesSpeakerIcon from './icons/DevicesSpeaker';\n\ninterface Props {\n  currentDeviceId?: string;\n  deviceId?: string;\n  devices: SpotifyDevice[];\n  layout: Layout;\n  locale: Locale;\n  onClickDevice: (deviceId: string) => any;\n  open: boolean;\n  playerPosition: string;\n  styles: StylesOptions;\n}\n\ninterface DeviceList {\n  currentDevice: SpotifyDevice | null;\n  otherDevices: SpotifyDevice[];\n}\n\nconst Wrapper = styled('div')(\n  {\n    'pointer-events': 'all',\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    position: 'relative',\n    zIndex: 20,\n\n    '> div': {\n      backgroundColor: '#000',\n      borderRadius: px(8),\n      color: '#fff',\n      filter: 'drop-shadow(1px 1px 6px rgba(0, 0, 0, 0.5))',\n      fontSize: px(14),\n      padding: px(16),\n      position: 'absolute',\n      textAlign: 'left',\n\n      '> p': {\n        fontWeight: 'bold',\n        marginBottom: px(8),\n        marginTop: px(16),\n        whiteSpace: 'nowrap',\n      },\n\n      button: {\n        alignItems: 'center',\n        display: 'flex',\n        whiteSpace: 'nowrap',\n        width: '100%',\n\n        '&:not(:last-of-type)': {\n          marginBottom: px(12),\n        },\n\n        span: {\n          display: 'inline-block',\n          marginLeft: px(4),\n        },\n      },\n\n      '> span': {\n        background: 'transparent',\n        borderLeft: `6px solid transparent`,\n        borderRight: `6px solid transparent`,\n        content: '\"\"',\n        display: 'block',\n        height: 0,\n        position: 'absolute',\n        width: 0,\n      },\n    },\n\n    '> button': {\n      alignItems: 'center',\n      display: 'flex',\n      fontSize: px(24),\n      height: px(32),\n      justifyContent: 'center',\n      width: px(32),\n    },\n  },\n  ({ style }: StyledProps) => {\n    const isCompact = style.layout === 'compact';\n    const divStyles: CssLikeObject = isCompact\n      ? {\n          bottom: '120%',\n          left: 0,\n        }\n      : {\n          [style.p]: '120%',\n          left: 0,\n\n          '@media (min-width: 768px)': {\n            left: 'auto',\n            right: 0,\n          },\n        };\n    const spanStyles: CssLikeObject = isCompact\n      ? {\n          bottom: `-${px(6)}`,\n          borderTop: `6px solid #000`,\n          left: px(10),\n        }\n      : {\n          [style.p === 'top' ? 'border-bottom' : 'border-top']: `6px solid #000`,\n          [style.p]: '-6px',\n          left: px(10),\n\n          '@media (min-width: 768px)': {\n            left: 'auto',\n            right: px(10),\n          },\n        };\n\n    return {\n      '> button': {\n        color: style.c,\n      },\n\n      '> div': {\n        ...divStyles,\n\n        '> span': spanStyles,\n      },\n    };\n  },\n  'DevicesRSWP',\n);\n\nconst ListHeader = styled('div')({\n  p: {\n    whiteSpace: 'nowrap',\n\n    '&:nth-of-type(1)': {\n      fontWeight: 'bold',\n      marginBottom: px(8),\n    },\n\n    '&:nth-of-type(2)': {\n      alignItems: 'center',\n      display: 'flex',\n\n      span: {\n        display: 'inline-block',\n        marginLeft: px(4),\n      },\n    },\n  },\n});\n\nfunction getDeviceIcon(type: string) {\n  if (type.toLowerCase().includes('speaker')) {\n    return <DevicesSpeakerIcon />;\n  }\n\n  if (type.toLowerCase().includes('computer')) {\n    return <DevicesComputerIcon />;\n  }\n\n  return <DevicesMobileIcon />;\n}\n\nexport default function Devices(props: Props) {\n  const {\n    currentDeviceId,\n    deviceId,\n    devices = [],\n    layout,\n    locale,\n    onClickDevice,\n    open,\n    playerPosition,\n    styles: { color },\n  } = props;\n  const [isOpen, setOpen] = useState(open);\n\n  const handleClickSetDevice = (event: MouseEvent<HTMLElement>) => {\n    const { dataset } = event.currentTarget;\n\n    if (dataset.id) {\n      onClickDevice(dataset.id);\n\n      setOpen(false);\n    }\n  };\n\n  const handleClickToggleList = useCallback(() => {\n    setOpen(s => !s);\n  }, []);\n\n  const { currentDevice, otherDevices } = devices.reduce<DeviceList>(\n    (acc, device) => {\n      if (device.id === currentDeviceId) {\n        acc.currentDevice = device;\n      } else {\n        acc.otherDevices.push(device);\n      }\n\n      return acc;\n    },\n    { currentDevice: null, otherDevices: [] },\n  );\n\n  let icon = <DevicesIcon />;\n\n  if (deviceId && currentDevice && currentDevice.id !== deviceId) {\n    icon = getDeviceIcon(currentDevice.type);\n  }\n\n  return (\n    <ClickOutside isActive={isOpen} onClick={handleClickToggleList}>\n      <Wrapper\n        data-component-name=\"Devices\"\n        data-device-id={currentDeviceId}\n        style={{\n          c: color,\n          layout,\n          p: playerPosition,\n        }}\n      >\n        {!!devices.length && (\n          <>\n            {isOpen && (\n              <div>\n                {currentDevice && (\n                  <ListHeader>\n                    <p>{locale.currentDevice}</p>\n                    <p>\n                      {getDeviceIcon(currentDevice.type)}\n                      <span>{currentDevice.name}</span>\n                    </p>\n                  </ListHeader>\n                )}\n                {!!otherDevices.length && (\n                  <>\n                    <p>{locale.otherDevices}</p>\n                    {otherDevices.map(device => (\n                      <button\n                        key={device.id}\n                        aria-label={device.name}\n                        className=\"ButtonRSWP\"\n                        data-id={device.id}\n                        onClick={handleClickSetDevice}\n                        type=\"button\"\n                      >\n                        {getDeviceIcon(device.type)}\n                        <span>{device.name}</span>\n                      </button>\n                    ))}\n                  </>\n                )}\n                <span />\n              </div>\n            )}\n            <button\n              aria-label={locale.devices}\n              className=\"ButtonRSWP\"\n              onClick={handleClickToggleList}\n              title={locale.devices}\n              type=\"button\"\n            >\n              {icon}\n            </button>\n          </>\n        )}\n      </Wrapper>\n    </ClickOutside>\n  );\n}\n","import { memo, ReactNode, useEffect, useRef } from 'react';\n\ninterface Props {\n  children: ReactNode;\n  isActive: boolean;\n  onClick: () => void;\n}\n\nfunction ClickOutside(props: Props) {\n  const { children, isActive, onClick, ...rest } = props;\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const isTouch = useRef(false);\n\n  const handleClick = useRef((event: MouseEvent | TouchEvent) => {\n    const container = containerRef.current;\n\n    if (event.type === 'touchend') {\n      isTouch.current = true;\n    }\n\n    if (event.type === 'click' && isTouch.current) {\n      return;\n    }\n\n    if (container && !container.contains(event.target as Node)) {\n      onClick();\n    }\n  });\n\n  useEffect(() => {\n    const { current } = handleClick;\n\n    if (isActive) {\n      document.addEventListener('touchend', current, true);\n      document.addEventListener('click', current, true);\n    }\n\n    return () => {\n      document.removeEventListener('touchend', current, true);\n      document.removeEventListener('click', current, true);\n    };\n  }, [isActive]);\n\n  return (\n    <div ref={containerRef} {...rest}>\n      {children}\n    </div>\n  );\n}\n\nexport default memo(ClickOutside);\n","export default function DevicesIcon(props: any) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\n      <path\n        d=\"M57 4c3.864 0 7 3.136 7 7v42a7 7 0 0 1-7 7H31a7 7 0 0 1-7-7V11c0-3.864 3.136-7 7-7h26ZM16 54v6H8v-6h8Zm41-44H31a1 1 0 0 0-1 1v42a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V11a1 1 0 0 0-1-1ZM44 32a8 8 0 1 1 0 16 8 8 0 0 1 0-16ZM16 4v6H7a1 1 0 0 0-1 1v26a1 1 0 0 0 1 1h9v6H7a7 7 0 0 1-7-7V11c0-3.864 3.136-7 7-7h9Zm28 12a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","export default function DevicesComputerIcon(props: any) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\n      <path\n        d=\"M7.226 10.323a7.228 7.228 0 0 1 7.226-7.226h35.096a7.228 7.228 0 0 1 7.226 7.226V37.16a7.226 7.226 0 0 1-7.226 7.226H14.452a7.226 7.226 0 0 1-7.226-7.226V10.323Zm7.226-1.033c-.57 0-1.033.462-1.033 1.033V37.16c0 .57.463 1.033 1.033 1.033h35.096c.57 0 1.033-.463 1.033-1.033V10.323c0-.57-.463-1.033-1.033-1.033H14.452ZM0 57.806a3.097 3.097 0 0 1 3.097-3.096h57.806a3.097 3.097 0 0 1 0 6.193H3.097A3.097 3.097 0 0 1 0 57.806Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","export default function DevicesMobileIcon(props: any) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\n      <path\n        d=\"M44.8 0a9.6 9.6 0 0 1 9.6 9.6v44.8a9.6 9.6 0 0 1-9.6 9.6H19.2a9.6 9.6 0 0 1-9.6-9.6V9.6A9.6 9.6 0 0 1 19.2 0h25.6Zm0 6.4H19.2A3.2 3.2 0 0 0 16 9.6v44.8a3.2 3.2 0 0 0 3.2 3.2h25.6a3.2 3.2 0 0 0 3.2-3.2V9.6a3.2 3.2 0 0 0-3.2-3.2ZM32 43.2a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","export default function DevicesSpeakerIcon(props: any) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\n      <path\n        d=\"M45 4c3.864 0 7 3.136 7 7v42a7 7 0 0 1-7 7H19a7 7 0 0 1-7-7V11c0-3.864 3.136-7 7-7h26Zm0 6H19a1 1 0 0 0-1 1v42a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V11a1 1 0 0 0-1-1ZM32 32a8 8 0 1 1 0 16 8 8 0 0 1 0-16Zm0-16a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","import { px, styled } from '~/modules/styled';\n\nimport { ComponentsProps, StyledProps } from '~/types';\n\nconst Wrapper = styled('div')(\n  {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    textAlign: 'center',\n    width: '100%',\n  },\n  ({ style }: StyledProps) => ({\n    backgroundColor: style.bgColor,\n    borderTop: `1px solid ${style.errorColor}`,\n    color: style.errorColor,\n    height: px(style.h),\n  }),\n  'ErrorRSWP',\n);\n\nexport default function ErrorMessage({\n  children,\n  styles: { bgColor, errorColor, height },\n}: ComponentsProps) {\n  return (\n    <Wrapper data-component-name=\"ErrorMessage\" style={{ bgColor, errorColor, h: height }}>\n      {children}\n    </Wrapper>\n  );\n}\n","import { memo, ReactNode, useEffect, useRef, useState } from 'react';\nimport { opacify } from 'colorizr';\n\nimport { getBgColor, getSpotifyLink, getSpotifyLinkTitle } from '~/modules/getters';\nimport { usePrevious } from '~/modules/hooks';\nimport { checkTracksStatus, removeTracks, saveTracks } from '~/modules/spotify';\nimport { CssLikeObject, px, styled } from '~/modules/styled';\n\nimport { Layout, Locale, SpotifyTrack, StyledProps, StylesOptions } from '~/types';\n\nimport Favorite from './icons/Favorite';\nimport FavoriteOutline from './icons/FavoriteOutline';\nimport SpotifyLogo from './SpotifyLogo';\n\ninterface Props {\n  hideAttribution: boolean;\n  hideCoverArt: boolean;\n  isActive: boolean;\n  layout: Layout;\n  locale: Locale;\n  onFavoriteStatusChange: (status: boolean) => any;\n  showSaveIcon: boolean;\n  styles: StylesOptions;\n  token: string;\n  track: SpotifyTrack;\n  updateSavedStatus?: (fn: (status: boolean) => any) => any;\n}\n\nconst imageSize = 64;\nconst iconSize = 32;\n\nconst Wrapper = styled('div')(\n  {\n    textAlign: 'left',\n\n    '> a': {\n      display: 'inline-flex',\n      textDecoration: 'none',\n      minHeight: px(64),\n      minWidth: px(64),\n\n      '&:hover': {\n        textDecoration: 'underline',\n      },\n    },\n\n    button: {\n      alignItems: 'center',\n      display: 'flex',\n      fontSize: px(16),\n      height: px(iconSize + 8),\n      justifyContent: 'center',\n      width: px(iconSize),\n    },\n  },\n  ({ style }: StyledProps) => {\n    const isCompactLayout = style.layout === 'compact';\n    const styles: CssLikeObject = {};\n\n    if (isCompactLayout) {\n      styles.borderBottom = `1px solid ${opacify(style.c, 0.6)}`;\n      styles['> a'] = {\n        display: 'flex',\n        margin: '0 auto',\n        maxWidth: px(640),\n        paddingBottom: '100%',\n        position: 'relative',\n\n        img: {\n          display: 'block',\n          bottom: 0,\n          left: 0,\n          maxWidth: '100%',\n          position: 'absolute',\n          right: 0,\n          top: 0,\n        },\n      };\n    } else {\n      styles.alignItems = 'center';\n      styles.display = 'flex';\n      styles.minHeight = px(80);\n      styles['@media (max-width: 767px)'] = {\n        borderBottom: `1px solid ${opacify(style.c, 0.6)}`,\n        paddingLeft: px(8),\n        display: 'none',\n        width: '100%',\n      };\n      styles.img = {\n        height: px(imageSize),\n        width: px(imageSize),\n      };\n      styles['&.rswp__active'] = {\n        '@media (max-width: 767px)': {\n          display: 'flex',\n        },\n      };\n    }\n\n    return {\n      button: {\n        color: style.c,\n\n        '&.rswp__active': {\n          color: style.activeColor,\n        },\n      },\n\n      ...styles,\n    };\n  },\n  'InfoRSWP',\n);\n\nconst ContentWrapper = styled('div')(\n  {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n\n    '> a': {\n      fontSize: px(22),\n      marginTop: px(4),\n    },\n  },\n  ({ style }: StyledProps) => {\n    const isCompactLayout = style.layout === 'compact';\n    const styles: CssLikeObject = {};\n\n    if (isCompactLayout) {\n      styles.padding = px(8);\n      styles.width = '100%';\n    } else {\n      styles.minHeight = px(imageSize);\n\n      if (!style.hideCoverArt) {\n        styles.marginLeft = px(8);\n        styles.width = `calc(100% - ${px(imageSize + 8)})`;\n      } else {\n        styles.width = '100%';\n      }\n    }\n\n    return styles;\n  },\n  'ContentWrapperRSWP',\n);\n\nconst Content = styled('div')(\n  {\n    display: 'flex',\n    justifyContent: 'start',\n\n    '[data-type=\"title-artist-wrapper\"]': {\n      overflow: 'hidden',\n\n      div: {\n        marginLeft: `-${px(8)}`,\n        whiteSpace: 'nowrap',\n      },\n    },\n\n    p: {\n      fontSize: px(14),\n      lineHeight: 1.3,\n      paddingLeft: px(8),\n      paddingRight: px(8),\n      width: '100%',\n\n      '&:nth-of-type(1)': {\n        alignItems: 'center',\n        display: 'inline-flex',\n      },\n\n      '&:nth-of-type(2)': {\n        fontSize: px(12),\n      },\n    },\n\n    span: {\n      display: 'inline-block',\n    },\n  },\n  ({ style }: StyledProps) => {\n    const maskImageColor = getBgColor(style.bgColor, style.trackNameColor);\n\n    return {\n      '[data-type=\"title-artist-wrapper\"]': {\n        color: style.trackNameColor,\n        maxWidth: `calc(100% - ${px(style.showSaveIcon ? iconSize : 0)})`,\n\n        div: {\n          '-webkit-mask-image': `linear-gradient(90deg,transparent 0, ${maskImageColor} 6px, ${maskImageColor} calc(100% - 12px),transparent)`,\n        },\n      },\n      p: {\n        '&:nth-of-type(1)': {\n          color: style.trackNameColor,\n\n          a: {\n            color: style.trackNameColor,\n          },\n        },\n\n        '&:nth-of-type(2)': {\n          color: style.trackArtistColor,\n\n          a: {\n            color: style.trackArtistColor,\n          },\n        },\n      },\n    };\n  },\n  'ContentRSWP',\n);\n\nfunction Info(props: Props) {\n  const {\n    hideAttribution,\n    hideCoverArt,\n    isActive,\n    layout,\n    locale,\n    onFavoriteStatusChange,\n    showSaveIcon,\n    styles: { activeColor, bgColor, color, height, trackArtistColor, trackNameColor },\n    token,\n    track: { artists = [], id, image, name, uri },\n    updateSavedStatus,\n  } = props;\n  const [isSaved, setIsSaved] = useState(false);\n  const isMounted = useRef(false);\n  const previousId = usePrevious(id);\n  const isCompactLayout = layout === 'compact';\n\n  const updateState = (state: boolean) => {\n    if (!isMounted.current) {\n      return;\n    }\n\n    setIsSaved(state);\n  };\n\n  const setStatus = async () => {\n    if (!isMounted.current) {\n      return;\n    }\n\n    if (updateSavedStatus && id) {\n      updateSavedStatus((newStatus: boolean) => {\n        updateState(newStatus);\n      });\n    }\n\n    const status = await checkTracksStatus(token, id);\n    const [isFavorite] = status || [false];\n\n    updateState(isFavorite);\n    onFavoriteStatusChange(isSaved);\n  };\n\n  useEffect(() => {\n    isMounted.current = true;\n\n    if (showSaveIcon && id) {\n      setStatus();\n    }\n\n    return () => {\n      isMounted.current = false;\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (showSaveIcon && previousId !== id && id) {\n      updateState(false);\n\n      setStatus();\n    }\n  });\n\n  const handleClickIcon = async () => {\n    if (isSaved) {\n      await removeTracks(token, id);\n      updateState(false);\n    } else {\n      await saveTracks(token, id);\n      updateState(true);\n    }\n\n    onFavoriteStatusChange(!isSaved);\n  };\n\n  const title = getSpotifyLinkTitle(name, locale.title);\n  let favorite;\n\n  if (showSaveIcon && id) {\n    favorite = (\n      <button\n        aria-label={isSaved ? locale.removeTrack : locale.saveTrack}\n        className={`ButtonRSWP${isSaved ? ' rswp__active' : ''}`}\n        onClick={handleClickIcon}\n        title={isSaved ? locale.removeTrack : locale.saveTrack}\n        type=\"button\"\n      >\n        {isSaved ? <Favorite /> : <FavoriteOutline />}\n      </button>\n    );\n  }\n\n  const content: Record<string, ReactNode> = {};\n  const classes = [];\n\n  if (isActive) {\n    classes.push('rswp__active');\n  }\n\n  if (isCompactLayout) {\n    content.image = <img alt={name} src={image} />;\n  }\n\n  if (!id) {\n    return <div />;\n  }\n\n  return (\n    <Wrapper\n      className={classes.join(' ')}\n      data-component-name=\"Info\"\n      style={{\n        activeColor,\n        c: color,\n        h: height,\n        layout,\n        showSaveIcon,\n      }}\n    >\n      {!hideCoverArt && (\n        <a\n          aria-label={title}\n          href={getSpotifyLink(uri)}\n          rel=\"noreferrer\"\n          target=\"_blank\"\n          title={title}\n        >\n          <img alt={name} src={image} />\n        </a>\n      )}\n      <ContentWrapper\n        style={{\n          hideCoverArt,\n          layout,\n          showSaveIcon,\n        }}\n      >\n        {!!name && (\n          <Content\n            style={{\n              bgColor,\n              layout,\n              showSaveIcon,\n              trackArtistColor,\n              trackNameColor,\n            }}\n          >\n            <div data-type=\"title-artist-wrapper\">\n              <div>\n                <p>\n                  <span>\n                    <a\n                      aria-label={title}\n                      href={getSpotifyLink(uri)}\n                      rel=\"noreferrer\"\n                      target=\"_blank\"\n                      title={title}\n                    >\n                      {name}\n                    </a>\n                  </span>\n                </p>\n                <p title={artists.map(d => d.name).join(', ')}>\n                  {artists.map((artist, index) => {\n                    const artistTitle = getSpotifyLinkTitle(artist.name, locale.title);\n\n                    return (\n                      <span key={artist.uri}>\n                        {index ? ', ' : ''}\n                        <a\n                          aria-label={artistTitle}\n                          href={getSpotifyLink(artist.uri)}\n                          rel=\"noreferrer\"\n                          target=\"_blank\"\n                          title={artistTitle}\n                        >\n                          {artist.name}\n                        </a>\n                      </span>\n                    );\n                  })}\n                </p>\n              </div>\n            </div>\n            {favorite}\n          </Content>\n        )}\n        {!hideAttribution && (\n          <a\n            aria-label=\"Play on Spotify\"\n            href={getSpotifyLink(uri)}\n            rel=\"noreferrer\"\n            target=\"_blank\"\n          >\n            <SpotifyLogo bgColor={bgColor} />\n          </a>\n        )}\n      </ContentWrapper>\n    </Wrapper>\n  );\n}\n\nexport default memo(Info);\n","import { useEffect, useRef, useState } from 'react';\n\nexport function useMediaQuery(input: string): boolean {\n  const getMatches = (query: string): boolean => {\n    return window.matchMedia(query).matches;\n  };\n\n  const [matches, setMatches] = useState<boolean>(getMatches(input));\n\n  function handleChange() {\n    setMatches(getMatches(input));\n  }\n\n  useEffect(() => {\n    const matchMedia = window.matchMedia(input);\n\n    // Triggered at the first client-side load and if query changes\n    handleChange();\n\n    try {\n      matchMedia.addEventListener('change', handleChange);\n      /* c8 ignore next 4 */\n    } catch {\n      // Safari isn't supporting matchMedia.addEventListener\n      matchMedia.addListener(handleChange);\n    }\n\n    return () => {\n      try {\n        matchMedia.removeEventListener('change', handleChange);\n        /* c8 ignore next 4 */\n      } catch {\n        // Safari isn't supporting matchMedia.removeEventListener\n        matchMedia.removeListener(handleChange);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [input]);\n\n  return matches;\n}\n\nexport function usePrevious<T>(value: T): T {\n  const ref: any = useRef<T>();\n\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n\n  return ref.current;\n}\n","export default function Favorite(props: any) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\n      <path\n        d=\"M63.673 16.52A17.676 17.676 0 0 0 49.197 2.563c-5.4-.861-10.891.852-14.844 4.63a3.43 3.43 0 0 1-4.672 0C22.956.689 12.305.62 5.498 7.039c-6.808 6.419-7.366 17.055-1.268 24.15l24.246 28.894a4.623 4.623 0 0 0 7.078 0L59.8 31.19a17.328 17.328 0 0 0 3.873-14.66v-.008Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","export default function FavoriteOutline(props: any) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\n      <path\n        d=\"M5.944 7.206C13.271.3 24.723.34 31.999 7.3A18.924 18.924 0 0 1 48.02 2.32h.008a19.068 19.068 0 0 1 15.617 15.071v.013A18.759 18.759 0 0 1 59.47 33.26L37.573 59.353a7.288 7.288 0 0 1-8.642 1.916 7.276 7.276 0 0 1-2.498-1.912l-21.901-26.1c-6.55-7.671-5.93-19.131 1.408-26.051h.004Zm13.04 1.04a12.726 12.726 0 0 0-9.737 20.997l.021.02 21.905 26.105c.316.372.84.488 1.284.285.143-.066.27-.164.372-.285l21.934-26.137a12.565 12.565 0 0 0 2.808-10.625 12.875 12.875 0 0 0-10.534-10.17 12.714 12.714 0 0 0-10.785 3.37l-.029.029a6.198 6.198 0 0 1-8.444 0l-.037-.033a12.727 12.727 0 0 0-8.758-3.556Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","import { textColor } from 'colorizr';\n\ninterface Props {\n  bgColor: string;\n}\n\nexport default function SpotifyLogo({ bgColor, ...rest }: Props) {\n  return (\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 512 160\" width=\"3.2em\" {...rest}>\n      <path\n        d=\"M79.655 0C35.664 0 0 35.663 0 79.654c0 43.993 35.664 79.653 79.655 79.653 43.996 0 79.656-35.66 79.656-79.653 0-43.988-35.66-79.65-79.657-79.65L79.655 0Zm36.53 114.884a4.963 4.963 0 0 1-6.83 1.646c-18.702-11.424-42.246-14.011-69.973-7.676a4.967 4.967 0 0 1-5.944-3.738 4.958 4.958 0 0 1 3.734-5.945c30.343-6.933 56.37-3.948 77.367 8.884a4.965 4.965 0 0 1 1.645 6.83Zm9.75-21.689c-1.799 2.922-5.622 3.845-8.543 2.047-21.41-13.16-54.049-16.972-79.374-9.284a6.219 6.219 0 0 1-7.75-4.138 6.22 6.22 0 0 1 4.141-7.745c28.929-8.778 64.892-4.526 89.48 10.583 2.92 1.798 3.843 5.622 2.045 8.538Zm.836-22.585C101.1 55.362 58.742 53.96 34.231 61.4c-3.936 1.194-8.098-1.028-9.29-4.964a7.453 7.453 0 0 1 4.965-9.294c28.137-8.542 74.912-6.892 104.469 10.655a7.441 7.441 0 0 1 2.606 10.209c-2.092 3.54-6.677 4.707-10.206 2.605h-.004Zm89.944 2.922c-13.754-3.28-16.198-5.581-16.198-10.418 0-4.57 4.299-7.645 10.7-7.645 6.202 0 12.347 2.336 18.796 7.143.19.145.437.203.675.165a.888.888 0 0 0 .6-.367l6.715-9.466a.903.903 0 0 0-.171-1.225c-7.676-6.157-16.313-9.15-26.415-9.15-14.848 0-25.225 8.911-25.225 21.662 0 13.673 8.95 18.515 24.417 22.252 13.155 3.031 15.38 5.57 15.38 10.11 0 5.032-4.49 8.161-11.718 8.161-8.028 0-14.582-2.71-21.906-9.046a.932.932 0 0 0-.656-.218.89.89 0 0 0-.619.313l-7.533 8.96a.906.906 0 0 0 .086 1.256c8.522 7.61 19.004 11.624 30.323 11.624 16 0 26.339-8.742 26.339-22.277.028-11.421-6.81-17.746-23.561-21.821l-.029-.013Zm59.792-13.564c-6.934 0-12.622 2.732-17.321 8.33v-6.3c0-.498-.4-.903-.894-.903h-12.318a.899.899 0 0 0-.894.902v70.009c0 .494.4.903.894.903h12.318a.901.901 0 0 0 .894-.903v-22.097c4.699 5.26 10.387 7.838 17.32 7.838 12.89 0 25.94-9.92 25.94-28.886.019-18.97-13.032-28.894-25.93-28.894l-.01.001Zm11.614 28.893c0 9.653-5.945 16.397-14.468 16.397-8.418 0-14.772-7.048-14.772-16.397 0-9.35 6.354-16.397 14.772-16.397 8.38 0 14.468 6.893 14.468 16.396Zm47.759-28.893c-16.598 0-29.601 12.78-29.601 29.1 0 16.143 12.917 28.784 29.401 28.784 16.655 0 29.696-12.736 29.696-28.991 0-16.2-12.955-28.89-29.496-28.89v-.003Zm0 45.385c-8.827 0-15.485-7.096-15.485-16.497 0-9.444 6.43-16.298 15.285-16.298 8.884 0 15.58 7.093 15.58 16.504 0 9.443-6.468 16.291-15.38 16.291Zm64.937-44.258h-13.554V47.24c0-.497-.4-.902-.894-.902H374.05a.906.906 0 0 0-.904.902v13.855h-5.916a.899.899 0 0 0-.894.902v10.584a.9.9 0 0 0 .894.903h5.916v27.39c0 11.062 5.508 16.674 16.38 16.674 4.413 0 8.075-.914 11.528-2.873a.88.88 0 0 0 .457-.78v-10.083a.896.896 0 0 0-.428-.76.873.873 0 0 0-.876-.039c-2.368 1.19-4.66 1.741-7.229 1.741-3.947 0-5.716-1.798-5.716-5.812V73.49h13.554a.899.899 0 0 0 .894-.903V62.003a.873.873 0 0 0-.884-.903l-.01-.005Zm47.217.054v-1.702c0-5.006 1.921-7.238 6.22-7.238 2.57 0 4.633.51 6.945 1.28a.895.895 0 0 0 1.18-.858l-.001-10.377a.891.891 0 0 0-.637-.865c-2.435-.726-5.555-1.47-10.235-1.47-11.367 0-17.388 6.405-17.388 18.516v2.606h-5.916a.906.906 0 0 0-.904.902v10.638c0 .497.41.903.904.903h5.916v42.237c0 .504.41.904.904.904h12.308c.504 0 .904-.4.904-.904V73.487h11.5l17.616 42.234c-1.998 4.433-3.967 5.317-6.65 5.317-2.168 0-4.46-.646-6.79-1.93a.98.98 0 0 0-.714-.067.896.896 0 0 0-.533.485l-4.175 9.16a.9.9 0 0 0 .39 1.17c4.356 2.359 8.284 3.367 13.145 3.367 9.093 0 14.125-4.242 18.548-15.637l21.364-55.204a.88.88 0 0 0-.095-.838.878.878 0 0 0-.733-.392h-12.822a.901.901 0 0 0-.856.605l-13.136 37.509-14.382-37.534a.898.898 0 0 0-.837-.58h-21.04v-.003Zm-27.375-.054h-12.318a.907.907 0 0 0-.903.902v53.724c0 .504.409.904.903.904h12.318c.495 0 .904-.4.904-.904v-53.72a.9.9 0 0 0-.904-.903v-.003Zm-6.088-24.464c-4.88 0-8.836 3.95-8.836 8.828a8.835 8.835 0 0 0 8.836 8.836c4.88 0 8.827-3.954 8.827-8.836a8.83 8.83 0 0 0-8.827-8.828Z\"\n        fill={textColor(bgColor)}\n      />\n    </svg>\n  );\n}\n","import { keyframes, px, styled } from '~/modules/styled';\n\nimport { ComponentsProps, StyledProps } from '~/types';\n\nconst Wrapper = styled('div')(\n  {\n    alignItems: 'center',\n    display: 'flex',\n    jsutifyContent: 'center',\n    position: 'relative',\n\n    '> div': {\n      borderRadius: '50%',\n      borderStyle: 'solid',\n      borderWidth: 0,\n      boxSizing: 'border-box',\n      height: 0,\n      left: '50%',\n      position: 'absolute',\n      top: '50%',\n      transform: 'translate(-50%, -50%)',\n      width: 0,\n    },\n  },\n  ({ style }: StyledProps) => {\n    const pulse = keyframes!({\n      '0%': {\n        height: 0,\n        width: 0,\n      },\n\n      '30%': {\n        borderWidth: px(8),\n        height: px(style.loaderSize),\n        opacity: 1,\n        width: px(style.loaderSize),\n      },\n\n      '100%': {\n        borderWidth: 0,\n        height: px(style.loaderSize),\n        opacity: 0,\n        width: px(style.loaderSize),\n      },\n    });\n\n    return {\n      height: px(style.h),\n\n      '> div': {\n        animation: `${pulse} 1.15s infinite cubic-bezier(0.215, 0.61, 0.355, 1)`,\n        borderColor: style.loaderColor,\n        height: px(style.loaderSize),\n        width: px(style.loaderSize),\n      },\n    };\n  },\n  'LoaderRSWP',\n);\n\nexport default function Loader({ styles: { height, loaderColor, loaderSize } }: ComponentsProps) {\n  return (\n    <Wrapper data-component-name=\"Loader\" style={{ h: height, loaderColor, loaderSize }}>\n      <div />\n    </Wrapper>\n  );\n}\n","import { forwardRef } from 'react';\n\nimport { px } from '~/modules/styled';\n\nimport { ComponentsProps } from '~/types';\n\nconst Player = forwardRef<HTMLDivElement, ComponentsProps>((props, ref) => {\n  const {\n    children,\n    styles: { bgColor, height },\n    ...rest\n  } = props;\n\n  return (\n    <div\n      ref={ref}\n      className=\"PlayerRSWP\"\n      data-component-name=\"Player\"\n      style={{ background: bgColor, minHeight: px(height) }}\n      {...rest}\n    >\n      {children}\n    </div>\n  );\n});\n\nexport default Player;\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport RangeSlider, { RangeSliderPosition } from '@gilbarbara/react-range-slider';\n\nimport { useMediaQuery, usePrevious } from '~/modules/hooks';\nimport { CssLikeObject, px, styled } from '~/modules/styled';\n\nimport { Layout, Locale, StyledProps, StylesOptions } from '~/types';\n\nimport ClickOutside from './ClickOutside';\nimport VolumeHigh from './icons/VolumeHigh';\nimport VolumeLow from './icons/VolumeLow';\nimport VolumeMid from './icons/VolumeMid';\nimport VolumeMute from './icons/VolumeMute';\n\ninterface Props {\n  inlineVolume: boolean;\n  layout: Layout;\n  locale: Locale;\n  playerPosition: string;\n  setVolume: (volume: number) => any;\n  styles: StylesOptions;\n  volume: number;\n}\n\nconst WrapperWithToggle = styled('div')(\n  {\n    display: 'none',\n    'pointer-events': 'all',\n    position: 'relative',\n    zIndex: 20,\n\n    '> div': {\n      alignItems: 'center',\n      backgroundColor: '#000',\n      borderRadius: px(4),\n      color: '#fff',\n      display: 'flex',\n      filter: 'drop-shadow(1px 1px 6px rgba(0, 0, 0, 0.5))',\n      flexDirection: 'column',\n      left: '-4px',\n      padding: px(16),\n      position: 'absolute',\n\n      '> span': {\n        background: 'transparent',\n        borderLeft: `6px solid transparent`,\n        borderRight: `6px solid transparent`,\n        content: '\"\"',\n        display: 'block',\n        height: 0,\n        position: 'absolute',\n        width: 0,\n      },\n    },\n\n    '> button': {\n      alignItems: 'center',\n      display: 'flex',\n      fontSize: px(24),\n      height: px(32),\n      justifyContent: 'center',\n      width: px(32),\n    },\n\n    '@media (any-pointer: fine)': {\n      display: 'block',\n    },\n  },\n  ({ style }: StyledProps) => {\n    const isCompact = style.layout === 'compact';\n    const spanStyles: CssLikeObject = isCompact\n      ? {\n          bottom: `-${px(6)}`,\n          borderTop: `6px solid #000`,\n        }\n      : {\n          [style.p === 'top' ? 'border-bottom' : 'border-top']: `6px solid #000`,\n          [style.p]: '-6px',\n        };\n\n    return {\n      '> button': {\n        color: style.c,\n      },\n      '> div': {\n        [isCompact ? 'bottom' : style.p]: '130%',\n\n        '> span': spanStyles,\n      },\n    };\n  },\n  'VolumeRSWP',\n);\n\nconst WrapperInline = styled('div')(\n  {\n    display: 'none',\n    padding: `0 ${px(8)}`,\n    'pointer-events': 'all',\n\n    '> div': {\n      display: 'flex',\n      padding: `0 ${px(5)}`,\n      width: px(100),\n    },\n\n    '> span': {\n      display: 'flex',\n      fontSize: px(24),\n    },\n\n    '@media (any-pointer: fine)': {\n      alignItems: 'center',\n      display: 'flex',\n    },\n  },\n  ({ style }) => ({\n    color: style.c,\n  }),\n  'VolumeInlineRSWP',\n);\n\nexport default function Volume(props: Props) {\n  const { inlineVolume, layout, locale, playerPosition, setVolume, styles, volume } = props;\n  const [isOpen, setIsOpen] = useState(false);\n  const [volumeState, setVolumeState] = useState(volume);\n  const timeoutRef = useRef<number>();\n  const previousVolume = usePrevious(volume);\n  const isMediumScreen = useMediaQuery('(min-width: 768px)');\n  const isInline = layout === 'responsive' && inlineVolume && isMediumScreen;\n\n  useEffect(() => {\n    if (previousVolume !== volume && volume !== volumeState) {\n      setVolumeState(volume);\n    }\n  }, [previousVolume, volume, volumeState]);\n\n  const handleClickToggleList = useCallback(() => {\n    setIsOpen(s => !s);\n  }, []);\n\n  const handleChangeSlider = ({ x, y }: RangeSliderPosition) => {\n    const value = isInline ? x : y;\n    const currentvolume = Math.round(value) / 100;\n\n    clearTimeout(timeoutRef.current);\n\n    timeoutRef.current = window.setTimeout(() => {\n      setVolume(currentvolume);\n    }, 250);\n\n    setVolumeState(currentvolume);\n  };\n\n  const handleAfterEnd = () => {\n    setTimeout(() => {\n      setIsOpen(false);\n    }, 100);\n  };\n\n  let icon = <VolumeHigh />;\n\n  if (volume === 0) {\n    icon = <VolumeMute />;\n  } else if (volume <= 0.4) {\n    icon = <VolumeLow />;\n  } else if (volume <= 0.7) {\n    icon = <VolumeMid />;\n  }\n\n  if (isInline) {\n    return (\n      <WrapperInline data-component-name=\"Volume\" data-value={volume} style={{ c: styles.color }}>\n        <span>{icon}</span>\n        <div>\n          <RangeSlider\n            axis=\"x\"\n            className=\"volume\"\n            data-component-name=\"volume-bar\"\n            onAfterEnd={handleAfterEnd}\n            onChange={handleChangeSlider}\n            styles={{\n              options: {\n                thumbBorder: 0,\n                thumbBorderRadius: styles.sliderHandleBorderRadius,\n                thumbColor: styles.sliderHandleColor,\n                height: 4,\n                padding: 0,\n                rangeColor: styles.sliderColor,\n                trackBorderRadius: styles.sliderTrackBorderRadius,\n                trackColor: styles.sliderTrackColor,\n              },\n            }}\n            x={volume * 100}\n            xMax={100}\n            xMin={0}\n          />\n        </div>\n      </WrapperInline>\n    );\n  }\n\n  return (\n    <ClickOutside isActive={isOpen} onClick={handleClickToggleList}>\n      <WrapperWithToggle\n        data-component-name=\"Volume\"\n        data-value={volume}\n        style={{ c: styles.color, layout, p: playerPosition }}\n      >\n        {isOpen && (\n          <div>\n            <RangeSlider\n              axis=\"y\"\n              className=\"volume\"\n              data-component-name=\"volume-bar\"\n              onAfterEnd={handleAfterEnd}\n              onChange={handleChangeSlider}\n              styles={{\n                options: {\n                  padding: 0,\n                  rangeColor: '#fff',\n                  thumbBorder: 0,\n                  thumbBorderRadius: 12,\n                  thumbColor: '#fff',\n                  thumbSize: 12,\n                  trackColor: 'rgba(255, 255, 255, 0.5)',\n                  width: 6,\n                },\n              }}\n              y={volume * 100}\n              yMax={100}\n              yMin={0}\n            />\n            <span />\n          </div>\n        )}\n        <button\n          aria-label={locale.volume}\n          className=\"ButtonRSWP\"\n          onClick={handleClickToggleList}\n          title={locale.volume}\n          type=\"button\"\n        >\n          {icon}\n        </button>\n      </WrapperWithToggle>\n    </ClickOutside>\n  );\n}\n","export default function VolumeHigh(props: any) {\n  return (\n    <svg\n      data-component-name=\"VolumeHigh\"\n      height=\"1em\"\n      preserveAspectRatio=\"xMidYMid\"\n      viewBox=\"0 0 64 64\"\n      width=\"1em\"\n      {...props}\n    >\n      <path\n        d=\"M37.963 3.402a2.989 2.989 0 0 1 1.5 2.596v52a3 3 0 0 1-4.5 2.6l-27.7-16C.32 40.572-2.06 31.688 1.943 24.73a14.556 14.556 0 0 1 5.32-5.328l27.7-16a3 3 0 0 1 3 0ZM45 9.542a23.008 23.008 0 0 1 0 44.912V48.25a17.008 17.008 0 0 0 0-32.508Zm-11.532 1.656-23.2 13.4a8.556 8.556 0 0 0 0 14.8l23.2 13.4v-41.6ZM45 22.238a11 11 0 0 1 0 19.52v-19.52Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","export default function VolumeLow(props: any) {\n  return (\n    <svg\n      data-component-name=\"VolumeLow\"\n      height=\"1em\"\n      preserveAspectRatio=\"xMidYMid\"\n      viewBox=\"0 0 64 64\"\n      width=\"1em\"\n      {...props}\n    >\n      <path\n        d=\"M37.963 3.398a3 3 0 0 1 1.5 2.6v52a3 3 0 0 1-4.5 2.6l-27.7-16C.32 40.572-2.06 31.688 1.943 24.73a14.556 14.556 0 0 1 5.32-5.328l27.7-16a3 3 0 0 1 3 0v-.004Zm-27.696 21.2a8.556 8.556 0 0 0 0 14.8l23.2 13.4v-41.6l-23.2 13.4ZM45 41.758v-19.52a11 11 0 0 1 0 19.52Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","export default function VolumeHigh(props: any) {\n  return (\n    <svg\n      data-component-name=\"VolumeMid\"\n      height=\"1em\"\n      preserveAspectRatio=\"xMidYMid\"\n      viewBox=\"0 0 64 64\"\n      width=\"1em\"\n      {...props}\n    >\n      <path\n        d=\"M37.963 3.398a3 3 0 0 1 1.5 2.6v52a3 3 0 0 1-4.5 2.6l-27.7-16C.32 40.572-2.06 31.688 1.943 24.73a14.556 14.556 0 0 1 5.32-5.328l27.7-16a3 3 0 0 1 3 0v-.004Zm-27.696 21.2a8.556 8.556 0 0 0 0 14.8l23.2 13.4v-41.6l-23.2 13.4ZM45 48.946a18.008 18.008 0 0 0 0-33.896v6.6a11.996 11.996 0 0 1 0 20.7v6.596Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","export default function VolumeMute(props: any) {\n  return (\n    <svg\n      data-component-name=\"VolumeMute\"\n      height=\"1em\"\n      preserveAspectRatio=\"xMidYMid\"\n      viewBox=\"0 0 64 64\"\n      width=\"1em\"\n      {...props}\n    >\n      <path\n        d=\"M34.963 3.402a3 3 0 0 1 4.5 2.6v7.624a19.03 19.03 0 0 0-6 2.776v-5.2l-23.2 13.4a8.57 8.57 0 0 0-3.12 3.128 8.564 8.564 0 0 0 3.124 11.68l23.196 13.392v-5.2a18.92 18.92 0 0 0 6 2.776v7.624a3 3 0 0 1-4.5 2.596l-27.7-16a14.556 14.556 0 0 1-5.32-5.328C-2.06 32.313.32 23.428 7.263 19.402l27.7-16Zm17.354 17.6a3 3 0 0 1 2.122 5.12l-5.88 5.88 5.876 5.88a3 3 0 0 1-4.24 4.24l-5.88-5.88-5.88 5.88a3 3 0 1 1-4.385-4.095l6.025-6.025-5.876-5.88a3 3 0 0 1 4.236-4.24l5.88 5.88 5.88-5.88a3 3 0 0 1 2.122-.88Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","import { memo } from 'react';\n\nimport { CssLikeObject, px, styled } from '~/modules/styled';\n\nimport { ComponentsProps, StyledProps } from '~/types';\n\nconst StyledWrapper = styled('div')(\n  {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    position: 'relative',\n\n    '> *': {\n      width: '100%',\n    },\n  },\n  ({ style }: StyledProps) => {\n    let styles: CssLikeObject = {};\n\n    if (style.layout === 'responsive') {\n      styles = {\n        '> *': {\n          '@media (min-width: 768px)': {\n            width: '33.3333%',\n          },\n        },\n\n        '@media (min-width: 768px)': {\n          flexDirection: 'row',\n          padding: `0 ${px(8)}`,\n        },\n      };\n    }\n\n    return {\n      minHeight: px(style.h),\n      ...styles,\n    };\n  },\n  'WrapperRSWP',\n);\n\nfunction Wrapper(props: ComponentsProps) {\n  const { children, layout, styles } = props;\n\n  return (\n    <StyledWrapper data-component-name=\"Wrapper\" style={{ h: styles.height, layout }}>\n      {children}\n    </StyledWrapper>\n  );\n}\n\nexport default memo(Wrapper);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}